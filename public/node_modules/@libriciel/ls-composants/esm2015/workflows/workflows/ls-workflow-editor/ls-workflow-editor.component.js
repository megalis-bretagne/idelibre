/**
 * @fileoverview added by tsickle
 * Generated from: workflows/ls-workflow-editor/ls-workflow-editor.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChild, EventEmitter, Input, Output, ViewChild, ViewChildren } from '@angular/core';
import { NgbPopover } from '@ng-bootstrap/ng-bootstrap';
import { WorkflowModel } from '../../shared/model/workflows/workflow-model';
import { StepModel } from '../../shared/model/workflows/step-model';
import { moveItemInArray } from '@angular/cdk/drag-drop';
import { WorkflowModelLocalizedMessages, WorkflowModelOptions } from '../../shared/model/workflows/workflow-model-options';
export class LsWorkflowEditorComponent {
    constructor() {
        this.messages = {
            CREATE_STEP_TITLE: 'Ajouter une étape',
            EDIT_STEP_TITLE: 'Modification de l\'étape',
            ADD_STEP_BTN_TXT: 'Ajouter une étape',
            FIRST_STEP_TXT: 'Début',
            LAST_STEP_TXT: 'Fin',
        };
        this.activeOptions = {
            startIconClass: 'far fa-flag',
            endIconClass: 'fas fa-flag-checkered',
            editorGlobalLayoutClass: 'ls-workflow-editor-default-layout',
            additionalFinalEndpointClasses: ''
        };
        this.endpointIsEditable = false;
        this.workflowChange = new EventEmitter();
    }
    /**
     * @return {?}
     */
    get localizedMessages() {
        return this.messages;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set localizedMessages(value) {
        this.messages = Object.assign(this.messages, value);
    }
    /**
     * @return {?}
     */
    get options() {
        return this.activeOptions;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set options(value) {
        this.activeOptions = Object.assign(this.activeOptions, value);
    }
    /**
     * @return {?}
     */
    get workflow() {
        return this.workflowData;
    }
    /**
     * @param {?} newValue
     * @return {?}
     */
    set workflow(newValue) {
        this.workflowData = newValue;
        this.workflowChange.emit(newValue);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (!this.workflowData) {
            console.error('Missing input workflow data');
            this.workflowData = new WorkflowModel();
        }
        if (!this.messages) {
            throw new Error('Missing localised messages for LsWorkflowViewerComponent!');
        }
    }
    /**
     * @return {?}
     */
    workflowDataChanged() {
        this.workflowChange.emit(this.workflowData);
    }
    /**
     * @param {?} stepIdx
     * @return {?}
     */
    askForStepDeletion(stepIdx) {
        console.debug('delete step');
        if (this.confirmStepDeletionFct) {
            this.confirmStepDeletionFct(this.workflowData.steps[stepIdx]).then((/**
             * @param {?} result
             * @return {?}
             */
            result => {
                if (result) {
                    this.deleteStep(stepIdx);
                }
            }));
        }
        else {
            this.deleteStep(stepIdx);
        }
    }
    /**
     * @param {?} stepData
     * @param {?} idx
     * @return {?}
     */
    confirmStepCreation(stepData, idx) {
        this.addStep(stepData, idx);
        this.closeCurrentPopover();
    }
    /**
     * @param {?} stepData
     * @param {?} idx
     * @return {?}
     */
    confirmStepEdition(stepData, idx) {
        this.replaceStep(stepData, idx);
        this.closeCurrentPopover();
    }
    /**
     * @return {?}
     */
    confirmFinalStepEdition() {
        this.closeCurrentPopover();
    }
    /**
     * @return {?}
     */
    cancelStepEdition() {
        this.closeCurrentPopover();
    }
    /**
     * @param {?} idx
     * @return {?}
     */
    cancelStepCreation(idx) {
        this.closeCurrentPopover();
    }
    /**
     * @return {?}
     */
    isFirstStep() {
        return (!this.workflowData || this.workflowData.steps.length === 0);
    }
    /**
     * @param {?} idx
     * @return {?}
     */
    getAdditionalStepClass(idx) {
        if (this.currentEditedStepIdx !== null && this.currentEditedStepIdx === idx) {
            return 'selected';
        }
        return '';
    }
    /**
     * @param {?} step
     * @return {?}
     */
    getStepIconClass(step) {
        if (this.getStepIconClassFct) {
            return this.getStepIconClassFct(step);
        }
        return '';
    }
    /**
     * @param {?} step
     * @return {?}
     */
    getStepTooltip(step) {
        if (this.getStepTooltipFct) {
            return this.getStepTooltipFct(step);
        }
        return '';
    }
    /**
     * @param {?} src
     * @return {?}
     */
    cloneStep(src) {
        return src.clone();
    }
    /**
     * @param {?} stepIdx
     * @return {?}
     */
    createStep(stepIdx) {
        /** @type {?} */
        const newStep = new StepModel();
        this.currentPopover = this.getCreationPopoverForIdx(stepIdx);
        this.currentPopover.hidden.subscribe((/**
         * @return {?}
         */
        () => this.cancelStepCreation(stepIdx)));
        this.currentPopover.open({
            stepData: newStep,
            idx: stepIdx,
            cancelStepCreation: this.cancelStepCreation.bind(this),
            confirmStepCreation: this.confirmStepCreation.bind(this)
        });
    }
    /**
     * @param {?} stepIdx
     * @return {?}
     */
    editStep(stepIdx) {
        this.currentEditedStepIdx = stepIdx;
        /** @type {?} */
        const editingStep = this.cloneStep(this.workflowData.steps[stepIdx]);
        this.currentPopover = this.getEditionPopoverForIdx(stepIdx);
        this.currentPopover.hidden.subscribe((/**
         * @return {?}
         */
        () => this.cancelStepEdition()));
        this.currentPopover.open({
            stepData: editingStep,
            idx: stepIdx,
            cancelStepEdition: this.cancelStepEdition.bind(this),
            confirmStepEdition: this.confirmStepEdition.bind(this)
        });
    }
    /**
     * @return {?}
     */
    editFinalStep() {
        /** @type {?} */
        const editingStep = this.cloneStep(this.lastStepData);
        this.currentPopover = this.endpointPopoverElementRef;
        this.currentPopover.hidden.subscribe((/**
         * @return {?}
         */
        () => this.cancelStepEdition()));
        this.currentPopover.open({
            stepData: editingStep,
            cancelStepEdition: this.cancelStepEdition.bind(this),
            confirmStepEdition: this.confirmFinalStepEdition.bind(this)
        });
    }
    /**
     * @param {?} event
     * @return {?}
     */
    drop(event) {
        moveItemInArray(this.workflowData.steps, event.previousIndex, event.currentIndex);
        this.workflowDataChanged();
    }
    /**
     * @param {?} idx
     * @return {?}
     */
    dragDisabledForIdx(idx) {
        return (this.currentEditedStepIdx !== null && this.currentEditedStepIdx === idx);
    }
    /**
     * @private
     * @return {?}
     */
    closeCurrentPopover() {
        if (this.currentPopover && this.currentPopover.isOpen()) {
            this.currentPopover.close();
        }
        this.currentPopover = null;
        this.currentEditedStepIdx = null;
    }
    /**
     * @private
     * @param {?} step
     * @param {?} pos
     * @return {?}
     */
    addStep(step, pos) {
        this.workflowData.steps.splice(pos, 0, step);
        this.workflowDataChanged();
    }
    /**
     * @private
     * @param {?} newStep
     * @param {?} stepIdx
     * @return {?}
     */
    replaceStep(newStep, stepIdx) {
        this.workflowData.steps.splice(stepIdx, 1, newStep);
        this.workflowDataChanged();
    }
    /**
     * @private
     * @param {?} stepIdx
     * @return {?}
     */
    deleteStep(stepIdx) {
        this.workflowData.steps.splice(stepIdx, 1);
        this.workflowDataChanged();
    }
    /**
     * @private
     * @param {?} idx
     * @return {?}
     */
    getCreationPopoverForIdx(idx) {
        /** @type {?} */
        const filteredList = this.allCircuitEditionPopover.filter((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            /** @type {?} */
            const elem = ((/** @type {?} */ (item)))._elementRef;
            if (elem && elem.nativeElement) {
                return elem.nativeElement.hasAttribute('create-btn');
            }
            return true;
        }));
        return filteredList[idx];
    }
    /**
     * @private
     * @param {?} idx
     * @return {?}
     */
    getEditionPopoverForIdx(idx) {
        /** @type {?} */
        const filteredList = this.allCircuitEditionPopover.filter((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            /** @type {?} */
            const elem = ((/** @type {?} */ (item)))._elementRef;
            if (elem && elem.nativeElement) {
                return !(elem.nativeElement.hasAttribute('create-btn'));
            }
            return true;
        }));
        return filteredList[idx];
    }
}
LsWorkflowEditorComponent.decorators = [
    { type: Component, args: [{
                selector: 'ls-workflow-editor',
                template: "<div class=\"ls-workflow-editor\" [ngClass]=\"options.editorGlobalLayoutClass\">\n  <div class=\"ls-workflow-canevas\">\n    <div class=\"ls-workflow-start ls-workflow-endpoint\">\n      <div class=\"ls-workflow-endpoint-content\">\n        <div class=\"ls-workflow-endpoint-icn fa fa-2x\" [ngClass]=\"options.startIconClass\"></div>\n        <div class=\"ls-step-bounds-txt\">{{messages.FIRST_STEP_TXT}}</div>\n      </div>\n    </div>\n    <div class=\"ls-workflow-stepList-container\" cdkDropList (cdkDropListDropped)=\"drop($event)\">\n      <div class=\"ls-workflow-link-container\">\n        <div class=\"ls-workflow-link\"></div>\n        <div [ngClass]=\"isFirstStep() ? 'firstStep' : ''\" class=\"ls-link-button-container\">\n          <div (click)=\"createStep(0)\" [autoClose]=\"'outside'\" [ngbPopover]=\"popCreateContent\"\n               [popoverTitle]=\"messages.popCreateTitle\" class=\"add-step-btn\" create-btn\n               placement=\"right\" popoverClass=\"ls-step-edition-popover\"\n               triggers=\"manual\"\n               autoClose=\"false\">\n            <span class=\"fa fa-plus-circle\"></span>\n            <span class=\"add-step-btn-txt\">{{messages.ADD_STEP_BTN_TXT}}</span>\n          </div>\n        </div>\n      </div>\n\n      <div *ngFor=\"let step of workflowData.steps; index as i\">\n        <div class=\"ls-workflow-step-container\" cdkDrag [cdkDragDisabled]=\"dragDisabledForIdx(i)\">\n          <div [ngClass]=\"getAdditionalStepClass(i)\" class=\"ls-workflow-step\">\n            <div class=\"ls-step-top-line\">\n              <div class=\"step-number\">{{i + 1}}.</div>\n              <div class=\"step-name\">{{step.name}}</div>\n              <div [ngClass]=\"getStepIconClass(step)\" class=\"step-icn fa\" ngbTooltip=\"{{getStepTooltip(step)}}\"></div>\n            </div>\n            <div class=\"ls-step-validator-list\">\n              <ng-template\n                [ngTemplateOutlet]=\"stepDisplayContentRef\"\n                [ngTemplateOutletContext]=\"{step: step}\">\n              </ng-template>\n            </div>\n          </div>\n          <div class=\"ls-workflow-step-external-buttons\">\n            <div (click)=\"editStep(i)\" [autoClose]=\"'outside'\" [ngbPopover]=\"popEditContent\"\n                 [popoverTitle]=\"messages.popEditTitle\" class=\"fa fa-pencil-alt fa-pencil edit-step-btn\"\n                 placement=\"right-top\"\n                 popoverClass=\"ls-step-edition-popover\"\n                 triggers=\"manual\"></div>\n            <div (click)=\"askForStepDeletion(i)\" class=\"fa fa-trash delete-step-btn\"></div>\n          </div>\n        </div>\n\n        <div class=\"ls-workflow-link-container\">\n          <div class=\"ls-workflow-link\"></div>\n          <div class=\"ls-link-button-container\">\n            <div (click)=\"createStep(i + 1)\" [autoClose]=\"'outside'\" [ngbPopover]=\"popCreateContent\"\n                 [popoverTitle]=\"messages.popCreateTitle\" class=\"add-step-btn\" create-btn\n                 placement=\"right\" popoverClass=\"ls-step-edition-popover\"\n                 triggers=\"manual\"\n                 autoClose=\"false\">\n              <span class=\"fa fa-plus-circle\"></span>\n              <span class=\"add-step-btn-txt\">{{messages.ADD_STEP_BTN_TXT}}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n    <div class=\"ls-workflow-end ls-workflow-endpoint\" [ngClass]=\"options.additionalFinalEndpointClasses\">\n      <ng-container *ngIf=\"endpointIsEditable\">\n        <div\n          #endpointPopoverHandle\n          (click)=\"editFinalStep()\"\n          [autoClose]=\"'outside'\"\n          [ngbPopover]=\"popEditFinalStepContent\"\n          [popoverTitle]=\"messages.popEditTitle\"\n          class=\"ls-workflow-endpoint-overlay\"\n          placement=\"right\"\n          popoverClass=\"ls-step-edition-popover\"\n          triggers=\"manual\">\n\n        </div>\n      </ng-container>\n      <div class=\"ls-workflow-endpoint-content\">\n        <div class=\"ls-workflow-endpoint-icn-group\">\n          <div class=\"ls-workflow-endpoint-icn fa fa-2x\" [ngClass]=\"options.endIconClass\"></div>\n          <div class=\"ls-step-bounds-txt\">{{messages.LAST_STEP_TXT}}</div>\n        </div>\n        <div *ngIf=\"endpointIsEditable\" class=\"ls-step-validator-list\">\n          <ng-template [ngTemplateOutlet]=\"lastStepDisplayContentRef\">\n          </ng-template>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<ng-template\n  #popEditContent\n  let-idx=\"idx\"\n  let-stepData=\"stepData\"\n  let-cancelStepEdition=\"cancelStepEdition\"\n  let-confirmStepEdition=\"confirmStepEdition\">\n  <ng-template\n    [ngTemplateOutlet]=\"popEditContentTemplateRef\"\n    [ngTemplateOutletContext]=\"{idx:idx, stepData:stepData, cancelStepEdition:cancelStepEdition, confirmStepEdition:confirmStepEdition}\">\n  </ng-template>\n</ng-template>\n\n<ng-template\n  #popCreateContent\n  let-idx=\"idx\"\n  let-stepData=\"stepData\"\n  let-cancelStepCreation=\"cancelStepCreation\"\n  let-confirmStepCreation=\"confirmStepCreation\">\n  <ng-template\n    [ngTemplateOutlet]=\"popCreateContentTemplateRef\"\n    [ngTemplateOutletContext]=\"{idx:idx, stepData:stepData, cancelStepCreation:cancelStepCreation, confirmStepCreation:confirmStepCreation}\">\n  </ng-template>\n</ng-template>\n\n\n<ng-template\n  #popEditFinalStepContent\n  let-stepData=\"stepData\"\n  let-cancelStepEdition=\"cancelStepEdition\"\n  let-confirmStepEdition=\"confirmStepEdition\">\n  <ng-template\n    [ngTemplateOutlet]=\"endpointPopoverEditContentRef\"\n    [ngTemplateOutletContext]=\"{stepData:stepData, cancelStepEdition:cancelStepEdition, confirmStepEdition:confirmStepEdition, isLastStep:true}\">\n  </ng-template>\n</ng-template>\n",
                styles: ["body{background-color:var(--ls-grey-50)}.active-btn{color:#42a1e8}.ls-workflow-canevas{-ms-flex-align:center;-ms-flex-direction:column;-ms-flex-pack:start;-ms-grid-column:1;-webkit-box-align:center;-webkit-box-direction:normal;-webkit-box-orient:vertical;-webkit-box-pack:start;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:column;grid-column:1;height:100%;justify-content:flex-start}.ls-workflow-endpoint.with-content,.ls-workflow-step{-webkit-box-shadow:0 0 .25rem rgba(0,0,0,.15);background-color:#fff;border:none;box-shadow:0 0 .25rem rgba(0,0,0,.15);min-height:6rem;width:var(--ls-workflow-step-width,20rem)}.ls-workflow-endpoint.with-content .ls-step-top-line,.ls-workflow-step .ls-step-top-line{-ms-flex-align:center;-ms-flex-direction:row;-ms-flex-pack:justify;-webkit-box-align:center;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-box-pack:justify;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:row;font-weight:700;justify-content:space-between;padding:.5rem}.ls-workflow-endpoint.with-content .ls-display-step-separator,.ls-workflow-step .ls-display-step-separator{border-bottom:1px solid #d3d3d3;width:100%}.ls-workflow-endpoint.with-content .ls-step-validator-list,.ls-workflow-step .ls-step-validator-list{color:#5b5b5b;padding:.5rem .5rem .5rem 1.5rem}.ls-workflow-step.selected,.selected.ls-workflow-endpoint.with-content{-webkit-box-shadow:0 .5rem .25rem rgba(0,0,0,.3);box-shadow:0 .5rem .25rem rgba(0,0,0,.3)}.ls-workflow-endpoint.with-content .step-icn,.ls-workflow-step .step-icn{height:1.7rem;width:1.7rem}.ls-workflow-endpoint-content{margin:auto;text-align:center}.ls-workflow-endpoint-content .ls-step-bounds-txt{color:var(--primary);font-weight:700}.ls-workflow-endpoint-content .ls-workflow-endpoint-icn{color:var(--primary)}.ls-workflow-endpoint-content.not-active .ls-step-bounds-txt,.ls-workflow-endpoint-content.not-active .ls-workflow-endpoint-icn{color:#5b5b5b}.ls-workflow-endpoint-content .ls-step-validator-list{text-align:left}.ls-horizontal-separation-line{border-bottom:1px solid #5b5b5b;margin-top:2rem}.ls-workflow-endpoint{-webkit-box-shadow:0 0 .25rem rgba(0,0,0,.15);background-color:#fff;border:none;border-radius:50%;box-shadow:0 0 .25rem rgba(0,0,0,.15);display:-ms-grid;display:grid;height:6rem;position:relative;width:6rem}.ls-workflow-endpoint.with-content{border-radius:0;display:block;width:var(--ls-workflow-step-width,20rem)}.ls-workflow-endpoint.with-content .ls-workflow-endpoint-content{height:100%;padding:.5em;width:100%}.ls-workflow-endpoint.with-content .ls-workflow-endpoint-content .ls-workflow-endpoint-icn-group{-ms-flex-align:baseline;-ms-flex-direction:row-reverse;-ms-flex-pack:justify;-webkit-box-align:baseline;-webkit-box-direction:reverse;-webkit-box-orient:horizontal;-webkit-box-pack:justify;align-items:baseline;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:row-reverse;justify-content:space-between;padding:0 .5em;width:100%}.ls-workflow-endpoint.with-content .ls-workflow-endpoint-content .ls-workflow-endpoint-icn-group:after{content:\"\";display:block;width:2em}.ls-workflow-endpoint .ls-workflow-endpoint-overlay{bottom:0;cursor:pointer;height:100%;left:0;position:absolute;width:100%;z-index:2}.ls-workflow-link{border:1px solid #222;width:0}.cdk-drag-preview .ls-workflow-endpoint.with-content,.cdk-drag-preview .ls-workflow-step{-webkit-box-shadow:0 .5rem .25rem rgba(0,0,0,.3);box-shadow:0 .5rem .25rem rgba(0,0,0,.3)}.cdk-drag-placeholder{min-height:6rem}.cdk-drag-placeholder .ls-workflow-endpoint.with-content,.cdk-drag-placeholder .ls-workflow-step,.cdk-drag-placeholder .ls-workflow-step-external-buttons{display:none}.cdk-drop-list-dragging .cdk-drag{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-animating{-webkit-transition:-webkit-transform .3s cubic-bezier(0,0,.2,1);transition:-webkit-transform .3s cubic-bezier(0,0,.2,1);transition:transform .3s cubic-bezier(0,0,.2,1);transition:transform .3s cubic-bezier(0,0,.2,1),-webkit-transform .3s cubic-bezier(0,0,.2,1)}.ls-workflow-link-container{-ms-flex-direction:row;-webkit-box-direction:normal;-webkit-box-orient:horizontal;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:row;min-height:4rem;min-width:20rem}.ls-workflow-link-container:before{-ms-flex:0 0 calc(50% - 2px);-webkit-box-flex:0;content:\"\";flex:0 0 calc(50% - 2px)}.ls-workflow-link-container .ls-link-button-container{-ms-flex:0 0 calc(50% - 2px);-ms-flex-item-align:center;-ms-grid-row-align:center;-webkit-box-flex:0;align-self:center;flex:0 0 calc(50% - 2px);height:-webkit-min-content;height:-moz-min-content;height:min-content;padding-left:1rem;width:-webkit-min-content;width:-moz-min-content;width:min-content}.ls-workflow-stepList-container{width:100%}.ls-workflow-step-container{-ms-flex-direction:row;-ms-flex-item-align:center;-ms-flex-pack:center;-ms-grid-row-align:center;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-box-pack:center;align-self:center;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:row;justify-content:center;margin-left:auto;margin-right:auto}.ls-workflow-step-container:before{-ms-flex:0 0 5rem;-webkit-box-flex:0;content:\"\";flex:0 0 5rem}.ls-workflow-step-container .ls-workflow-endpoint.with-content,.ls-workflow-step-container .ls-workflow-step{-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center}.ls-workflow-step-container .ls-workflow-step-external-buttons{-ms-flex:0 0 5rem;-webkit-box-flex:0;flex:0 0 5rem;height:-webkit-min-content;height:-moz-min-content;height:min-content;padding-left:1rem}.ls-workflow-step-external-buttons{-ms-flex-direction:row;-ms-flex-pack:start;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-box-pack:start;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:row;justify-content:flex-start}.ls-workflow-step-external-buttons .edit-step-btn{cursor:pointer;margin-right:1rem}.ls-workflow-step-external-buttons .edit-step-btn:hover{color:var(--primary)}.ls-workflow-step-external-buttons .delete-step-btn{cursor:pointer}.ls-workflow-step-external-buttons .delete-step-btn:hover{color:var(--danger)}.ls-workflow-editor{display:-ms-grid;display:grid;height:100%}.ls-workflow-editor .ls-link-button-container .add-step-btn{cursor:pointer;width:-webkit-max-content;width:-moz-max-content;width:max-content}.ls-workflow-editor .ls-link-button-container .add-step-btn .add-step-btn-txt{-webkit-transition:opacity .2s ease-in-out;margin-left:.5em;opacity:0;transition:opacity .2s ease-in-out}.ls-workflow-editor .ls-link-button-container.firstStep .add-step-btn .add-step-btn-txt,.ls-workflow-editor .ls-link-button-container:hover .add-step-btn .add-step-btn-txt{opacity:1}.ls-workflow-editor-default-layout{-ms-grid-columns:66% auto;-ms-grid-rows:100%;grid-template-columns:66% auto;grid-template-rows:100%}@media (min-width:1400px){.container{max-width:1340px}}@media (min-width:1600px){.container{max-width:1540px}}"]
            }] }
];
/** @nocollapse */
LsWorkflowEditorComponent.ctorParameters = () => [];
LsWorkflowEditorComponent.propDecorators = {
    endpointPopoverElementRef: [{ type: ViewChild, args: ['endpointPopoverHandle', { read: NgbPopover },] }],
    allCircuitEditionPopover: [{ type: ViewChildren, args: [NgbPopover,] }],
    popEditContentTemplateRef: [{ type: ContentChild, args: ['popEditContent',] }],
    popCreateContentTemplateRef: [{ type: ContentChild, args: ['popCreateContent',] }],
    endpointPopoverEditContentRef: [{ type: ContentChild, args: ['endpointPopoverEditContent',] }],
    stepDisplayContentRef: [{ type: ContentChild, args: ['stepDisplayContent',] }],
    lastStepDisplayContentRef: [{ type: ContentChild, args: ['lastStepDisplayContent',] }],
    endpointIsEditable: [{ type: Input }],
    getStepIconClassFct: [{ type: Input }],
    getStepTooltipFct: [{ type: Input }],
    confirmStepDeletionFct: [{ type: Input }],
    lastStepData: [{ type: Input }],
    workflowChange: [{ type: Output }],
    localizedMessages: [{ type: Input }],
    options: [{ type: Input }],
    workflow: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.currentEditedStepIdx;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.endpointPopoverElementRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.allCircuitEditionPopover;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.currentPopover;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.popEditContentTemplateRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.popCreateContentTemplateRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.endpointPopoverEditContentRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.stepDisplayContentRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.lastStepDisplayContentRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.messages;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.activeOptions;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.endpointIsEditable;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.getStepIconClassFct;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.getStepTooltipFct;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.confirmStepDeletionFct;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.lastStepData;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.workflowData;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.workflowChange;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHMtd29ya2Zsb3ctZWRpdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIvYnVpbGRzL291dGlscy9jaGFydGVncmFwaGlxdWUvbGlicmFpcmllLWFuZ3VsYXIvbGliL3NyYy93b3JrZmxvd3Mvc3JjLyIsInNvdXJjZXMiOlsid29ya2Zsb3dzL2xzLXdvcmtmbG93LWVkaXRvci9scy13b3JrZmxvdy1lZGl0b3IuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0SCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDeEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDZDQUE2QyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSx5Q0FBeUMsQ0FBQztBQUNwRSxPQUFPLEVBQWUsZUFBZSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDdEUsT0FBTyxFQUFFLDhCQUE4QixFQUFFLG9CQUFvQixFQUFFLE1BQU0scURBQXFELENBQUM7QUFPM0gsTUFBTSxPQUFPLHlCQUF5QjtJQXVDcEM7UUF2QkEsYUFBUSxHQUFtQztZQUN6QyxpQkFBaUIsRUFBRSxtQkFBbUI7WUFDdEMsZUFBZSxFQUFFLDBCQUEwQjtZQUMzQyxnQkFBZ0IsRUFBRSxtQkFBbUI7WUFDckMsY0FBYyxFQUFFLE9BQU87WUFDdkIsYUFBYSxFQUFFLEtBQUs7U0FDckIsQ0FBQztRQUNGLGtCQUFhLEdBQXlCO1lBQ3BDLGNBQWMsRUFBRSxhQUFhO1lBQzdCLFlBQVksRUFBRSx1QkFBdUI7WUFDckMsdUJBQXVCLEVBQUUsbUNBQW1DO1lBQzVELDhCQUE4QixFQUFFLEVBQUU7U0FDbkMsQ0FBQztRQUNPLHVCQUFrQixHQUFHLEtBQUssQ0FBQztRQVExQixtQkFBYyxHQUFHLElBQUksWUFBWSxFQUFpQixDQUFDO0lBRzdELENBQUM7Ozs7SUFFRCxJQUFhLGlCQUFpQjtRQUM1QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQzs7Ozs7SUFFRCxJQUFJLGlCQUFpQixDQUFDLEtBQXFDO1FBQ3pELElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3RELENBQUM7Ozs7SUFFRCxJQUFhLE9BQU87UUFDbEIsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzVCLENBQUM7Ozs7O0lBRUQsSUFBSSxPQUFPLENBQUMsS0FBMkI7UUFDckMsSUFBSSxDQUFDLGFBQWEsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDaEUsQ0FBQzs7OztJQUVELElBQWEsUUFBUTtRQUNuQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDM0IsQ0FBQzs7Ozs7SUFFRCxJQUFJLFFBQVEsQ0FBQyxRQUF1QjtRQUNsQyxJQUFJLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQztRQUM3QixJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNyQyxDQUFDOzs7O0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ3RCLE9BQU8sQ0FBQyxLQUFLLENBQUMsNkJBQTZCLENBQUMsQ0FBQztZQUM3QyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksYUFBYSxFQUFFLENBQUM7U0FDekM7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNsQixNQUFNLElBQUksS0FBSyxDQUFDLDJEQUEyRCxDQUFDLENBQUM7U0FDOUU7SUFFSCxDQUFDOzs7O0lBRUQsbUJBQW1CO1FBQ2pCLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM5QyxDQUFDOzs7OztJQUVELGtCQUFrQixDQUFDLE9BQWU7UUFDaEMsT0FBTyxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUU3QixJQUFJLElBQUksQ0FBQyxzQkFBc0IsRUFBRTtZQUMvQixJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJOzs7O1lBQ2hFLE1BQU0sQ0FBQyxFQUFFO2dCQUNQLElBQUksTUFBTSxFQUFFO29CQUNWLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7aUJBQzFCO1lBQ0gsQ0FBQyxFQUNGLENBQUM7U0FDSDthQUFNO1lBQ0wsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUMxQjtJQUNILENBQUM7Ozs7OztJQUdELG1CQUFtQixDQUFDLFFBQW1CLEVBQUUsR0FBVztRQUNsRCxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUM3QixDQUFDOzs7Ozs7SUFFRCxrQkFBa0IsQ0FBQyxRQUFtQixFQUFFLEdBQVc7UUFDakQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDaEMsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDN0IsQ0FBQzs7OztJQUVELHVCQUF1QjtRQUNyQixJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUM3QixDQUFDOzs7O0lBRUQsaUJBQWlCO1FBQ2YsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDN0IsQ0FBQzs7Ozs7SUFFRCxrQkFBa0IsQ0FBQyxHQUFXO1FBQzVCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0lBQzdCLENBQUM7Ozs7SUFFRCxXQUFXO1FBQ1QsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDdEUsQ0FBQzs7Ozs7SUFFRCxzQkFBc0IsQ0FBQyxHQUFXO1FBQ2hDLElBQUksSUFBSSxDQUFDLG9CQUFvQixLQUFLLElBQUksSUFBSSxJQUFJLENBQUMsb0JBQW9CLEtBQUssR0FBRyxFQUFFO1lBQzNFLE9BQU8sVUFBVSxDQUFDO1NBQ25CO1FBQ0QsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDOzs7OztJQUVELGdCQUFnQixDQUFDLElBQWU7UUFDOUIsSUFBSSxJQUFJLENBQUMsbUJBQW1CLEVBQUU7WUFDNUIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDdkM7UUFDRCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7Ozs7O0lBRUQsY0FBYyxDQUFDLElBQWU7UUFDNUIsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDckM7UUFDRCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7Ozs7O0lBRU0sU0FBUyxDQUFDLEdBQWM7UUFDN0IsT0FBTyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDckIsQ0FBQzs7Ozs7SUFFTSxVQUFVLENBQUMsT0FBZTs7Y0FDekIsT0FBTyxHQUFHLElBQUksU0FBUyxFQUFFO1FBRS9CLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLHdCQUF3QixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzdELElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLFNBQVM7OztRQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsRUFBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUN0QjtZQUNFLFFBQVEsRUFBRSxPQUFPO1lBQ2pCLEdBQUcsRUFBRSxPQUFPO1lBQ1osa0JBQWtCLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDdEQsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7U0FDekQsQ0FBQyxDQUFDO0lBQ1AsQ0FBQzs7Ozs7SUFFTSxRQUFRLENBQUMsT0FBZTtRQUM3QixJQUFJLENBQUMsb0JBQW9CLEdBQUcsT0FBTyxDQUFDOztjQUM5QixXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUVwRSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM1RCxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxTQUFTOzs7UUFBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsRUFBQyxDQUFDO1FBQ3JFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDO1lBQ3ZCLFFBQVEsRUFBRSxXQUFXO1lBQ3JCLEdBQUcsRUFBRSxPQUFPO1lBQ1osaUJBQWlCLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDcEQsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7U0FDdkQsQ0FBQyxDQUFDO0lBQ0wsQ0FBQzs7OztJQUVNLGFBQWE7O2NBQ1osV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztRQUNyRCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyx5QkFBeUIsQ0FBQztRQUNyRCxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxTQUFTOzs7UUFBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsRUFBQyxDQUFDO1FBQ3JFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDO1lBQ3ZCLFFBQVEsRUFBRSxXQUFXO1lBQ3JCLGlCQUFpQixFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ3BELGtCQUFrQixFQUFFLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1NBQzVELENBQUMsQ0FBQztJQUNMLENBQUM7Ozs7O0lBRUQsSUFBSSxDQUFDLEtBQStCO1FBQ2xDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNsRixJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUM3QixDQUFDOzs7OztJQUVELGtCQUFrQixDQUFDLEdBQVc7UUFDNUIsT0FBTyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDLG9CQUFvQixLQUFLLEdBQUcsQ0FBQyxDQUFDO0lBQ25GLENBQUM7Ozs7O0lBRU8sbUJBQW1CO1FBQ3pCLElBQUksSUFBSSxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3ZELElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDN0I7UUFDRCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztRQUMzQixJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO0lBQ25DLENBQUM7Ozs7Ozs7SUFFTyxPQUFPLENBQUMsSUFBZSxFQUFFLEdBQVc7UUFDMUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDN0IsQ0FBQzs7Ozs7OztJQUVPLFdBQVcsQ0FBQyxPQUFrQixFQUFFLE9BQWU7UUFDckQsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDN0IsQ0FBQzs7Ozs7O0lBRU8sVUFBVSxDQUFDLE9BQWU7UUFDaEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUM3QixDQUFDOzs7Ozs7SUFFTyx3QkFBd0IsQ0FBQyxHQUFXOztjQUNwQyxZQUFZLEdBQUcsSUFBSSxDQUFDLHdCQUF3QixDQUFDLE1BQU07Ozs7UUFDdkQsQ0FBQyxJQUFJLEVBQUUsRUFBRTs7a0JBQ0QsSUFBSSxHQUFHLENBQUMsbUJBQUEsSUFBSSxFQUFPLENBQUMsQ0FBQyxXQUFXO1lBQ3RDLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7Z0JBQzlCLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUM7YUFDdEQ7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUMsRUFBQztRQUVKLE9BQU8sWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzNCLENBQUM7Ozs7OztJQUVPLHVCQUF1QixDQUFDLEdBQVc7O2NBQ25DLFlBQVksR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsTUFBTTs7OztRQUN2RCxDQUFDLElBQUksRUFBRSxFQUFFOztrQkFDRCxJQUFJLEdBQUcsQ0FBQyxtQkFBQSxJQUFJLEVBQU8sQ0FBQyxDQUFDLFdBQVc7WUFDdEMsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRTtnQkFDOUIsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQzthQUN6RDtZQUNELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQyxFQUFDO1FBRUosT0FBTyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDM0IsQ0FBQzs7O1lBM1BGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsb0JBQW9CO2dCQUM5Qiwwc0xBQWtEOzthQUVuRDs7Ozs7d0NBS0UsU0FBUyxTQUFDLHVCQUF1QixFQUFFLEVBQUMsSUFBSSxFQUFFLFVBQVUsRUFBQzt1Q0FDckQsWUFBWSxTQUFDLFVBQVU7d0NBSXZCLFlBQVksU0FBQyxnQkFBZ0I7MENBQzdCLFlBQVksU0FBQyxrQkFBa0I7NENBQy9CLFlBQVksU0FBQyw0QkFBNEI7b0NBQ3pDLFlBQVksU0FBQyxvQkFBb0I7d0NBQ2pDLFlBQVksU0FBQyx3QkFBd0I7aUNBZ0JyQyxLQUFLO2tDQUNMLEtBQUs7Z0NBQ0wsS0FBSztxQ0FDTCxLQUFLOzJCQUVMLEtBQUs7NkJBR0wsTUFBTTtnQ0FLTixLQUFLO3NCQVFMLEtBQUs7dUJBUUwsS0FBSzs7OztJQXhETix5REFBNkI7O0lBRTdCLDhEQUE4Rjs7SUFDOUYsNkRBQTBFOztJQUMxRSxtREFBMkI7O0lBRzNCLDhEQUE0RTs7SUFDNUUsZ0VBQWdGOztJQUNoRixrRUFBNEY7O0lBQzVGLDBEQUE0RTs7SUFDNUUsOERBQW9GOztJQUdwRiw2Q0FNRTs7SUFDRixrREFLRTs7SUFDRix1REFBb0M7O0lBQ3BDLHdEQUEwRDs7SUFDMUQsc0RBQXdEOztJQUN4RCwyREFBdUU7O0lBRXZFLGlEQUFpQzs7SUFFakMsaURBQTRCOztJQUM1QixtREFBNkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFF1ZXJ5TGlzdCwgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbXBvbmVudCwgQ29udGVudENoaWxkLCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCwgVmlld0NoaWxkLCBWaWV3Q2hpbGRyZW4gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5nYlBvcG92ZXIgfSBmcm9tICdAbmctYm9vdHN0cmFwL25nLWJvb3RzdHJhcCc7XG5pbXBvcnQgeyBXb3JrZmxvd01vZGVsIH0gZnJvbSAnLi4vLi4vc2hhcmVkL21vZGVsL3dvcmtmbG93cy93b3JrZmxvdy1tb2RlbCc7XG5pbXBvcnQgeyBTdGVwTW9kZWwgfSBmcm9tICcuLi8uLi9zaGFyZWQvbW9kZWwvd29ya2Zsb3dzL3N0ZXAtbW9kZWwnO1xuaW1wb3J0IHsgQ2RrRHJhZ0Ryb3AsIG1vdmVJdGVtSW5BcnJheSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9kcmFnLWRyb3AnO1xuaW1wb3J0IHsgV29ya2Zsb3dNb2RlbExvY2FsaXplZE1lc3NhZ2VzLCBXb3JrZmxvd01vZGVsT3B0aW9ucyB9IGZyb20gJy4uLy4uL3NoYXJlZC9tb2RlbC93b3JrZmxvd3Mvd29ya2Zsb3ctbW9kZWwtb3B0aW9ucyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xzLXdvcmtmbG93LWVkaXRvcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9scy13b3JrZmxvdy1lZGl0b3IuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9scy13b3JrZmxvdy1lZGl0b3IuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMc1dvcmtmbG93RWRpdG9yQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBjdXJyZW50RWRpdGVkU3RlcElkeDogbnVtYmVyO1xuXG4gIEBWaWV3Q2hpbGQoJ2VuZHBvaW50UG9wb3ZlckhhbmRsZScsIHtyZWFkOiBOZ2JQb3BvdmVyfSkgZW5kcG9pbnRQb3BvdmVyRWxlbWVudFJlZjogTmdiUG9wb3ZlcjtcbiAgQFZpZXdDaGlsZHJlbihOZ2JQb3BvdmVyKSBhbGxDaXJjdWl0RWRpdGlvblBvcG92ZXI6IFF1ZXJ5TGlzdDxOZ2JQb3BvdmVyPjtcbiAgY3VycmVudFBvcG92ZXI6IE5nYlBvcG92ZXI7XG5cblxuICBAQ29udGVudENoaWxkKCdwb3BFZGl0Q29udGVudCcpIHBvcEVkaXRDb250ZW50VGVtcGxhdGVSZWY6IFRlbXBsYXRlUmVmPGFueT47XG4gIEBDb250ZW50Q2hpbGQoJ3BvcENyZWF0ZUNvbnRlbnQnKSBwb3BDcmVhdGVDb250ZW50VGVtcGxhdGVSZWY6IFRlbXBsYXRlUmVmPGFueT47XG4gIEBDb250ZW50Q2hpbGQoJ2VuZHBvaW50UG9wb3ZlckVkaXRDb250ZW50JykgZW5kcG9pbnRQb3BvdmVyRWRpdENvbnRlbnRSZWY6IFRlbXBsYXRlUmVmPGFueT47XG4gIEBDb250ZW50Q2hpbGQoJ3N0ZXBEaXNwbGF5Q29udGVudCcpIHN0ZXBEaXNwbGF5Q29udGVudFJlZjogVGVtcGxhdGVSZWY8YW55PjtcbiAgQENvbnRlbnRDaGlsZCgnbGFzdFN0ZXBEaXNwbGF5Q29udGVudCcpIGxhc3RTdGVwRGlzcGxheUNvbnRlbnRSZWY6IFRlbXBsYXRlUmVmPGFueT47XG5cblxuICBtZXNzYWdlczogV29ya2Zsb3dNb2RlbExvY2FsaXplZE1lc3NhZ2VzID0ge1xuICAgIENSRUFURV9TVEVQX1RJVExFOiAnQWpvdXRlciB1bmUgw6l0YXBlJyxcbiAgICBFRElUX1NURVBfVElUTEU6ICdNb2RpZmljYXRpb24gZGUgbFxcJ8OpdGFwZScsXG4gICAgQUREX1NURVBfQlROX1RYVDogJ0Fqb3V0ZXIgdW5lIMOpdGFwZScsXG4gICAgRklSU1RfU1RFUF9UWFQ6ICdEw6lidXQnLFxuICAgIExBU1RfU1RFUF9UWFQ6ICdGaW4nLFxuICB9O1xuICBhY3RpdmVPcHRpb25zOiBXb3JrZmxvd01vZGVsT3B0aW9ucyA9IHtcbiAgICBzdGFydEljb25DbGFzczogJ2ZhciBmYS1mbGFnJyxcbiAgICBlbmRJY29uQ2xhc3M6ICdmYXMgZmEtZmxhZy1jaGVja2VyZWQnLFxuICAgIGVkaXRvckdsb2JhbExheW91dENsYXNzOiAnbHMtd29ya2Zsb3ctZWRpdG9yLWRlZmF1bHQtbGF5b3V0JyxcbiAgICBhZGRpdGlvbmFsRmluYWxFbmRwb2ludENsYXNzZXM6ICcnXG4gIH07XG4gIEBJbnB1dCgpIGVuZHBvaW50SXNFZGl0YWJsZSA9IGZhbHNlO1xuICBASW5wdXQoKSBnZXRTdGVwSWNvbkNsYXNzRmN0OiAoc3RlcDogU3RlcE1vZGVsKSA9PiBzdHJpbmc7XG4gIEBJbnB1dCgpIGdldFN0ZXBUb29sdGlwRmN0OiAoc3RlcDogU3RlcE1vZGVsKSA9PiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbmZpcm1TdGVwRGVsZXRpb25GY3Q6IChzdGVwOiBTdGVwTW9kZWwpID0+IFByb21pc2U8Ym9vbGVhbj47XG5cbiAgQElucHV0KCkgbGFzdFN0ZXBEYXRhOiBTdGVwTW9kZWw7XG5cbiAgd29ya2Zsb3dEYXRhOiBXb3JrZmxvd01vZGVsO1xuICBAT3V0cHV0KCkgd29ya2Zsb3dDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFdvcmtmbG93TW9kZWw+KCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICBASW5wdXQoKSBnZXQgbG9jYWxpemVkTWVzc2FnZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZXM7XG4gIH1cblxuICBzZXQgbG9jYWxpemVkTWVzc2FnZXModmFsdWU6IFdvcmtmbG93TW9kZWxMb2NhbGl6ZWRNZXNzYWdlcykge1xuICAgIHRoaXMubWVzc2FnZXMgPSBPYmplY3QuYXNzaWduKHRoaXMubWVzc2FnZXMsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpIGdldCBvcHRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZU9wdGlvbnM7XG4gIH1cblxuICBzZXQgb3B0aW9ucyh2YWx1ZTogV29ya2Zsb3dNb2RlbE9wdGlvbnMpIHtcbiAgICB0aGlzLmFjdGl2ZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMuYWN0aXZlT3B0aW9ucywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KCkgZ2V0IHdvcmtmbG93KCk6IFdvcmtmbG93TW9kZWwge1xuICAgIHJldHVybiB0aGlzLndvcmtmbG93RGF0YTtcbiAgfVxuXG4gIHNldCB3b3JrZmxvdyhuZXdWYWx1ZTogV29ya2Zsb3dNb2RlbCkge1xuICAgIHRoaXMud29ya2Zsb3dEYXRhID0gbmV3VmFsdWU7XG4gICAgdGhpcy53b3JrZmxvd0NoYW5nZS5lbWl0KG5ld1ZhbHVlKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGlmICghdGhpcy53b3JrZmxvd0RhdGEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgaW5wdXQgd29ya2Zsb3cgZGF0YScpO1xuICAgICAgdGhpcy53b3JrZmxvd0RhdGEgPSBuZXcgV29ya2Zsb3dNb2RlbCgpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5tZXNzYWdlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGxvY2FsaXNlZCBtZXNzYWdlcyBmb3IgTHNXb3JrZmxvd1ZpZXdlckNvbXBvbmVudCEnKTtcbiAgICB9XG5cbiAgfVxuXG4gIHdvcmtmbG93RGF0YUNoYW5nZWQoKSB7XG4gICAgdGhpcy53b3JrZmxvd0NoYW5nZS5lbWl0KHRoaXMud29ya2Zsb3dEYXRhKTtcbiAgfVxuXG4gIGFza0ZvclN0ZXBEZWxldGlvbihzdGVwSWR4OiBudW1iZXIpIHtcbiAgICBjb25zb2xlLmRlYnVnKCdkZWxldGUgc3RlcCcpO1xuXG4gICAgaWYgKHRoaXMuY29uZmlybVN0ZXBEZWxldGlvbkZjdCkge1xuICAgICAgdGhpcy5jb25maXJtU3RlcERlbGV0aW9uRmN0KHRoaXMud29ya2Zsb3dEYXRhLnN0ZXBzW3N0ZXBJZHhdKS50aGVuKFxuICAgICAgICByZXN1bHQgPT4ge1xuICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlU3RlcChzdGVwSWR4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVsZXRlU3RlcChzdGVwSWR4KTtcbiAgICB9XG4gIH1cblxuXG4gIGNvbmZpcm1TdGVwQ3JlYXRpb24oc3RlcERhdGE6IFN0ZXBNb2RlbCwgaWR4OiBudW1iZXIpIHtcbiAgICB0aGlzLmFkZFN0ZXAoc3RlcERhdGEsIGlkeCk7XG4gICAgdGhpcy5jbG9zZUN1cnJlbnRQb3BvdmVyKCk7XG4gIH1cblxuICBjb25maXJtU3RlcEVkaXRpb24oc3RlcERhdGE6IFN0ZXBNb2RlbCwgaWR4OiBudW1iZXIpIHtcbiAgICB0aGlzLnJlcGxhY2VTdGVwKHN0ZXBEYXRhLCBpZHgpO1xuICAgIHRoaXMuY2xvc2VDdXJyZW50UG9wb3ZlcigpO1xuICB9XG5cbiAgY29uZmlybUZpbmFsU3RlcEVkaXRpb24oKSB7XG4gICAgdGhpcy5jbG9zZUN1cnJlbnRQb3BvdmVyKCk7XG4gIH1cblxuICBjYW5jZWxTdGVwRWRpdGlvbigpIHtcbiAgICB0aGlzLmNsb3NlQ3VycmVudFBvcG92ZXIoKTtcbiAgfVxuXG4gIGNhbmNlbFN0ZXBDcmVhdGlvbihpZHg6IG51bWJlcikge1xuICAgIHRoaXMuY2xvc2VDdXJyZW50UG9wb3ZlcigpO1xuICB9XG5cbiAgaXNGaXJzdFN0ZXAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICghdGhpcy53b3JrZmxvd0RhdGEgfHwgdGhpcy53b3JrZmxvd0RhdGEuc3RlcHMubGVuZ3RoID09PSAwKTtcbiAgfVxuXG4gIGdldEFkZGl0aW9uYWxTdGVwQ2xhc3MoaWR4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmN1cnJlbnRFZGl0ZWRTdGVwSWR4ICE9PSBudWxsICYmIHRoaXMuY3VycmVudEVkaXRlZFN0ZXBJZHggPT09IGlkeCkge1xuICAgICAgcmV0dXJuICdzZWxlY3RlZCc7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGdldFN0ZXBJY29uQ2xhc3Moc3RlcDogU3RlcE1vZGVsKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5nZXRTdGVwSWNvbkNsYXNzRmN0KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRTdGVwSWNvbkNsYXNzRmN0KHN0ZXApO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBnZXRTdGVwVG9vbHRpcChzdGVwOiBTdGVwTW9kZWwpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmdldFN0ZXBUb29sdGlwRmN0KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRTdGVwVG9vbHRpcEZjdChzdGVwKTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgcHVibGljIGNsb25lU3RlcChzcmM6IFN0ZXBNb2RlbCk6IFN0ZXBNb2RlbCB7XG4gICAgcmV0dXJuIHNyYy5jbG9uZSgpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZVN0ZXAoc3RlcElkeDogbnVtYmVyKSB7XG4gICAgY29uc3QgbmV3U3RlcCA9IG5ldyBTdGVwTW9kZWwoKTtcblxuICAgIHRoaXMuY3VycmVudFBvcG92ZXIgPSB0aGlzLmdldENyZWF0aW9uUG9wb3ZlckZvcklkeChzdGVwSWR4KTtcbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLmhpZGRlbi5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jYW5jZWxTdGVwQ3JlYXRpb24oc3RlcElkeCkpO1xuICAgIHRoaXMuY3VycmVudFBvcG92ZXIub3BlbihcbiAgICAgIHtcbiAgICAgICAgc3RlcERhdGE6IG5ld1N0ZXAsXG4gICAgICAgIGlkeDogc3RlcElkeCxcbiAgICAgICAgY2FuY2VsU3RlcENyZWF0aW9uOiB0aGlzLmNhbmNlbFN0ZXBDcmVhdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICBjb25maXJtU3RlcENyZWF0aW9uOiB0aGlzLmNvbmZpcm1TdGVwQ3JlYXRpb24uYmluZCh0aGlzKVxuICAgICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZWRpdFN0ZXAoc3RlcElkeDogbnVtYmVyKSB7XG4gICAgdGhpcy5jdXJyZW50RWRpdGVkU3RlcElkeCA9IHN0ZXBJZHg7XG4gICAgY29uc3QgZWRpdGluZ1N0ZXAgPSB0aGlzLmNsb25lU3RlcCh0aGlzLndvcmtmbG93RGF0YS5zdGVwc1tzdGVwSWR4XSk7XG5cbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyID0gdGhpcy5nZXRFZGl0aW9uUG9wb3ZlckZvcklkeChzdGVwSWR4KTtcbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLmhpZGRlbi5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jYW5jZWxTdGVwRWRpdGlvbigpKTtcbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLm9wZW4oe1xuICAgICAgc3RlcERhdGE6IGVkaXRpbmdTdGVwLFxuICAgICAgaWR4OiBzdGVwSWR4LFxuICAgICAgY2FuY2VsU3RlcEVkaXRpb246IHRoaXMuY2FuY2VsU3RlcEVkaXRpb24uYmluZCh0aGlzKSxcbiAgICAgIGNvbmZpcm1TdGVwRWRpdGlvbjogdGhpcy5jb25maXJtU3RlcEVkaXRpb24uYmluZCh0aGlzKVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGVkaXRGaW5hbFN0ZXAoKSB7XG4gICAgY29uc3QgZWRpdGluZ1N0ZXAgPSB0aGlzLmNsb25lU3RlcCh0aGlzLmxhc3RTdGVwRGF0YSk7XG4gICAgdGhpcy5jdXJyZW50UG9wb3ZlciA9IHRoaXMuZW5kcG9pbnRQb3BvdmVyRWxlbWVudFJlZjtcbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLmhpZGRlbi5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jYW5jZWxTdGVwRWRpdGlvbigpKTtcbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLm9wZW4oe1xuICAgICAgc3RlcERhdGE6IGVkaXRpbmdTdGVwLFxuICAgICAgY2FuY2VsU3RlcEVkaXRpb246IHRoaXMuY2FuY2VsU3RlcEVkaXRpb24uYmluZCh0aGlzKSxcbiAgICAgIGNvbmZpcm1TdGVwRWRpdGlvbjogdGhpcy5jb25maXJtRmluYWxTdGVwRWRpdGlvbi5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH1cblxuICBkcm9wKGV2ZW50OiBDZGtEcmFnRHJvcDxTdGVwTW9kZWxbXT4pIHtcbiAgICBtb3ZlSXRlbUluQXJyYXkodGhpcy53b3JrZmxvd0RhdGEuc3RlcHMsIGV2ZW50LnByZXZpb3VzSW5kZXgsIGV2ZW50LmN1cnJlbnRJbmRleCk7XG4gICAgdGhpcy53b3JrZmxvd0RhdGFDaGFuZ2VkKCk7XG4gIH1cblxuICBkcmFnRGlzYWJsZWRGb3JJZHgoaWR4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gKHRoaXMuY3VycmVudEVkaXRlZFN0ZXBJZHggIT09IG51bGwgJiYgdGhpcy5jdXJyZW50RWRpdGVkU3RlcElkeCA9PT0gaWR4KTtcbiAgfVxuXG4gIHByaXZhdGUgY2xvc2VDdXJyZW50UG9wb3ZlcigpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50UG9wb3ZlciAmJiB0aGlzLmN1cnJlbnRQb3BvdmVyLmlzT3BlbigpKSB7XG4gICAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLmNsb3NlKCk7XG4gICAgfVxuICAgIHRoaXMuY3VycmVudFBvcG92ZXIgPSBudWxsO1xuICAgIHRoaXMuY3VycmVudEVkaXRlZFN0ZXBJZHggPSBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdGVwKHN0ZXA6IFN0ZXBNb2RlbCwgcG9zOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLndvcmtmbG93RGF0YS5zdGVwcy5zcGxpY2UocG9zLCAwLCBzdGVwKTtcbiAgICB0aGlzLndvcmtmbG93RGF0YUNoYW5nZWQoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVwbGFjZVN0ZXAobmV3U3RlcDogU3RlcE1vZGVsLCBzdGVwSWR4OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLndvcmtmbG93RGF0YS5zdGVwcy5zcGxpY2Uoc3RlcElkeCwgMSwgbmV3U3RlcCk7XG4gICAgdGhpcy53b3JrZmxvd0RhdGFDaGFuZ2VkKCk7XG4gIH1cblxuICBwcml2YXRlIGRlbGV0ZVN0ZXAoc3RlcElkeDogbnVtYmVyKSB7XG4gICAgdGhpcy53b3JrZmxvd0RhdGEuc3RlcHMuc3BsaWNlKHN0ZXBJZHgsIDEpO1xuICAgIHRoaXMud29ya2Zsb3dEYXRhQ2hhbmdlZCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDcmVhdGlvblBvcG92ZXJGb3JJZHgoaWR4OiBudW1iZXIpOiBOZ2JQb3BvdmVyIHtcbiAgICBjb25zdCBmaWx0ZXJlZExpc3QgPSB0aGlzLmFsbENpcmN1aXRFZGl0aW9uUG9wb3Zlci5maWx0ZXIoXG4gICAgICAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtID0gKGl0ZW0gYXMgYW55KS5fZWxlbWVudFJlZjtcbiAgICAgICAgaWYgKGVsZW0gJiYgZWxlbS5uYXRpdmVFbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGVsZW0ubmF0aXZlRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2NyZWF0ZS1idG4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIGZpbHRlcmVkTGlzdFtpZHhdO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRFZGl0aW9uUG9wb3ZlckZvcklkeChpZHg6IG51bWJlcik6IE5nYlBvcG92ZXIge1xuICAgIGNvbnN0IGZpbHRlcmVkTGlzdCA9IHRoaXMuYWxsQ2lyY3VpdEVkaXRpb25Qb3BvdmVyLmZpbHRlcihcbiAgICAgIChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW0gPSAoaXRlbSBhcyBhbnkpLl9lbGVtZW50UmVmO1xuICAgICAgICBpZiAoZWxlbSAmJiBlbGVtLm5hdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gIShlbGVtLm5hdGl2ZUVsZW1lbnQuaGFzQXR0cmlidXRlKCdjcmVhdGUtYnRuJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG5cbiAgICByZXR1cm4gZmlsdGVyZWRMaXN0W2lkeF07XG4gIH1cblxufVxuIl19