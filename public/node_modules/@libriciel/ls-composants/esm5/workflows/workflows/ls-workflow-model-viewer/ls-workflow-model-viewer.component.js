/**
 * @fileoverview added by tsickle
 * Generated from: workflows/ls-workflow-model-viewer/ls-workflow-model-viewer.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChild, Input, TemplateRef } from '@angular/core';
import { WorkflowModel } from '../../shared/model/workflows/workflow-model';
import { StepState } from '../../shared/model/workflows/step-state';
var LsWorkflowModelViewerComponent = /** @class */ (function () {
    // messages = CircuitDisplayMessages;
    function LsWorkflowModelViewerComponent() {
        this.isInstance = false;
        this.isOver = false;
        this.isRejected = false;
    }
    /**
     * @return {?}
     */
    LsWorkflowModelViewerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (!this.circuit) {
            console.error('Missing input circuit data');
            this.circuit = new WorkflowModel();
        }
        if (!this.messages) {
            throw new Error('Missing localised messages for LsWorkflowViewerComponent!');
        }
        if (!this.getStepIconClassFct) {
            throw new Error('Missing getStepIconClassFct for LsWorkflowViewerComponent!');
        }
        if (!this.getStepTooltipFct) {
            throw new Error('Missing getStepTooltipFct for LsWorkflowViewerComponent!');
        }
    };
    /**
     * @return {?}
     */
    LsWorkflowModelViewerComponent.prototype.ngOnChanges = /**
     * @return {?}
     */
    function () {
        console.debug('LsWorkflowViewerComponent::ngOnChanges, ', this);
        if (this.isInstance) {
            console.debug('LsWorkflowViewerComponent::ngOnChanges - circuit is an instance ');
            /** @type {?} */
            var workflow = (/** @type {?} */ (this.circuit));
            this.activeStep = workflow.currentStepIdx;
            this.isOver = workflow.isOver;
            this.isRejected = workflow.rejected;
        }
    };
    /**
     * @param {?} step
     * @return {?}
     */
    LsWorkflowModelViewerComponent.prototype.getStepIconClass = /**
     * @param {?} step
     * @return {?}
     */
    function (step) {
        return this.getStepIconClassFct(step);
    };
    /**
     * @param {?} step
     * @return {?}
     */
    LsWorkflowModelViewerComponent.prototype.getStepTooltip = /**
     * @param {?} step
     * @return {?}
     */
    function (step) {
        return this.getStepTooltipFct(step);
    };
    /**
     * @param {?} stepIdx
     * @return {?}
     */
    LsWorkflowModelViewerComponent.prototype.isActiveStep = /**
     * @param {?} stepIdx
     * @return {?}
     */
    function (stepIdx) {
        return !this.isRejected && !this.isOver && stepIdx === this.activeStep;
    };
    /**
     * @param {?} step
     * @return {?}
     */
    LsWorkflowModelViewerComponent.prototype.isPassed = /**
     * @param {?} step
     * @return {?}
     */
    function (step) {
        return this.isInstance && ((step.state === StepState.VALIDATED) || (step.state === StepState.REJECTED));
    };
    /**
     * @param {?} step
     * @param {?} validator
     * @return {?}
     */
    LsWorkflowModelViewerComponent.prototype.isActualValidator = /**
     * @param {?} step
     * @param {?} validator
     * @return {?}
     */
    function (step, validator) {
        return this.isInstance && (step.validatedBy.some((/**
         * @param {?} elem
         * @return {?}
         */
        function (elem) { return elem.id === validator.id; })));
    };
    /**
     * @return {?}
     */
    LsWorkflowModelViewerComponent.prototype.isCircuitOver = /**
     * @return {?}
     */
    function () {
        return this.isOver && !this.isRejected;
    };
    /**
     * @return {?}
     */
    LsWorkflowModelViewerComponent.prototype.getCircuitEndAdditionalClasses = /**
     * @return {?}
     */
    function () {
        if (this.getCircuitEndAdditionalClassesFct) {
            return this.getCircuitEndAdditionalClassesFct();
        }
        return '';
    };
    /**
     * @param {?} step
     * @param {?} validator
     * @return {?}
     */
    LsWorkflowModelViewerComponent.prototype.getValidatorClasses = /**
     * @param {?} step
     * @param {?} validator
     * @return {?}
     */
    function (step, validator) {
        if (this.isActualValidator(step, validator)) {
            if (step.state === StepState.REJECTED) {
                return this.messages.REJECTED_BY_ICON_CLASS;
            }
            else {
                return this.messages.VALIDATED_BY_ICON_CLASS;
            }
        }
        return '';
    };
    LsWorkflowModelViewerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ls-workflow-model-viewer',
                    template: "<div class=\"ls-workflow-display\">\n  <div class=\"ls-workflow-canevas\">\n    <div class=\"circuit-start\">\n      <div class=\"ls-workflow-endpoint-content\">\n        <span class=\"ls-workflow-endpoint-icn fa fa fa-2x\" [ngClass]=\"messages.CIRCUIT_START_ICON\"></span>\n        <span class=\"ls-step-bounds-txt\" [innerText]=\"messages.FIRST_STEP_TXT\"></span>\n      </div>\n    </div>\n    <div class=\"steps-container\">\n      <div *ngFor=\"let step of circuit.steps; index as i\" >\n        <div class=\"ls-workflow-display-step-container\">\n          <div  class=\"ls-workflow-step\" [ngClass]=\"isActiveStep(i) ? 'wa-active-step wa-white-icn' : ''\">\n            <div class=\"ls-step-top-line\">\n              <div class=\"step-number\">{{i + 1}}.</div>\n              <div class=\"step-name\">{{step.name}}</div>\n              <div [ngClass]=\"getStepIconClass(step)\" class=\"step-icn fa\" ngbTooltip=\"{{getStepTooltip(step)}}\"></div>\n            </div>\n            <div class=\"ls-display-step-separator\"></div>\n            <div class=\"ls-step-validator-list\" [ngClass]=\"isInstance ? 'wa-circuit-instance' : ''\">\n              <ng-container *ngIf=\"isPassed(step)\">\n                <div *ngFor=\"let validator of step.validators\">\n                  <ng-template\n                    [ngTemplateOutlet]=\"passedStepTemplateRef\"\n                    [ngTemplateOutletContext]=\"{step: step, validator: validator}\">\n                  </ng-template>\n                </div>\n              </ng-container>\n              <ng-container *ngIf=\" ! isPassed(step)\">\n                <div *ngFor=\"let validator of step.validators\">\n                  <ng-template\n                    [ngTemplateOutlet]=\"pendingStepTemplateRef\"\n                    [ngTemplateOutletContext]=\"{step: step, validator: validator}\">\n                  </ng-template>\n                </div>\n              </ng-container>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"ls-workflow-end\">\n      <div class=\"ls-workflow-endpoint-content\" [ngClass]=\"getCircuitEndAdditionalClasses()\">\n        <span class=\"ls-workflow-endpoint-icn fa fa-2x\" [ngClass]=\"messages.CIRCUIT_END_ICON\"></span>\n        <span class=\"ls-step-bounds-txt\" [innerText]=\"messages.LAST_STEP_TXT\"></span>\n      </div>\n    </div>\n  </div>\n</div>\n",
                    styles: ["body{background-color:var(--ls-grey-50)}.active-btn{color:#42a1e8}.ls-workflow-canevas{-ms-grid-column:1;grid-column:1;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.ls-workflow-step{background-color:#fff;-webkit-box-shadow:0 0 .25rem rgba(0,0,0,.15);box-shadow:0 0 .25rem rgba(0,0,0,.15);border:none;width:var(--ls-workflow-step-width,20rem);min-height:6rem}.ls-workflow-step .ls-step-top-line{padding:.5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:700}.ls-workflow-step .ls-display-step-separator{width:100%;border-bottom:1px solid #d3d3d3}.ls-workflow-step .ls-step-validator-list{padding:.5rem .5rem .5rem 1.5rem;color:#5b5b5b}.ls-workflow-step.selected{-webkit-box-shadow:0 .5rem .25rem rgba(0,0,0,.3);box-shadow:0 .5rem .25rem rgba(0,0,0,.3)}.ls-workflow-step .step-icn{width:1.7rem;height:1.7rem}.ls-workflow-endpoint-content{margin:auto;text-align:center}.ls-workflow-endpoint-content .ls-step-bounds-txt{color:var(--primary);font-weight:700}.ls-workflow-endpoint-content .ls-workflow-endpoint-icn{color:var(--primary)}.ls-workflow-endpoint-content.not-active .ls-step-bounds-txt,.ls-workflow-endpoint-content.not-active .ls-workflow-endpoint-icn{color:#5b5b5b}.ls-workflow-endpoint-content .ls-step-validator-list{text-align:left}.ls-actual-validator{font-weight:700}.ls-actual-validator::before{content:'\\f00c';font-family:FontAwesome;color:var(--primary);font-size:1em;position:absolute;left:.5em}.ls-rejector{font-weight:700}.ls-rejector::before{content:'\\f00d';font-family:FontAwesome;color:var(--danger);font-size:1em;position:absolute;left:.5em}.wa-comment-icon{color:var(--primary);font-size:1em;margin-right:.5em}.ls-workflow-display .ls-workflow-step{padding-left:0;padding-right:0;margin:1rem auto}.ls-workflow-display .ls-workflow-step .ls-step-validator-list{padding:1rem 1rem 1rem .5rem}.ls-workflow-display .ls-workflow-step .ls-step-validator-list.ls-workflow-instance{padding-left:2rem}.ls-workflow-display .ls-workflow-endpoint-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.ls-workflow-display .ls-workflow-endpoint-content .ls-step-bounds-txt{margin-left:.5rem}.ls-workflow-display .ls-step-top-line{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;padding-left:.5rem}.ls-workflow-display .ls-step-top-line .step-name{-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:.7rem}.ls-workflow-display .ls-display-step-separator{width:100%;border-bottom:1px solid #d3d3d3}.ls-workflow-display .ls-workflow-display-step-container{position:relative}.ls-workflow-display .ls-active-step .ls-step-top-line{background-color:var(--primary);color:#fff;margin:0}.ls-workflow-display .ls-active-step .ls-step-top-line .step-icn{color:#fff}.ls-workflow-display .ls-active-step::before{content:'\\f061';font-family:FontAwesome;color:var(--primary);font-size:2em;position:absolute;left:-1em}.ls-workflow-display .ls-active-step.end-step::before{font-size:1.2em}.ls-workflow-end{position:relative}"]
                }] }
    ];
    /** @nocollapse */
    LsWorkflowModelViewerComponent.ctorParameters = function () { return []; };
    LsWorkflowModelViewerComponent.propDecorators = {
        passedStepTemplateRef: [{ type: ContentChild, args: ['passedStepContent',] }],
        pendingStepTemplateRef: [{ type: ContentChild, args: ['pendingStepContent',] }],
        circuit: [{ type: Input }],
        activeStep: [{ type: Input }],
        messages: [{ type: Input }],
        getStepIconClassFct: [{ type: Input }],
        getStepTooltipFct: [{ type: Input }],
        getCircuitEndAdditionalClassesFct: [{ type: Input }],
        isInstance: [{ type: Input }]
    };
    return LsWorkflowModelViewerComponent;
}());
export { LsWorkflowModelViewerComponent };
if (false) {
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.passedStepTemplateRef;
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.pendingStepTemplateRef;
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.circuit;
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.activeStep;
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.messages;
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.getStepIconClassFct;
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.getStepTooltipFct;
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.getCircuitEndAdditionalClassesFct;
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.isInstance;
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.isOver;
    /** @type {?} */
    LsWorkflowModelViewerComponent.prototype.isRejected;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHMtd29ya2Zsb3ctbW9kZWwtdmlld2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BsaWJyaWNpZWwvbHMtY29tcG9zYW50cy93b3JrZmxvd3MvIiwic291cmNlcyI6WyJ3b3JrZmxvd3MvbHMtd29ya2Zsb3ctbW9kZWwtdmlld2VyL2xzLXdvcmtmbG93LW1vZGVsLXZpZXdlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQXFCLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvRixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFHNUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBRXBFO0lBdUJFLHFDQUFxQztJQUVyQztRQU5TLGVBQVUsR0FBRyxLQUFLLENBQUM7UUFDNUIsV0FBTSxHQUFHLEtBQUssQ0FBQztRQUNmLGVBQVUsR0FBRyxLQUFLLENBQUM7SUFLbkIsQ0FBQzs7OztJQUVELGlEQUFROzs7SUFBUjtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2pCLE9BQU8sQ0FBQyxLQUFLLENBQUMsNEJBQTRCLENBQUMsQ0FBQztZQUM1QyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksYUFBYSxFQUFFLENBQUM7U0FDcEM7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNsQixNQUFNLElBQUksS0FBSyxDQUFDLDJEQUEyRCxDQUFDLENBQUM7U0FDOUU7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFO1lBQzdCLE1BQU0sSUFBSSxLQUFLLENBQUMsNERBQTRELENBQUMsQ0FBQztTQUMvRTtRQUVELElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDM0IsTUFBTSxJQUFJLEtBQUssQ0FBQywwREFBMEQsQ0FBQyxDQUFDO1NBQzdFO0lBQ0gsQ0FBQzs7OztJQUVELG9EQUFXOzs7SUFBWDtRQUNFLE9BQU8sQ0FBQyxLQUFLLENBQUMsMENBQTBDLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDaEUsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLE9BQU8sQ0FBQyxLQUFLLENBQUMsa0VBQWtFLENBQUMsQ0FBQzs7Z0JBQzVFLFFBQVEsR0FBRyxtQkFBQSxJQUFJLENBQUMsT0FBTyxFQUFvQjtZQUNqRCxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUM7WUFDMUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO1lBQzlCLElBQUksQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQztTQUNyQztJQUNILENBQUM7Ozs7O0lBRUQseURBQWdCOzs7O0lBQWhCLFVBQWlCLElBQWU7UUFDOUIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDeEMsQ0FBQzs7Ozs7SUFFRCx1REFBYzs7OztJQUFkLFVBQWUsSUFBZTtRQUM1QixPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QyxDQUFDOzs7OztJQUVELHFEQUFZOzs7O0lBQVosVUFBYSxPQUFlO1FBQzFCLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxPQUFPLEtBQUssSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6RSxDQUFDOzs7OztJQUVELGlEQUFROzs7O0lBQVIsVUFBUyxJQUFrQjtRQUN6QixPQUFPLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUMxRyxDQUFDOzs7Ozs7SUFFRCwwREFBaUI7Ozs7O0lBQWpCLFVBQWtCLElBQWtCLEVBQUUsU0FBd0I7UUFDNUQsT0FBTyxJQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJOzs7O1FBQUMsVUFBQyxJQUFJLElBQUssT0FBQSxJQUFJLENBQUMsRUFBRSxLQUFLLFNBQVMsQ0FBQyxFQUFFLEVBQXhCLENBQXdCLEVBQUMsQ0FBQyxDQUFDO0lBQ3hGLENBQUM7Ozs7SUFFRCxzREFBYTs7O0lBQWI7UUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pDLENBQUM7Ozs7SUFFRCx1RUFBOEI7OztJQUE5QjtRQUVFLElBQUksSUFBSSxDQUFDLGlDQUFpQyxFQUFFO1lBQzFDLE9BQU8sSUFBSSxDQUFDLGlDQUFpQyxFQUFFLENBQUM7U0FDakQ7UUFFRCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7Ozs7OztJQUVELDREQUFtQjs7Ozs7SUFBbkIsVUFBb0IsSUFBa0IsRUFBRSxTQUF3QjtRQUM5RCxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLEVBQUU7WUFDM0MsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLFNBQVMsQ0FBQyxRQUFRLEVBQUU7Z0JBQ3JDLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQzthQUM3QztpQkFBTTtnQkFDTCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsdUJBQXVCLENBQUM7YUFDOUM7U0FDRjtRQUNELE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQzs7Z0JBcEdGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsMEJBQTBCO29CQUNwQyx5MkVBQXdEOztpQkFFekQ7Ozs7O3dDQUlFLFlBQVksU0FBQyxtQkFBbUI7eUNBQ2hDLFlBQVksU0FBQyxvQkFBb0I7MEJBRWpDLEtBQUs7NkJBQ0wsS0FBSzsyQkFDTCxLQUFLO3NDQUVMLEtBQUs7b0NBQ0wsS0FBSztvREFDTCxLQUFLOzZCQUVMLEtBQUs7O0lBbUZSLHFDQUFDO0NBQUEsQUF0R0QsSUFzR0M7U0FqR1ksOEJBQThCOzs7SUFHekMsK0RBQTJFOztJQUMzRSxnRUFBNkU7O0lBRTdFLGlEQUFtRDs7SUFDbkQsb0RBQTRCOztJQUM1QixrREFBdUI7O0lBRXZCLDZEQUEwRDs7SUFDMUQsMkRBQXdEOztJQUN4RCwyRUFBOEQ7O0lBRTlELG9EQUE0Qjs7SUFDNUIsZ0RBQWU7O0lBQ2Ysb0RBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBDb250ZW50Q2hpbGQsIElucHV0LCBPbkNoYW5nZXMsIE9uSW5pdCwgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN0ZXBJbnN0YW5jZSB9IGZyb20gJy4uLy4uL3NoYXJlZC9tb2RlbC93b3JrZmxvd3Mvc3RlcC1pbnN0YW5jZSc7XG5pbXBvcnQgeyBXb3JrZmxvd0FjdG9yIH0gZnJvbSAnLi4vLi4vc2hhcmVkL21vZGVsL3dvcmtmbG93cy93b3JrZmxvdy1hY3Rvcic7XG5pbXBvcnQgeyBXb3JrZmxvd01vZGVsIH0gZnJvbSAnLi4vLi4vc2hhcmVkL21vZGVsL3dvcmtmbG93cy93b3JrZmxvdy1tb2RlbCc7XG5pbXBvcnQgeyBTdGVwTW9kZWwgfSBmcm9tICcuLi8uLi9zaGFyZWQvbW9kZWwvd29ya2Zsb3dzL3N0ZXAtbW9kZWwnO1xuaW1wb3J0IHsgV29ya2Zsb3dJbnN0YW5jZSB9IGZyb20gJy4uLy4uL3NoYXJlZC9tb2RlbC93b3JrZmxvd3Mvd29ya2Zsb3ctaW5zdGFuY2UnO1xuaW1wb3J0IHsgU3RlcFN0YXRlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL21vZGVsL3dvcmtmbG93cy9zdGVwLXN0YXRlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbHMtd29ya2Zsb3ctbW9kZWwtdmlld2VyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2xzLXdvcmtmbG93LW1vZGVsLXZpZXdlci5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2xzLXdvcmtmbG93LW1vZGVsLXZpZXdlci5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIExzV29ya2Zsb3dNb2RlbFZpZXdlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcblxuXG4gIEBDb250ZW50Q2hpbGQoJ3Bhc3NlZFN0ZXBDb250ZW50JykgcGFzc2VkU3RlcFRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxhbnk+O1xuICBAQ29udGVudENoaWxkKCdwZW5kaW5nU3RlcENvbnRlbnQnKSBwZW5kaW5nU3RlcFRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxhbnk+O1xuXG4gIEBJbnB1dCgpIGNpcmN1aXQ6IFdvcmtmbG93TW9kZWwgfCBXb3JrZmxvd0luc3RhbmNlO1xuICBASW5wdXQoKSBhY3RpdmVTdGVwOiBudW1iZXI7XG4gIEBJbnB1dCgpIG1lc3NhZ2VzOiBhbnk7XG5cbiAgQElucHV0KCkgZ2V0U3RlcEljb25DbGFzc0ZjdDogKHN0ZXA6IFN0ZXBNb2RlbCkgPT4gc3RyaW5nO1xuICBASW5wdXQoKSBnZXRTdGVwVG9vbHRpcEZjdDogKHN0ZXA6IFN0ZXBNb2RlbCkgPT4gc3RyaW5nO1xuICBASW5wdXQoKSBnZXRDaXJjdWl0RW5kQWRkaXRpb25hbENsYXNzZXNGY3Q6ICgpID0+IHN0cmluZyB8IFtdO1xuXG4gIEBJbnB1dCgpIGlzSW5zdGFuY2UgPSBmYWxzZTtcbiAgaXNPdmVyID0gZmFsc2U7XG4gIGlzUmVqZWN0ZWQgPSBmYWxzZTtcblxuICAvLyBtZXNzYWdlcyA9IENpcmN1aXREaXNwbGF5TWVzc2FnZXM7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuY2lyY3VpdCkge1xuICAgICAgY29uc29sZS5lcnJvcignTWlzc2luZyBpbnB1dCBjaXJjdWl0IGRhdGEnKTtcbiAgICAgIHRoaXMuY2lyY3VpdCA9IG5ldyBXb3JrZmxvd01vZGVsKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbG9jYWxpc2VkIG1lc3NhZ2VzIGZvciBMc1dvcmtmbG93Vmlld2VyQ29tcG9uZW50IScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5nZXRTdGVwSWNvbkNsYXNzRmN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2V0U3RlcEljb25DbGFzc0ZjdCBmb3IgTHNXb3JrZmxvd1ZpZXdlckNvbXBvbmVudCEnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZ2V0U3RlcFRvb2x0aXBGY3QpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnZXRTdGVwVG9vbHRpcEZjdCBmb3IgTHNXb3JrZmxvd1ZpZXdlckNvbXBvbmVudCEnKTtcbiAgICB9XG4gIH1cblxuICBuZ09uQ2hhbmdlcygpIHtcbiAgICBjb25zb2xlLmRlYnVnKCdMc1dvcmtmbG93Vmlld2VyQ29tcG9uZW50OjpuZ09uQ2hhbmdlcywgJywgdGhpcyk7XG4gICAgaWYgKHRoaXMuaXNJbnN0YW5jZSkge1xuICAgICAgY29uc29sZS5kZWJ1ZygnTHNXb3JrZmxvd1ZpZXdlckNvbXBvbmVudDo6bmdPbkNoYW5nZXMgLSBjaXJjdWl0IGlzIGFuIGluc3RhbmNlICcpO1xuICAgICAgY29uc3Qgd29ya2Zsb3cgPSB0aGlzLmNpcmN1aXQgYXMgV29ya2Zsb3dJbnN0YW5jZTtcbiAgICAgIHRoaXMuYWN0aXZlU3RlcCA9IHdvcmtmbG93LmN1cnJlbnRTdGVwSWR4O1xuICAgICAgdGhpcy5pc092ZXIgPSB3b3JrZmxvdy5pc092ZXI7XG4gICAgICB0aGlzLmlzUmVqZWN0ZWQgPSB3b3JrZmxvdy5yZWplY3RlZDtcbiAgICB9XG4gIH1cblxuICBnZXRTdGVwSWNvbkNsYXNzKHN0ZXA6IFN0ZXBNb2RlbCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RlcEljb25DbGFzc0ZjdChzdGVwKTtcbiAgfVxuXG4gIGdldFN0ZXBUb29sdGlwKHN0ZXA6IFN0ZXBNb2RlbCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RlcFRvb2x0aXBGY3Qoc3RlcCk7XG4gIH1cblxuICBpc0FjdGl2ZVN0ZXAoc3RlcElkeDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLmlzUmVqZWN0ZWQgJiYgIXRoaXMuaXNPdmVyICYmIHN0ZXBJZHggPT09IHRoaXMuYWN0aXZlU3RlcDtcbiAgfVxuXG4gIGlzUGFzc2VkKHN0ZXA6IFN0ZXBJbnN0YW5jZSkge1xuICAgIHJldHVybiB0aGlzLmlzSW5zdGFuY2UgJiYgKChzdGVwLnN0YXRlID09PSBTdGVwU3RhdGUuVkFMSURBVEVEKSB8fCAoc3RlcC5zdGF0ZSA9PT0gU3RlcFN0YXRlLlJFSkVDVEVEKSk7XG4gIH1cblxuICBpc0FjdHVhbFZhbGlkYXRvcihzdGVwOiBTdGVwSW5zdGFuY2UsIHZhbGlkYXRvcjogV29ya2Zsb3dBY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmlzSW5zdGFuY2UgJiYgKHN0ZXAudmFsaWRhdGVkQnkuc29tZSgoZWxlbSkgPT4gZWxlbS5pZCA9PT0gdmFsaWRhdG9yLmlkKSk7XG4gIH1cblxuICBpc0NpcmN1aXRPdmVyKCkge1xuICAgIHJldHVybiB0aGlzLmlzT3ZlciAmJiAhdGhpcy5pc1JlamVjdGVkO1xuICB9XG5cbiAgZ2V0Q2lyY3VpdEVuZEFkZGl0aW9uYWxDbGFzc2VzKCkge1xuXG4gICAgaWYgKHRoaXMuZ2V0Q2lyY3VpdEVuZEFkZGl0aW9uYWxDbGFzc2VzRmN0KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDaXJjdWl0RW5kQWRkaXRpb25hbENsYXNzZXNGY3QoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBnZXRWYWxpZGF0b3JDbGFzc2VzKHN0ZXA6IFN0ZXBJbnN0YW5jZSwgdmFsaWRhdG9yOiBXb3JrZmxvd0FjdG9yKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5pc0FjdHVhbFZhbGlkYXRvcihzdGVwLCB2YWxpZGF0b3IpKSB7XG4gICAgICBpZiAoc3RlcC5zdGF0ZSA9PT0gU3RlcFN0YXRlLlJFSkVDVEVEKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzLlJFSkVDVEVEX0JZX0lDT05fQ0xBU1M7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlcy5WQUxJREFURURfQllfSUNPTl9DTEFTUztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbn1cbiJdfQ==