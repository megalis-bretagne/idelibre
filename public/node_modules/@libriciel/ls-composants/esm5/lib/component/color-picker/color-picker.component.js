/**
 * @fileoverview added by tsickle
 * Generated from: lib/component/color-picker/color-picker.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, EventEmitter, forwardRef, HostListener, Input, Output, Renderer2, ViewChild } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
var ColorPickerComponent = /** @class */ (function () {
    function ColorPickerComponent(renderer2, element) {
        this.renderer2 = renderer2;
        this.element = element;
        // input for hex color
        this.size = 200; // height == width
        // height == width
        this.changed = new EventEmitter();
        this.isdown = false; // mouse down on 'slider' element
        // mouse down on 'slider' element
        this.sqIsDown = false; // mouse down on 'picker' element
        // mouse down on 'picker' element
        this.isHidden = false;
        /**
         * The element make an HSV as it's much more easy to calculate with a color picker
         * H : hue
         * S : saturation
         * V : value
         */
        this.hue = 0;
        this.saturation = 0;
        this.value = 0;
        // This property is used to calculate 'picker' background with specific hue, we use 'hsl' with current 'hue'
        this.cssprop = 'linear-gradient(to top, #000000, rgba(255,255,255,0)), linear-gradient(to right, #ffffff , hsl(%hue%, 100%, 50%))';
        /**
         * ***
         * ngModel required functions
         */
        this.onChange = (/**
         * @return {?}
         */
        function () {
            // tslint:disable-next-line:semicolon
        });
        this.onTouched = (/**
         * @return {?}
         */
        function () {
            // tslint:disable-next-line:semicolon
        });
    }
    Object.defineProperty(ColorPickerComponent.prototype, "color", {
        /*******
         * Define color getter and setter
         */
        get: 
        // Private color, as we need setter and getter to listen to change
        /**
         * ****
         * Define color getter and setter
         * @return {?}
         */
        function () {
            return this._color;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.defineColor(value);
        },
        enumerable: true,
        configurable: true
    });
    /*******
     * Define 'id' of input element and remove id of current element
     */
    /**
     * ****
     * Define 'id' of input element and remove id of current element
     * @return {?}
     */
    ColorPickerComponent.prototype.ngAfterViewInit = /**
     * ****
     * Define 'id' of input element and remove id of current element
     * @return {?}
     */
    function () {
        /** @type {?} */
        var id = this.element.nativeElement.getAttribute('id');
        this.renderer2.removeAttribute(this.element.nativeElement, 'id');
        this.renderer2.setAttribute(this.input.nativeElement, 'id', id);
    };
    /**
     * Update color of 'slider' and 'picker' on 'hue' change
     */
    /**
     * Update color of 'slider' and 'picker' on 'hue' change
     * @return {?}
     */
    ColorPickerComponent.prototype.changePickerColor = /**
     * Update color of 'slider' and 'picker' on 'hue' change
     * @return {?}
     */
    function () {
        this.renderer2.setStyle(this.slider.nativeElement, 'background', 'hsl(%hue%, 100%, 50%)'.replace('%hue%', '' + this.hue));
        this.renderer2.setStyle(this.picker.nativeElement, 'background', this.cssprop.replace('%hue%', '' + this.hue));
    };
    /**
     * Update _color property on change, and emit onChange event for ngModel
     */
    /**
     * Update _color property on change, and emit onChange event for ngModel
     * @return {?}
     */
    ColorPickerComponent.prototype.pickerChange = /**
     * Update _color property on change, and emit onChange event for ngModel
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rgb = this.hsvToRgb();
        /** @type {?} */
        var hex = '#' + ('00' + rgb[0].toString(16).toUpperCase()).slice(-2) +
            ('00' + rgb[1].toString(16).toUpperCase()).slice(-2) +
            ('00' + rgb[2].toString(16).toUpperCase()).slice(-2);
        this._color = hex;
        this.onChange(hex);
    };
    /**
     * Set 'slider' position with 'hue' value
     */
    /**
     * Set 'slider' position with 'hue' value
     * @return {?}
     */
    ColorPickerComponent.prototype.huePosition = /**
     * Set 'slider' position with 'hue' value
     * @return {?}
     */
    function () {
        /** @type {?} */
        var px = Math.round(Math.max(this.hue * (this.size - 24) / 360, 0));
        this.renderer2.setStyle(this.slider.nativeElement, 'left', px - 12 + 'px');
        this.changePickerColor();
        this.pickerChange();
    };
    /**
     * Set 'pointer' position with 'saturation' and 'value' values
     */
    /**
     * Set 'pointer' position with 'saturation' and 'value' values
     * @return {?}
     */
    ColorPickerComponent.prototype.sqPosition = /**
     * Set 'pointer' position with 'saturation' and 'value' values
     * @return {?}
     */
    function () {
        /** @type {?} */
        var px = Math.round(Math.max(this.saturation * this.size / 100, 0));
        this.renderer2.setStyle(this.pointer.nativeElement, 'left', px - 12 + 'px');
        /** @type {?} */
        var py = Math.round(Math.max((100 - this.value) * this.size / 100, 0));
        this.renderer2.setStyle(this.pointer.nativeElement, 'top', py - 12 + 'px');
        this.pickerChange();
    };
    /********
     * When we change 'hue' with mouse click, juste go to the position and emit color change
     * @param event the mouse click event
     */
    /**
     * *****
     * When we change 'hue' with mouse click, juste go to the position and emit color change
     * @param {?} event the mouse click event
     * @return {?}
     */
    ColorPickerComponent.prototype.changeHue = /**
     * *****
     * When we change 'hue' with mouse click, juste go to the position and emit color change
     * @param {?} event the mouse click event
     * @return {?}
     */
    function (event) {
        this.hue = Math.round(event.offsetX * 360 / event.target.clientWidth);
        this.huePosition();
        this.changed.emit(this._color);
    };
    /**
     * @param {?} color
     * @return {?}
     */
    ColorPickerComponent.prototype.defineColor = /**
     * @param {?} color
     * @return {?}
     */
    function (color) {
        if (color && color.length === 7) {
            this._color = color;
            /** @type {?} */
            var R = parseInt(this._color.substring(1, 3), 16);
            /** @type {?} */
            var G = parseInt(this._color.substring(3, 5), 16);
            /** @type {?} */
            var B = parseInt(this._color.substring(5), 16);
            this.rgbToHsv(R, G, B);
            this.huePosition();
            this.sqPosition();
            this.changed.emit(this._color);
        }
    };
    /****
     * Events handlers : mouseup, mousemove and mousedown
     */
    /**
     * *
     * Events handlers : mouseup, mousemove and mousedown
     * @return {?}
     */
    ColorPickerComponent.prototype.mouseUp = /**
     * *
     * Events handlers : mouseup, mousemove and mousedown
     * @return {?}
     */
    function () {
        if (this.isdown || this.sqIsDown) {
            // Trigger event only if it was clicked
            this.changed.emit(this._color);
        }
        this.isdown = false;
        this.sqIsDown = false;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ColorPickerComponent.prototype.mouseMove = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.isdown) {
            /** @type {?} */
            var rect = this.slider.nativeElement.parentElement.getBoundingClientRect();
            /** @type {?} */
            var position = event.clientX - rect.left;
            this.hue = Math.round(position * 360 / rect.width);
            if (this.hue > 360) {
                this.hue = 360;
            }
            else if (this.hue < 0) {
                this.hue = 0;
            }
            this.huePosition();
        }
        if (this.sqIsDown) {
            /** @type {?} */
            var rect = this.pointer.nativeElement.parentElement.getBoundingClientRect();
            /** @type {?} */
            var xposition = event.clientX - rect.left;
            this.saturation = Math.round(xposition * 100 / rect.width);
            if (this.saturation > 100) {
                this.saturation = 100;
            }
            else if (this.saturation < 0) {
                this.saturation = 0;
            }
            /** @type {?} */
            var yposition = event.clientY - rect.top;
            this.value = 100 - Math.round(yposition * 100 / rect.height);
            if (this.value > 100) {
                this.value = 100;
            }
            else if (this.value < 0) {
                this.value = 0;
            }
            this.sqPosition();
        }
    };
    /**
     * @return {?}
     */
    ColorPickerComponent.prototype.huemouseDown = /**
     * @return {?}
     */
    function () {
        this.isdown = true;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ColorPickerComponent.prototype.sqmouseDown = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.sqIsDown = true;
        this.mouseMove(event);
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    ColorPickerComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    ColorPickerComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onTouched = fn;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    ColorPickerComponent.prototype.writeValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.defineColor(value);
    };
    /*********
     * Utils fonctions, convert HSV <-> RGB
     */
    /**
     * ******
     * Utils fonctions, convert HSV <-> RGB
     * @return {?}
     */
    ColorPickerComponent.prototype.hsvToRgb = /**
     * ******
     * Utils fonctions, convert HSV <-> RGB
     * @return {?}
     */
    function () {
        /** @type {?} */
        var H = this.hue;
        /** @type {?} */
        var V = this.value / 100;
        /** @type {?} */
        var S = this.saturation / 100;
        /** @type {?} */
        var C = V * S;
        /** @type {?} */
        var X = C * (1 - Math.abs((H / 60) % 2 - 1));
        /** @type {?} */
        var m = V - C;
        /** @type {?} */
        var prime = [C, 0, X];
        if (H < 60) {
            prime = [C, X, 0];
        }
        else if (H < 120) {
            prime = [X, C, 0];
        }
        else if (H < 180) {
            prime = [0, C, X];
        }
        else if (H < 240) {
            prime = [0, X, C];
        }
        else if (H < 300) {
            prime = [X, 0, C];
        }
        return [
            Math.round((prime[0] + m) * 255),
            Math.round((prime[1] + m) * 255),
            Math.round((prime[2] + m) * 255)
        ];
    };
    /**
     * @param {?} R
     * @param {?} G
     * @param {?} B
     * @return {?}
     */
    ColorPickerComponent.prototype.rgbToHsv = /**
     * @param {?} R
     * @param {?} G
     * @param {?} B
     * @return {?}
     */
    function (R, G, B) {
        /** @type {?} */
        var Rp = R / 255;
        /** @type {?} */
        var Gp = G / 255;
        /** @type {?} */
        var Bp = B / 255;
        /** @type {?} */
        var Cmax = Math.max(Rp, Gp, Bp);
        /** @type {?} */
        var Cmin = Math.min(Rp, Gp, Bp);
        /** @type {?} */
        var Delta = Cmax - Cmin;
        /** @type {?} */
        var H = 0;
        if (Delta === 0) {
            H = 0;
        }
        else if (Cmax === Rp) {
            H = 60 * ((Gp - Bp) / Delta % 6);
        }
        else if (Cmax === Gp) {
            H = 60 * ((Bp - Rp) / Delta + 2);
        }
        else if (Cmax === Bp) {
            H = 60 * ((Rp - Gp) / Delta + 4);
        }
        /** @type {?} */
        var S = 0;
        if (Cmax !== 0) {
            S = Delta / Cmax;
        }
        this.hue = H;
        this.saturation = S * 100;
        this.value = Cmax * 100;
    };
    ColorPickerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ls-color-picker',
                    template: "<div class=\"picker-container\" [style.width]=\"size + 2 + 'px'\">\n  <div #picker class=\"picker\" [style.height]=\"size + 'px'\" (mousedown)=\"sqmouseDown($event)\">\n    <div #pointer class=\"pointer\" [style.background-color]=\"color\"></div>\n  </div>\n\n  <div class=\"slider-container\">\n    <div class=\"hue\" (click)=\"changeHue($event)\"></div>\n    <div #slider class=\"slider\" [class.notclicked]=\"!isdown\" (mousedown)=\"huemouseDown()\"></div>\n  </div>\n\n  <div class=\"result-container\">\n    <span class=\"selected-color\" [style.background-color]=\"color\">\n\n    </span>\n    <input maxlength=\"7\" #input pattern=\"#[A-Fa-f0-9]{6}\" [(ngModel)]=\"color\">\n  </div>\n</div>\n",
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return ColorPickerComponent; })),
                            multi: true
                        }
                    ],
                    styles: ["*{-webkit-box-sizing:border-box;box-sizing:border-box}.picker{width:100%;height:200px;position:relative;margin-bottom:20px}.pointer{width:22px;height:22px;background-color:#000;border-radius:11px;border:2px solid #fff;position:absolute;top:0;left:0;cursor:pointer}.hue{height:8px;width:100%;border-radius:4px;background:-webkit-gradient(linear,left top,right top,from(red),color-stop(yellow),color-stop(lime),color-stop(cyan),color-stop(blue),color-stop(magenta),to(red));background:linear-gradient(to right,red,#ff0,#0f0,#0ff,#00f,#ff00ff,red)}.slider{width:24px;height:24px;background-color:#000;border-radius:12px;border:2px solid #fff;position:absolute;top:0;left:0;cursor:pointer}.slider.notclicked{-webkit-transition:left .2s;transition:left .2s}.slider-container{height:24px;margin-left:12px;margin-right:12px;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px}.selected-color{background-color:#000;display:inline-block;height:30px;width:80px;margin-right:16px;border:1px solid var(--ls-grey-200)}.picker-container{border:1px solid var(--ls-grey-200);border-bottom-left-radius:5px;border-bottom-right-radius:5px}.result-container{margin:16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.result-container input{width:80px}"]
                }] }
    ];
    /** @nocollapse */
    ColorPickerComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ElementRef }
    ]; };
    ColorPickerComponent.propDecorators = {
        picker: [{ type: ViewChild, args: ['picker',] }],
        slider: [{ type: ViewChild, args: ['slider',] }],
        pointer: [{ type: ViewChild, args: ['pointer',] }],
        input: [{ type: ViewChild, args: ['input',] }],
        size: [{ type: Input }],
        changed: [{ type: Output }],
        color: [{ type: Input }],
        mouseUp: [{ type: HostListener, args: ['document:mouseup', [],] }],
        mouseMove: [{ type: HostListener, args: ['document:mousemove', ['$event'],] }]
    };
    return ColorPickerComponent;
}());
export { ColorPickerComponent };
if (false) {
    /** @type {?} */
    ColorPickerComponent.prototype.picker;
    /** @type {?} */
    ColorPickerComponent.prototype.slider;
    /** @type {?} */
    ColorPickerComponent.prototype.pointer;
    /** @type {?} */
    ColorPickerComponent.prototype.input;
    /** @type {?} */
    ColorPickerComponent.prototype.size;
    /** @type {?} */
    ColorPickerComponent.prototype.changed;
    /** @type {?} */
    ColorPickerComponent.prototype.isdown;
    /** @type {?} */
    ColorPickerComponent.prototype.sqIsDown;
    /** @type {?} */
    ColorPickerComponent.prototype.isHidden;
    /**
     * The element make an HSV as it's much more easy to calculate with a color picker
     * H : hue
     * S : saturation
     * V : value
     * @type {?}
     */
    ColorPickerComponent.prototype.hue;
    /** @type {?} */
    ColorPickerComponent.prototype.saturation;
    /** @type {?} */
    ColorPickerComponent.prototype.value;
    /** @type {?} */
    ColorPickerComponent.prototype.cssprop;
    /**
     * @type {?}
     * @private
     */
    ColorPickerComponent.prototype._color;
    /**
     * ***
     * ngModel required functions
     * @type {?}
     */
    ColorPickerComponent.prototype.onChange;
    /** @type {?} */
    ColorPickerComponent.prototype.onTouched;
    /**
     * @type {?}
     * @private
     */
    ColorPickerComponent.prototype.renderer2;
    /**
     * @type {?}
     * @private
     */
    ColorPickerComponent.prototype.element;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sb3ItcGlja2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BsaWJyaWNpZWwvbHMtY29tcG9zYW50cy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnQvY29sb3ItcGlja2VyL2NvbG9yLXBpY2tlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBRUwsU0FBUyxFQUNULFVBQVUsRUFDVixZQUFZLEVBQ1osVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBQ0wsTUFBTSxFQUNOLFNBQVMsRUFDVCxTQUFTLEVBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUF1QixpQkFBaUIsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBRXZFO0lBMENFLDhCQUFvQixTQUFvQixFQUFVLE9BQW1CO1FBQWpELGNBQVMsR0FBVCxTQUFTLENBQVc7UUFBVSxZQUFPLEdBQVAsT0FBTyxDQUFZOztRQXZCNUQsU0FBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLGtCQUFrQjs7UUFHdkMsWUFBTyxHQUF5QixJQUFJLFlBQVksRUFBRSxDQUFDO1FBRW5ELFdBQU0sR0FBRyxLQUFLLENBQUMsQ0FBSyxpQ0FBaUM7O1FBQ3JELGFBQVEsR0FBRyxLQUFLLENBQUMsQ0FBRyxpQ0FBaUM7O1FBQ3JELGFBQVEsR0FBRyxLQUFLLENBQUM7Ozs7Ozs7UUFTakIsUUFBRyxHQUFHLENBQUMsQ0FBQztRQUNSLGVBQVUsR0FBRyxDQUFDLENBQUM7UUFDZixVQUFLLEdBQUcsQ0FBQyxDQUFDOztRQUdWLFlBQU8sR0FBRyxtSEFBbUgsQ0FBQzs7Ozs7UUFpSzlILGFBQVE7OztRQUFRO1lBQ2QscUNBQXFDO1FBQ3ZDLENBQUMsRUFBQztRQUVGLGNBQVM7OztRQUFRO1lBQ2YscUNBQXFDO1FBQ3ZDLENBQUMsRUFBQztJQXBLRixDQUFDO0lBT0Qsc0JBQUksdUNBQUs7UUFIVDs7V0FFRzs7Ozs7Ozs7UUFDSDtZQUNFLE9BQU8sSUFBSSxDQUFD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QUFVOzs7NEJBQUMsY0FBTSxPQUFBLG9CQUFvQixFQUFwQixDQUFvQixFQUFDOzRCQUNuRCxLQUFLLEVBQUUsSUFBSTt5QkFDWjtxQkFDRjs7aUJBQ0Y7Ozs7Z0JBaEJDLFNBQVM7Z0JBTlQsVUFBVTs7O3lCQXlCVCxTQUFTLFNBQUMsUUFBUTt5QkFDbEIsU0FBUyxTQUFDLFFBQVE7MEJBQ2xCLFNBQVMsU0FBQyxTQUFTO3dCQUNuQixTQUFTLFNBQUMsT0FBTzt1QkFFakIsS0FBSzswQkFFTCxNQUFNO3dCQWlDTixLQUFLOzBCQXNGTCxZQUFZLFNBQUMsa0JBQWtCLEVBQUUsRUFBRTs0QkFVbkMsWUFBWSxTQUFDLG9CQUFvQixFQUFFLENBQUMsUUFBUSxDQUFDOztJQXdJaEQsMkJBQUM7Q0FBQSxBQTlSRCxJQThSQztTQWxSWSxvQkFBb0I7OztJQUUvQixzQ0FBNEI7O0lBQzVCLHNDQUE0Qjs7SUFDNUIsdUNBQThCOztJQUM5QixxQ0FBMEI7O0lBRTFCLG9DQUFvQjs7SUFFcEIsdUNBQ21EOztJQUVuRCxzQ0FBZTs7SUFDZix3Q0FBaUI7O0lBQ2pCLHdDQUFpQjs7Ozs7Ozs7SUFTakIsbUNBQVE7O0lBQ1IsMENBQWU7O0lBQ2YscUNBQVU7O0lBR1YsdUNBQThIOzs7OztJQUs5SCxzQ0FBZTs7Ozs7O0lBNEpmLHdDQUVFOztJQUVGLHlDQUVFOzs7OztJQXJLVSx5Q0FBNEI7Ozs7O0lBQUUsdUNBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIGZvcndhcmRSZWYsXG4gIEhvc3RMaXN0ZW5lcixcbiAgSW5wdXQsXG4gIE91dHB1dCxcbiAgUmVuZGVyZXIyLFxuICBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0NvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdscy1jb2xvci1waWNrZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vY29sb3ItcGlja2VyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vY29sb3ItcGlja2VyLmNvbXBvbmVudC5zY3NzJ10sXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQ29sb3JQaWNrZXJDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9XG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIENvbG9yUGlja2VyQ29tcG9uZW50IGltcGxlbWVudHMgQ29udHJvbFZhbHVlQWNjZXNzb3IsIEFmdGVyVmlld0luaXQge1xuXG4gIEBWaWV3Q2hpbGQoJ3BpY2tlcicpIHBpY2tlcjsgICAgLy8gc3F1YXJlIHdpdGggZ3JhZGllbnRcbiAgQFZpZXdDaGlsZCgnc2xpZGVyJykgc2xpZGVyOyAgICAvLyBodWUgc2xpZGVyXG4gIEBWaWV3Q2hpbGQoJ3BvaW50ZXInKSBwb2ludGVyOyAgLy8gY29sb3IgcG9pbnRlclxuICBAVmlld0NoaWxkKCdpbnB1dCcpIGlucHV0OyAgICAgIC8vIGlucHV0IGZvciBoZXggY29sb3JcblxuICBASW5wdXQoKSBzaXplID0gMjAwOyAvLyBoZWlnaHQgPT0gd2lkdGhcblxuICBAT3V0cHV0KCkgLy8gRW1pdCBvbiAnY29sb3InIHByb3BlcnR5IGNoYW5nZWRcbiAgY2hhbmdlZDogRXZlbnRFbWl0dGVyPHN0cmluZz4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgaXNkb3duID0gZmFsc2U7ICAgICAvLyBtb3VzZSBkb3duIG9uICdzbGlkZXInIGVsZW1lbnRcbiAgc3FJc0Rvd24gPSBmYWxzZTsgICAvLyBtb3VzZSBkb3duIG9uICdwaWNrZXInIGVsZW1lbnRcbiAgaXNIaWRkZW4gPSBmYWxzZTtcblxuICAvKipcbiAgICogVGhlIGVsZW1lbnQgbWFrZSBhbiBIU1YgYXMgaXQncyBtdWNoIG1vcmUgZWFzeSB0byBjYWxjdWxhdGUgd2l0aCBhIGNvbG9yIHBpY2tlclxuICAgKiBIIDogaHVlXG4gICAqIFMgOiBzYXR1cmF0aW9uXG4gICAqIFYgOiB2YWx1ZVxuICAgKi9cblxuICBodWUgPSAwO1xuICBzYXR1cmF0aW9uID0gMDtcbiAgdmFsdWUgPSAwO1xuXG4gIC8vIFRoaXMgcHJvcGVydHkgaXMgdXNlZCB0byBjYWxjdWxhdGUgJ3BpY2tlcicgYmFja2dyb3VuZCB3aXRoIHNwZWNpZmljIGh1ZSwgd2UgdXNlICdoc2wnIHdpdGggY3VycmVudCAnaHVlJ1xuICBjc3Nwcm9wID0gJ2xpbmVhci1ncmFkaWVudCh0byB0b3AsICMwMDAwMDAsIHJnYmEoMjU1LDI1NSwyNTUsMCkpLCBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICNmZmZmZmYgLCBoc2woJWh1ZSUsIDEwMCUsIDUwJSkpJztcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlbmRlcmVyMjogUmVuZGVyZXIyLCBwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnRSZWYpIHtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbG9yOyAvLyBQcml2YXRlIGNvbG9yLCBhcyB3ZSBuZWVkIHNldHRlciBhbmQgZ2V0dGVyIHRvIGxpc3RlbiB0byBjaGFuZ2VcblxuICAvKioqKioqKlxuICAgKiBEZWZpbmUgY29sb3IgZ2V0dGVyIGFuZCBzZXR0ZXJcbiAgICovXG4gIGdldCBjb2xvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY29sb3I7XG4gIH1cblxuICBASW5wdXQoKVxuICBzZXQgY29sb3IodmFsdWUpIHtcbiAgICB0aGlzLmRlZmluZUNvbG9yKHZhbHVlKTtcbiAgfVxuXG4gIC8qKioqKioqXG4gICAqIERlZmluZSAnaWQnIG9mIGlucHV0IGVsZW1lbnQgYW5kIHJlbW92ZSBpZCBvZiBjdXJyZW50IGVsZW1lbnRcbiAgICovXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICBjb25zdCBpZCA9IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICB0aGlzLnJlbmRlcmVyMi5yZW1vdmVBdHRyaWJ1dGUodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICdpZCcpO1xuICAgIHRoaXMucmVuZGVyZXIyLnNldEF0dHJpYnV0ZSh0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQsICdpZCcsIGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgY29sb3Igb2YgJ3NsaWRlcicgYW5kICdwaWNrZXInIG9uICdodWUnIGNoYW5nZVxuICAgKi9cbiAgY2hhbmdlUGlja2VyQ29sb3IoKSB7XG4gICAgdGhpcy5yZW5kZXJlcjIuc2V0U3R5bGUodGhpcy5zbGlkZXIubmF0aXZlRWxlbWVudCwgJ2JhY2tncm91bmQnLCAnaHNsKCVodWUlLCAxMDAlLCA1MCUpJy5yZXBsYWNlKCclaHVlJScsICcnICsgdGhpcy5odWUpKTtcbiAgICB0aGlzLnJlbmRlcmVyMi5zZXRTdHlsZSh0aGlzLnBpY2tlci5uYXRpdmVFbGVtZW50LCAnYmFja2dyb3VuZCcsIHRoaXMuY3NzcHJvcC5yZXBsYWNlKCclaHVlJScsICcnICsgdGhpcy5odWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgX2NvbG9yIHByb3BlcnR5IG9uIGNoYW5nZSwgYW5kIGVtaXQgb25DaGFuZ2UgZXZlbnQgZm9yIG5nTW9kZWxcbiAgICovXG4gIHBpY2tlckNoYW5nZSgpIHtcbiAgICBjb25zdCByZ2IgPSB0aGlzLmhzdlRvUmdiKCk7XG4gICAgY29uc3QgaGV4ID0gJyMnICsgKCcwMCcgKyByZ2JbMF0udG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkpLnNsaWNlKC0yKSArXG4gICAgICAoJzAwJyArIHJnYlsxXS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKSkuc2xpY2UoLTIpICtcbiAgICAgICgnMDAnICsgcmdiWzJdLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpKS5zbGljZSgtMik7XG5cbiAgICB0aGlzLl9jb2xvciA9IGhleDtcbiAgICB0aGlzLm9uQ2hhbmdlKGhleCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0ICdzbGlkZXInIHBvc2l0aW9uIHdpdGggJ2h1ZScgdmFsdWVcbiAgICovXG4gIGh1ZVBvc2l0aW9uKCkge1xuICAgIGNvbnN0IHB4ID0gTWF0aC5yb3VuZChNYXRoLm1heCh0aGlzLmh1ZSAqICh0aGlzLnNpemUgLSAyNCkgLyAzNjAsIDApKTtcbiAgICB0aGlzLnJlbmRlcmVyMi5zZXRTdHlsZSh0aGlzLnNsaWRlci5uYXRpdmVFbGVtZW50LCAnbGVmdCcsIHB4IC0gMTIgKyAncHgnKTtcblxuICAgIHRoaXMuY2hhbmdlUGlja2VyQ29sb3IoKTtcbiAgICB0aGlzLnBpY2tlckNoYW5nZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCAncG9pbnRlcicgcG9zaXRpb24gd2l0aCAnc2F0dXJhdGlvbicgYW5kICd2YWx1ZScgdmFsdWVzXG4gICAqL1xuICBzcVBvc2l0aW9uKCkge1xuICAgIGNvbnN0IHB4ID0gTWF0aC5yb3VuZChNYXRoLm1heCh0aGlzLnNhdHVyYXRpb24gKiB0aGlzLnNpemUgLyAxMDAsIDApKTtcbiAgICB0aGlzLnJlbmRlcmVyMi5zZXRTdHlsZSh0aGlzLnBvaW50ZXIubmF0aXZlRWxlbWVudCwgJ2xlZnQnLCBweCAtIDEyICsgJ3B4Jyk7XG5cbiAgICBjb25zdCBweSA9IE1hdGgucm91bmQoTWF0aC5tYXgoKDEwMCAtIHRoaXMudmFsdWUpICogdGhpcy5zaXplIC8gMTAwLCAwKSk7XG4gICAgdGhpcy5yZW5kZXJlcjIuc2V0U3R5bGUodGhpcy5wb2ludGVyLm5hdGl2ZUVsZW1lbnQsICd0b3AnLCBweSAtIDEyICsgJ3B4Jyk7XG5cbiAgICB0aGlzLnBpY2tlckNoYW5nZSgpO1xuICB9XG5cbiAgLyoqKioqKioqXG4gICAqIFdoZW4gd2UgY2hhbmdlICdodWUnIHdpdGggbW91c2UgY2xpY2ssIGp1c3RlIGdvIHRvIHRoZSBwb3NpdGlvbiBhbmQgZW1pdCBjb2xvciBjaGFuZ2VcbiAgICogQHBhcmFtIGV2ZW50IHRoZSBtb3VzZSBjbGljayBldmVudFxuICAgKi9cbiAgY2hhbmdlSHVlKGV2ZW50KSB7XG4gICAgdGhpcy5odWUgPSBNYXRoLnJvdW5kKGV2ZW50Lm9mZnNldFggKiAzNjAgLyBldmVudC50YXJnZXQuY2xpZW50V2lkdGgpO1xuICAgIHRoaXMuaHVlUG9zaXRpb24oKTtcbiAgICB0aGlzLmNoYW5nZWQuZW1pdCh0aGlzLl9jb2xvcik7XG4gIH1cblxuICBkZWZpbmVDb2xvcihjb2xvcikge1xuICAgIGlmIChjb2xvciAmJiBjb2xvci5sZW5ndGggPT09IDcpIHtcbiAgICAgIHRoaXMuX2NvbG9yID0gY29sb3I7XG4gICAgICBjb25zdCBSID0gcGFyc2VJbnQodGhpcy5fY29sb3Iuc3Vic3RyaW5nKDEsIDMpLCAxNik7XG4gICAgICBjb25zdCBHID0gcGFyc2VJbnQodGhpcy5fY29sb3Iuc3Vic3RyaW5nKDMsIDUpLCAxNik7XG4gICAgICBjb25zdCBCID0gcGFyc2VJbnQodGhpcy5fY29sb3Iuc3Vic3RyaW5nKDUpLCAxNik7XG4gICAgICB0aGlzLnJnYlRvSHN2KFIsIEcsIEIpO1xuICAgICAgdGhpcy5odWVQb3NpdGlvbigpO1xuICAgICAgdGhpcy5zcVBvc2l0aW9uKCk7XG5cbiAgICAgIHRoaXMuY2hhbmdlZC5lbWl0KHRoaXMuX2NvbG9yKTtcbiAgICB9XG4gIH1cblxuICAvKioqKlxuICAgKiBFdmVudHMgaGFuZGxlcnMgOiBtb3VzZXVwLCBtb3VzZW1vdmUgYW5kIG1vdXNlZG93blxuICAgKi9cbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6bW91c2V1cCcsIFtdKVxuICBtb3VzZVVwKCkge1xuICAgIGlmICh0aGlzLmlzZG93biB8fCB0aGlzLnNxSXNEb3duKSB7XG4gICAgICAvLyBUcmlnZ2VyIGV2ZW50IG9ubHkgaWYgaXQgd2FzIGNsaWNrZWRcbiAgICAgIHRoaXMuY2hhbmdlZC5lbWl0KHRoaXMuX2NvbG9yKTtcbiAgICB9XG4gICAgdGhpcy5pc2Rvd24gPSBmYWxzZTtcbiAgICB0aGlzLnNxSXNEb3duID0gZmFsc2U7XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDptb3VzZW1vdmUnLCBbJyRldmVudCddKVxuICBtb3VzZU1vdmUoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5pc2Rvd24pIHtcbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLnNsaWRlci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQ7XG5cbiAgICAgIHRoaXMuaHVlID0gTWF0aC5yb3VuZChwb3NpdGlvbiAqIDM2MCAvIHJlY3Qud2lkdGgpO1xuICAgICAgaWYgKHRoaXMuaHVlID4gMzYwKSB7XG4gICAgICAgIHRoaXMuaHVlID0gMzYwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmh1ZSA8IDApIHtcbiAgICAgICAgdGhpcy5odWUgPSAwO1xuICAgICAgfVxuICAgICAgdGhpcy5odWVQb3NpdGlvbigpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zcUlzRG93bikge1xuICAgICAgY29uc3QgcmVjdCA9IHRoaXMucG9pbnRlci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCB4cG9zaXRpb24gPSBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0O1xuXG4gICAgICB0aGlzLnNhdHVyYXRpb24gPSBNYXRoLnJvdW5kKHhwb3NpdGlvbiAqIDEwMCAvIHJlY3Qud2lkdGgpO1xuICAgICAgaWYgKHRoaXMuc2F0dXJhdGlvbiA+IDEwMCkge1xuICAgICAgICB0aGlzLnNhdHVyYXRpb24gPSAxMDA7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc2F0dXJhdGlvbiA8IDApIHtcbiAgICAgICAgdGhpcy5zYXR1cmF0aW9uID0gMDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeXBvc2l0aW9uID0gZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wO1xuXG4gICAgICB0aGlzLnZhbHVlID0gMTAwIC0gTWF0aC5yb3VuZCh5cG9zaXRpb24gKiAxMDAgLyByZWN0LmhlaWdodCk7XG4gICAgICBpZiAodGhpcy52YWx1ZSA+IDEwMCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gMTAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnZhbHVlIDwgMCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gMDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zcVBvc2l0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgaHVlbW91c2VEb3duKCkge1xuICAgIHRoaXMuaXNkb3duID0gdHJ1ZTtcbiAgfVxuXG4gIHNxbW91c2VEb3duKGV2ZW50KSB7XG4gICAgdGhpcy5zcUlzRG93biA9IHRydWU7XG4gICAgdGhpcy5tb3VzZU1vdmUoZXZlbnQpO1xuICB9XG5cblxuICAvKioqKioqXG4gICAqIG5nTW9kZWwgcmVxdWlyZWQgZnVuY3Rpb25zXG4gICAqL1xuICBvbkNoYW5nZTogYW55ID0gKCkgPT4ge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpzZW1pY29sb25cbiAgfTtcblxuICBvblRvdWNoZWQ6IGFueSA9ICgpID0+IHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6c2VtaWNvbG9uXG4gIH07XG5cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbikge1xuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XG4gICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgfVxuXG4gIHdyaXRlVmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLmRlZmluZUNvbG9yKHZhbHVlKTtcbiAgfVxuXG5cbiAgLyoqKioqKioqKlxuICAgKiBVdGlscyBmb25jdGlvbnMsIGNvbnZlcnQgSFNWIDwtPiBSR0JcbiAgICovXG4gIGhzdlRvUmdiKCkge1xuICAgIGNvbnN0IEggPSB0aGlzLmh1ZTtcbiAgICBjb25zdCBWID0gdGhpcy52YWx1ZSAvIDEwMDtcbiAgICBjb25zdCBTID0gdGhpcy5zYXR1cmF0aW9uIC8gMTAwO1xuXG4gICAgY29uc3QgQyA9IFYgKiBTO1xuICAgIGNvbnN0IFggPSBDICogKDEgLSBNYXRoLmFicygoSCAvIDYwKSAlIDIgLSAxKSk7XG4gICAgY29uc3QgbSA9IFYgLSBDO1xuXG4gICAgbGV0IHByaW1lID0gW0MsIDAsIFhdO1xuXG4gICAgaWYgKEggPCA2MCkge1xuICAgICAgcHJpbWUgPSBbQywgWCwgMF07XG4gICAgfSBlbHNlIGlmIChIIDwgMTIwKSB7XG4gICAgICBwcmltZSA9IFtYLCBDLCAwXTtcbiAgICB9IGVsc2UgaWYgKEggPCAxODApIHtcbiAgICAgIHByaW1lID0gWzAsIEMsIFhdO1xuICAgIH0gZWxzZSBpZiAoSCA8IDI0MCkge1xuICAgICAgcHJpbWUgPSBbMCwgWCwgQ107XG4gICAgfSBlbHNlIGlmIChIIDwgMzAwKSB7XG4gICAgICBwcmltZSA9IFtYLCAwLCBDXTtcbiAgICB9XG5cbiAgICByZXR1cm4gW1xuICAgICAgTWF0aC5yb3VuZCgocHJpbWVbMF0gKyBtKSAqIDI1NSksXG4gICAgICBNYXRoLnJvdW5kKChwcmltZVsxXSArIG0pICogMjU1KSxcbiAgICAgIE1hdGgucm91bmQoKHByaW1lWzJdICsgbSkgKiAyNTUpXG4gICAgXTtcbiAgfVxuXG4gIHJnYlRvSHN2KFIsIEcsIEIpIHtcbiAgICBjb25zdCBScCA9IFIgLyAyNTU7XG4gICAgY29uc3QgR3AgPSBHIC8gMjU1O1xuICAgIGNvbnN0IEJwID0gQiAvIDI1NTtcblxuICAgIGNvbnN0IENtYXggPSBNYXRoLm1heChScCwgR3AsIEJwKTtcbiAgICBjb25zdCBDbWluID0gTWF0aC5taW4oUnAsIEdwLCBCcCk7XG5cbiAgICBjb25zdCBEZWx0YSA9IENtYXggLSBDbWluO1xuICAgIGxldCBIID0gMDtcblxuICAgIGlmIChEZWx0YSA9PT0gMCkge1xuICAgICAgSCA9IDA7XG4gICAgfSBlbHNlIGlmIChDbWF4ID09PSBScCkge1xuICAgICAgSCA9IDYwICogKChHcCAtIEJwKSAvIERlbHRhICUgNik7XG4gICAgfSBlbHNlIGlmIChDbWF4ID09PSBHcCkge1xuICAgICAgSCA9IDYwICogKChCcCAtIFJwKSAvIERlbHRhICsgMik7XG4gICAgfSBlbHNlIGlmIChDbWF4ID09PSBCcCkge1xuICAgICAgSCA9IDYwICogKChScCAtIEdwKSAvIERlbHRhICsgNCk7XG4gICAgfVxuXG4gICAgbGV0IFMgPSAwO1xuXG4gICAgaWYgKENtYXggIT09IDApIHtcbiAgICAgIFMgPSBEZWx0YSAvIENtYXg7XG4gICAgfVxuXG4gICAgdGhpcy5odWUgPSBIO1xuICAgIHRoaXMuc2F0dXJhdGlvbiA9IFMgKiAxMDA7XG4gICAgdGhpcy52YWx1ZSA9IENtYXggKiAxMDA7XG4gIH1cbn1cbiJdfQ==