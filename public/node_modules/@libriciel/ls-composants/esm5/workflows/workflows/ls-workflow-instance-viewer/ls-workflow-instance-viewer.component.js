/**
 * @fileoverview added by tsickle
 * Generated from: workflows/ls-workflow-instance-viewer/ls-workflow-instance-viewer.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChild, Input, TemplateRef } from '@angular/core';
import { WorkflowInstance } from '../../shared/model/workflows/workflow-instance';
import { StepState } from '../../shared/model/workflows/step-state';
import { WorkflowInstanceLocalizedMessages, WorkflowInstanceOptions } from "../../shared/model/workflows/workflow-instance-option";
var LsWorkflowInstanceViewerComponent = /** @class */ (function () {
    function LsWorkflowInstanceViewerComponent() {
        this.messages = {
            FIRST_STEP_TXT: 'Start',
            LAST_STEP_TXT: 'End'
        };
        this.reducedMode = true;
        this.isOver = false;
        this.isRejected = false;
        this._options = {
            startIconClass: 'far fa-flag',
            endIconClass: 'fas fa-flag-checkered',
            validatedIconClass: 'fas fa-check',
            rejectedIconClass: 'fas fa-times',
            hideStart: false
        };
    }
    Object.defineProperty(LsWorkflowInstanceViewerComponent.prototype, "options", {
        get: /**
         * @return {?}
         */
        function () {
            return this._options;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._options = Object.assign(this._options, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LsWorkflowInstanceViewerComponent.prototype, "localizedMessages", {
        get: /**
         * @return {?}
         */
        function () {
            return this.messages;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.messages = Object.assign(this.messages, value);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        console.warn('instanciating ls workflow instance viewer!');
        if (!this.workflowData) {
            console.error('Missing input circuit data');
            this.workflowData = new WorkflowInstance();
        }
        if (!this.messages) {
            throw new Error('Missing localised messages for LsWorkflowViewerComponent!');
        }
        if (!this.getStepIconClassFct) {
            throw new Error('Missing getStepIconClassFct for LsWorkflowViewerComponent!');
        }
        if (!this.getStepTooltipFct) {
            throw new Error('Missing getStepTooltipFct for LsWorkflowViewerComponent!');
        }
    };
    /**
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.ngOnChanges = /**
     * @return {?}
     */
    function () {
        console.debug('LsWorkflowViewerComponent::ngOnChanges, ', this);
        this.activeStep = this.workflowData.currentStepIdx;
        this.isOver = this.workflowData.isOver;
        this.isRejected = this.workflowData.rejected;
    };
    /**
     * @param {?} step
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.getStepIconClass = /**
     * @param {?} step
     * @return {?}
     */
    function (step) {
        return this.getStepIconClassFct(step);
    };
    /**
     * @param {?} step
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.getStepTooltip = /**
     * @param {?} step
     * @return {?}
     */
    function (step) {
        return this.getStepTooltipFct(step);
    };
    /**
     * @param {?} stepIdx
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.isActiveStep = /**
     * @param {?} stepIdx
     * @return {?}
     */
    function (stepIdx) {
        return !this.isRejected && !this.isOver && stepIdx === this.activeStep;
    };
    /**
     * @param {?} step
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.isPassed = /**
     * @param {?} step
     * @return {?}
     */
    function (step) {
        return (step.state === StepState.VALIDATED) || (step.state === StepState.REJECTED);
    };
    /**
     * @param {?} step
     * @param {?} validator
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.isActualValidator = /**
     * @param {?} step
     * @param {?} validator
     * @return {?}
     */
    function (step, validator) {
        return step.validatedBy.some((/**
         * @param {?} elem
         * @return {?}
         */
        function (elem) { return elem.id === validator.id; }));
    };
    /**
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.isCircuitOver = /**
     * @return {?}
     */
    function () {
        return this.isOver && !this.isRejected;
    };
    /**
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.getCircuitEndAdditionalClasses = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var classes = [];
        if (this.getCircuitEndAdditionalClassesFct) {
            classes.push(this.getCircuitEndAdditionalClassesFct());
        }
        else {
            classes.push(this._options.additionalFinalEndpointClasses || '');
        }
        if (this.reducedMode) {
            classes.push('reduced-end-step');
        }
        return classes;
    };
    /**
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.getAdditionalValidatorListClasses = /**
     * @return {?}
     */
    function () {
        //wa-circuit-instance
    };
    /**
     * @param {?} step
     * @param {?} stepIdx
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.getStepAdditionalClasses = /**
     * @param {?} step
     * @param {?} stepIdx
     * @return {?}
     */
    function (step, stepIdx) {
        // this.isActiveStep(stepIdx) ? 'wa-active-step wa-white-icn' : ''
        /** @type {?} */
        var classes = [];
        if (this.isActiveStep(stepIdx)) {
            classes.push('ls-active-step ls-white-icn');
        }
        if (this.reducedMode) {
            classes.push('ls-reduced-step');
        }
        if (!this.reducedMode) {
            if (step.state === StepState.SKIPPED) {
                classes.push('wa-circuit-skipped-step');
            }
        }
        if (step.state === StepState.VALIDATED) {
            classes.push('ls-validated-step');
        }
        return classes;
    };
    /**
     * @param {?} step
     * @param {?} validator
     * @return {?}
     */
    LsWorkflowInstanceViewerComponent.prototype.getValidatorClasses = /**
     * @param {?} step
     * @param {?} validator
     * @return {?}
     */
    function (step, validator) {
        if (this.isActualValidator(step, validator)) {
            if (step.state === StepState.REJECTED) {
                return this.options.rejectedIconClass;
            }
            else {
                return this.options.validatedIconClass;
            }
        }
        return '';
    };
    LsWorkflowInstanceViewerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ls-workflow-instance-viewer',
                    template: "<div class=\"ls-workflow-display\">\n  <div class=\"ls-workflow-canevas\">\n    <div class=\"circuit-start\">\n      <div *ngIf=\"!options.hideStart\" class=\"ls-workflow-endpoint-content\">\n        <span class=\"ls-workflow-endpoint-icn fa fa fa-2x\" [ngClass]=\"options.startIconClass\"></span>\n        <span class=\"ls-step-bounds-txt\" [innerText]=\"messages.FIRST_STEP_TXT\"></span>\n      </div>\n    </div>\n    <div class=\"steps-container\">\n      <div *ngFor=\"let step of workflowData.steps; index as i\">\n        <div class=\"ls-workflow-display-step-container\">\n          <div class=\"ls-workflow-step\" [ngClass]=\"getStepAdditionalClasses(step, i)\">\n            <div class=\"ls-step-top-line\">\n              <div class=\"step-number\">{{i + 1}}.</div>\n              <div class=\"step-name\">{{step.name}}</div>\n              <div [ngClass]=\"getStepIconClass(step)\" class=\"step-icn fa\" ngbTooltip=\"{{getStepTooltip(step)}}\"></div>\n            </div>\n            <div class=\"ls-display-step-separator\"></div>\n            <div class=\"ls-step-validator-list\" [ngClass]=\"getAdditionalValidatorListClasses\">\n              <ng-container *ngIf=\"isPassed(step)\">\n                <div *ngFor=\"let validator of step.validators\">\n                  <ng-template\n                    [ngTemplateOutlet]=\"passedStepTemplateRef\"\n                    [ngTemplateOutletContext]=\"{step: step, validator: validator}\">\n                  </ng-template>\n                </div>\n              </ng-container>\n              <ng-container *ngIf=\" ! isPassed(step)\">\n                <div *ngFor=\"let validator of step.validators\" class=\"ls-step-validator\">\n                  <ng-template\n                    [ngTemplateOutlet]=\"pendingStepTemplateRef\"\n                    [ngTemplateOutletContext]=\"{step: step, validator: validator}\">\n                  </ng-template>\n                </div>\n              </ng-container>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"ls-workflow-end\" [ngClass]=\"getCircuitEndAdditionalClasses()\">\n      <div class=\"ls-workflow-endpoint-content\">\n        <span class=\"ls-workflow-endpoint-icn fa fa-2x\" [ngClass]=\"options.endIconClass\"></span>\n        <span class=\"ls-step-bounds-txt\" [innerText]=\"messages.LAST_STEP_TXT\"></span>\n      </div>\n    </div>\n  </div>\n</div>\n",
                    styles: ["body{background-color:var(--ls-grey-50)}.active-btn{color:#42a1e8}.ls-workflow-canevas{-ms-grid-column:1;grid-column:1;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.ls-workflow-step{background-color:#fff;-webkit-box-shadow:0 0 .25rem rgba(0,0,0,.15);box-shadow:0 0 .25rem rgba(0,0,0,.15);border:none;width:var(--ls-workflow-step-width,20rem);min-height:6rem}.ls-workflow-step .ls-step-top-line{padding:.5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:700}.ls-workflow-step .ls-display-step-separator{width:100%;border-bottom:1px solid #d3d3d3}.ls-workflow-step .ls-step-validator-list{padding:.5rem .5rem .5rem 1.5rem;color:#5b5b5b}.ls-workflow-step.selected{-webkit-box-shadow:0 .5rem .25rem rgba(0,0,0,.3);box-shadow:0 .5rem .25rem rgba(0,0,0,.3)}.ls-workflow-step .step-icn{width:1.7rem;height:1.7rem}.ls-workflow-endpoint-content{margin:auto;text-align:center}.ls-workflow-endpoint-content .ls-step-bounds-txt{color:var(--primary);font-weight:700}.ls-workflow-endpoint-content .ls-workflow-endpoint-icn{color:var(--primary)}.ls-workflow-endpoint-content.not-active .ls-step-bounds-txt,.ls-workflow-endpoint-content.not-active .ls-workflow-endpoint-icn{color:#5b5b5b}.ls-workflow-endpoint-content .ls-step-validator-list{text-align:left}.ls-actual-validator{font-weight:700}.ls-actual-validator::before{content:'\\f00c';font-family:var(--ls-font-awesome-family, \"Font Awesome 5 Free\");color:var(--primary);font-size:1em;position:absolute;left:.5em}.ls-rejector{font-weight:700}.ls-rejector::before{content:'\\f00d';font-family:var(--ls-font-awesome-family, \"Font Awesome 5 Free\");color:var(--danger);font-size:1em;position:absolute;left:.5em}.wa-comment-icon{color:var(--primary);font-size:1em;margin-right:.5em}.ls-workflow-display .ls-workflow-step{padding-left:0;padding-right:0;margin:1rem auto}.ls-workflow-display .ls-workflow-step .ls-step-validator-list{padding:1rem 1rem 1rem .5rem}.ls-workflow-display .ls-workflow-step .ls-step-validator-list.ls-workflow-instance{padding-left:2rem}.ls-workflow-display .ls-workflow-step.ls-reduced-step{-webkit-box-shadow:none;box-shadow:none;border:none;background-color:rgba(0,0,0,0);width:var(--ls-workflow-reduced-step-width,16rem);min-height:unset;display:-ms-grid;display:grid;-ms-grid-columns:(1fr)[12];grid-template-columns:repeat(12,1fr);-ms-grid-rows:2em auto;grid-template-rows:2em auto;grid-row-gap:.5em}.ls-workflow-display .ls-workflow-step.ls-reduced-step .ls-step-top-line{grid-column:1/-1;-ms-grid-row:1;grid-row:1;display:-ms-grid;display:grid;-ms-grid-columns:1fr 2fr 9fr;grid-template-columns:1fr 2fr 9fr;-ms-grid-rows:1fr;grid-template-rows:1fr;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0}.ls-workflow-display .ls-workflow-step.ls-reduced-step .ls-step-top-line .step-number{display:none}.ls-workflow-display .ls-workflow-step.ls-reduced-step .ls-step-top-line .step-icn{-ms-grid-column:2;grid-column:2;-ms-grid-row:1;grid-row:1;font-size:24px;margin:auto;width:unset;height:unset}.ls-workflow-display .ls-workflow-step.ls-reduced-step .ls-step-top-line .step-name{-ms-grid-column:3;grid-column:3;-ms-grid-row:1;grid-row:1}.ls-workflow-display .ls-workflow-step.ls-reduced-step .ls-display-step-separator{-ms-grid-column:3;grid-column:3;-ms-grid-row:2;grid-row:2;border-left:1px solid #d3d3d3;border-bottom:0}.ls-workflow-display .ls-workflow-step.ls-reduced-step .ls-step-validator-list{grid-column:4/-1;-ms-grid-row:2;grid-row:2;padding:.5em;font-size:.8rem;font-style:italic;color:#d3d3d3}.ls-workflow-display .ls-workflow-step.ls-reduced-step.ls-validated-step .ls-step-top-line,.ls-workflow-display .ls-workflow-step.ls-reduced-step.ls-validated-step .ls-step-top-line .step-icn.test-icon-class,.ls-workflow-display .ls-workflow-step.ls-reduced-step.ls-validated-step .ls-step-top-line .step-icn.test-icon-class:before{color:#23a237}.ls-workflow-display .reduced-end-step .ls-workflow-endpoint-content .ls-step-bounds-txt{margin-left:1em}.ls-workflow-display .ls-workflow-endpoint-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.ls-workflow-display .ls-workflow-endpoint-content .ls-step-bounds-txt{margin-left:.5rem}.ls-workflow-display .ls-step-top-line{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;padding-left:.5rem}.ls-workflow-display .ls-step-top-line .step-name{-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:.7rem}.ls-workflow-display .ls-workflow-display-step-container{position:relative}.ls-workflow-display .ls-active-step:not(.ls-reduced-step) .ls-step-top-line{background-color:var(--primary);color:#fff;margin:0}.ls-workflow-display .ls-active-step:not(.ls-reduced-step) .ls-step-top-line .step-icn{color:#fff}.ls-workflow-display .ls-active-step::before{content:'\\f061';font-family:var(--ls-font-awesome-family, \"Font Awesome 5 Free\");font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;font-weight:900;color:var(--ls-workflow-arrow-color,var(--primary));font-size:2em;position:absolute;left:-1em}.ls-workflow-display .ls-active-step.end-step::before{font-size:1.2em}.ls-workflow-end{position:relative}"]
                }] }
    ];
    /** @nocollapse */
    LsWorkflowInstanceViewerComponent.ctorParameters = function () { return []; };
    LsWorkflowInstanceViewerComponent.propDecorators = {
        passedStepTemplateRef: [{ type: ContentChild, args: ['passedStepContent',] }],
        pendingStepTemplateRef: [{ type: ContentChild, args: ['pendingStepContent',] }],
        workflowData: [{ type: Input, args: ['src',] }],
        activeStep: [{ type: Input }],
        getStepIconClassFct: [{ type: Input }],
        getStepTooltipFct: [{ type: Input }],
        getCircuitEndAdditionalClassesFct: [{ type: Input }],
        reducedMode: [{ type: Input }],
        options: [{ type: Input }],
        localizedMessages: [{ type: Input }]
    };
    return LsWorkflowInstanceViewerComponent;
}());
export { LsWorkflowInstanceViewerComponent };
if (false) {
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.passedStepTemplateRef;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.pendingStepTemplateRef;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.workflowData;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.activeStep;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.messages;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.getStepIconClassFct;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.getStepTooltipFct;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.getCircuitEndAdditionalClassesFct;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.reducedMode;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.isOver;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype.isRejected;
    /** @type {?} */
    LsWorkflowInstanceViewerComponent.prototype._options;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHMtd29ya2Zsb3ctaW5zdGFuY2Utdmlld2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BsaWJyaWNpZWwvbHMtY29tcG9zYW50cy93b3JrZmxvd3MvIiwic291cmNlcyI6WyJ3b3JrZmxvd3MvbHMtd29ya2Zsb3ctaW5zdGFuY2Utdmlld2VyL2xzLXdvcmtmbG93LWluc3RhbmNlLXZpZXdlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQXFCLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUkvRixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQztBQUNsRixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDcEUsT0FBTyxFQUFFLGlDQUFpQyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sdURBQXVELENBQUM7QUFFbkk7SUF3QkU7UUFYQSxhQUFRLEdBQXNDO1lBQzVDLGNBQWMsRUFBRSxPQUFPO1lBQ3ZCLGFBQWEsRUFBRSxLQUFLO1NBQ3JCLENBQUM7UUFJTyxnQkFBVyxHQUFHLElBQUksQ0FBQztRQUM1QixXQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ2YsZUFBVSxHQUFHLEtBQUssQ0FBQztRQUtuQixhQUFRLEdBQTRCO1lBQ2xDLGNBQWMsRUFBRSxhQUFhO1lBQzdCLFlBQVksRUFBRSx1QkFBdUI7WUFDckMsa0JBQWtCLEVBQUUsY0FBYztZQUNsQyxpQkFBaUIsRUFBRSxjQUFjO1lBQ2pDLFNBQVMsRUFBRSxLQUFLO1NBQ2pCLENBQUM7SUFSRixDQUFDO0lBVUQsc0JBQWEsc0RBQU87Ozs7UUFBcEI7WUFDRSxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDdkIsQ0FBQzs7Ozs7UUFFRCxVQUFZLEtBQThCO1lBQ3hDLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJ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QUU7WUFDM0MsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLFNBQVMsQ0FBQyxRQUFRLEVBQUU7Z0JBQ3JDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQzthQUN2QztpQkFBTTtnQkFDTCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUM7YUFDeEM7U0FDRjtRQUNELE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQzs7Z0JBOUpGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsNkJBQTZCO29CQUN2QyxrNEVBQTJEOztpQkFFNUQ7Ozs7O3dDQUlFLFlBQVksU0FBQyxtQkFBbUI7eUNBQ2hDLFlBQVksU0FBQyxvQkFBb0I7K0JBRWpDLEtBQUssU0FBQyxLQUFLOzZCQUNYLEtBQUs7c0NBS0wsS0FBSztvQ0FDTCxLQUFLO29EQUNMLEtBQUs7OEJBQ0wsS0FBSzswQkFlTCxLQUFLO29DQVFMLEtBQUs7O0lBcUhSLHdDQUFDO0NBQUEsQUFoS0QsSUFnS0M7U0EzSlksaUNBQWlDOzs7SUFHNUMsa0VBQTJFOztJQUMzRSxtRUFBNkU7O0lBRTdFLHlEQUE2Qzs7SUFDN0MsdURBQTRCOztJQUM1QixxREFHRTs7SUFDRixnRUFBMEQ7O0lBQzFELDhEQUF3RDs7SUFDeEQsOEVBQThEOztJQUM5RCx3REFBNEI7O0lBQzVCLG1EQUFlOztJQUNmLHVEQUFtQjs7SUFLbkIscURBTUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIENvbnRlbnRDaGlsZCwgSW5wdXQsIE9uQ2hhbmdlcywgT25Jbml0LCBUZW1wbGF0ZVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU3RlcEluc3RhbmNlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL21vZGVsL3dvcmtmbG93cy9zdGVwLWluc3RhbmNlJztcbmltcG9ydCB7IFdvcmtmbG93QWN0b3IgfSBmcm9tICcuLi8uLi9zaGFyZWQvbW9kZWwvd29ya2Zsb3dzL3dvcmtmbG93LWFjdG9yJztcbmltcG9ydCB7IFN0ZXBNb2RlbCB9IGZyb20gJy4uLy4uL3NoYXJlZC9tb2RlbC93b3JrZmxvd3Mvc3RlcC1tb2RlbCc7XG5pbXBvcnQgeyBXb3JrZmxvd0luc3RhbmNlIH0gZnJvbSAnLi4vLi4vc2hhcmVkL21vZGVsL3dvcmtmbG93cy93b3JrZmxvdy1pbnN0YW5jZSc7XG5pbXBvcnQgeyBTdGVwU3RhdGUgfSBmcm9tICcuLi8uLi9zaGFyZWQvbW9kZWwvd29ya2Zsb3dzL3N0ZXAtc3RhdGUnO1xuaW1wb3J0IHsgV29ya2Zsb3dJbnN0YW5jZUxvY2FsaXplZE1lc3NhZ2VzLCBXb3JrZmxvd0luc3RhbmNlT3B0aW9ucyB9IGZyb20gXCIuLi8uLi9zaGFyZWQvbW9kZWwvd29ya2Zsb3dzL3dvcmtmbG93LWluc3RhbmNlLW9wdGlvblwiO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdscy13b3JrZmxvdy1pbnN0YW5jZS12aWV3ZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vbHMtd29ya2Zsb3ctaW5zdGFuY2Utdmlld2VyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbHMtd29ya2Zsb3ctaW5zdGFuY2Utdmlld2VyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTHNXb3JrZmxvd0luc3RhbmNlVmlld2VyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xuXG5cbiAgQENvbnRlbnRDaGlsZCgncGFzc2VkU3RlcENvbnRlbnQnKSBwYXNzZWRTdGVwVGVtcGxhdGVSZWY6IFRlbXBsYXRlUmVmPGFueT47XG4gIEBDb250ZW50Q2hpbGQoJ3BlbmRpbmdTdGVwQ29udGVudCcpIHBlbmRpbmdTdGVwVGVtcGxhdGVSZWY6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgQElucHV0KCdzcmMnKSB3b3JrZmxvd0RhdGE6IFdvcmtmbG93SW5zdGFuY2U7XG4gIEBJbnB1dCgpIGFjdGl2ZVN0ZXA6IG51bWJlcjtcbiAgbWVzc2FnZXM6IFdvcmtmbG93SW5zdGFuY2VMb2NhbGl6ZWRNZXNzYWdlcyA9IHtcbiAgICBGSVJTVF9TVEVQX1RYVDogJ1N0YXJ0JyxcbiAgICBMQVNUX1NURVBfVFhUOiAnRW5kJ1xuICB9O1xuICBASW5wdXQoKSBnZXRTdGVwSWNvbkNsYXNzRmN0OiAoc3RlcDogU3RlcE1vZGVsKSA9PiBzdHJpbmc7XG4gIEBJbnB1dCgpIGdldFN0ZXBUb29sdGlwRmN0OiAoc3RlcDogU3RlcE1vZGVsKSA9PiBzdHJpbmc7XG4gIEBJbnB1dCgpIGdldENpcmN1aXRFbmRBZGRpdGlvbmFsQ2xhc3Nlc0ZjdDogKCkgPT4gc3RyaW5nIHwgW107XG4gIEBJbnB1dCgpIHJlZHVjZWRNb2RlID0gdHJ1ZTtcbiAgaXNPdmVyID0gZmFsc2U7XG4gIGlzUmVqZWN0ZWQgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgfVxuXG4gIF9vcHRpb25zOiBXb3JrZmxvd0luc3RhbmNlT3B0aW9ucyA9IHtcbiAgICBzdGFydEljb25DbGFzczogJ2ZhciBmYS1mbGFnJyxcbiAgICBlbmRJY29uQ2xhc3M6ICdmYXMgZmEtZmxhZy1jaGVja2VyZWQnLFxuICAgIHZhbGlkYXRlZEljb25DbGFzczogJ2ZhcyBmYS1jaGVjaycsXG4gICAgcmVqZWN0ZWRJY29uQ2xhc3M6ICdmYXMgZmEtdGltZXMnLFxuICAgIGhpZGVTdGFydDogZmFsc2VcbiAgfTtcblxuICBASW5wdXQoKSBnZXQgb3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgfVxuXG4gIHNldCBvcHRpb25zKHZhbHVlOiBXb3JrZmxvd0luc3RhbmNlT3B0aW9ucykge1xuICAgIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMuX29wdGlvbnMsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpIGdldCBsb2NhbGl6ZWRNZXNzYWdlcygpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlcztcbiAgfVxuXG4gIHNldCBsb2NhbGl6ZWRNZXNzYWdlcyh2YWx1ZTogV29ya2Zsb3dJbnN0YW5jZUxvY2FsaXplZE1lc3NhZ2VzKSB7XG4gICAgdGhpcy5tZXNzYWdlcyA9IE9iamVjdC5hc3NpZ24odGhpcy5tZXNzYWdlcywgdmFsdWUpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgY29uc29sZS53YXJuKCdpbnN0YW5jaWF0aW5nIGxzIHdvcmtmbG93IGluc3RhbmNlIHZpZXdlciEnKTtcbiAgICBpZiAoIXRoaXMud29ya2Zsb3dEYXRhKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIGlucHV0IGNpcmN1aXQgZGF0YScpO1xuICAgICAgdGhpcy53b3JrZmxvd0RhdGEgPSBuZXcgV29ya2Zsb3dJbnN0YW5jZSgpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5tZXNzYWdlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGxvY2FsaXNlZCBtZXNzYWdlcyBmb3IgTHNXb3JrZmxvd1ZpZXdlckNvbXBvbmVudCEnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZ2V0U3RlcEljb25DbGFzc0ZjdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdldFN0ZXBJY29uQ2xhc3NGY3QgZm9yIExzV29ya2Zsb3dWaWV3ZXJDb21wb25lbnQhJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmdldFN0ZXBUb29sdGlwRmN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2V0U3RlcFRvb2x0aXBGY3QgZm9yIExzV29ya2Zsb3dWaWV3ZXJDb21wb25lbnQhJyk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkNoYW5nZXMoKSB7XG4gICAgY29uc29sZS5kZWJ1ZygnTHNXb3JrZmxvd1ZpZXdlckNvbXBvbmVudDo6bmdPbkNoYW5nZXMsICcsIHRoaXMpO1xuXG4gICAgdGhpcy5hY3RpdmVTdGVwID0gdGhpcy53b3JrZmxvd0RhdGEuY3VycmVudFN0ZXBJZHg7XG4gICAgdGhpcy5pc092ZXIgPSB0aGlzLndvcmtmbG93RGF0YS5pc092ZXI7XG4gICAgdGhpcy5pc1JlamVjdGVkID0gdGhpcy53b3JrZmxvd0RhdGEucmVqZWN0ZWQ7XG4gIH1cblxuICBnZXRTdGVwSWNvbkNsYXNzKHN0ZXA6IFN0ZXBNb2RlbCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RlcEljb25DbGFzc0ZjdChzdGVwKTtcbiAgfVxuXG4gIGdldFN0ZXBUb29sdGlwKHN0ZXA6IFN0ZXBNb2RlbCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RlcFRvb2x0aXBGY3Qoc3RlcCk7XG4gIH1cblxuICBpc0FjdGl2ZVN0ZXAoc3RlcElkeDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLmlzUmVqZWN0ZWQgJiYgIXRoaXMuaXNPdmVyICYmIHN0ZXBJZHggPT09IHRoaXMuYWN0aXZlU3RlcDtcbiAgfVxuXG4gIGlzUGFzc2VkKHN0ZXA6IFN0ZXBJbnN0YW5jZSkge1xuICAgIHJldHVybiAoc3RlcC5zdGF0ZSA9PT0gU3RlcFN0YXRlLlZBTElEQVRFRCkgfHwgKHN0ZXAuc3RhdGUgPT09IFN0ZXBTdGF0ZS5SRUpFQ1RFRCk7XG4gIH1cblxuICBpc0FjdHVhbFZhbGlkYXRvcihzdGVwOiBTdGVwSW5zdGFuY2UsIHZhbGlkYXRvcjogV29ya2Zsb3dBY3Rvcikge1xuICAgIHJldHVybiBzdGVwLnZhbGlkYXRlZEJ5LnNvbWUoKGVsZW0pID0+IGVsZW0uaWQgPT09IHZhbGlkYXRvci5pZCk7XG4gIH1cblxuICBpc0NpcmN1aXRPdmVyKCkge1xuICAgIHJldHVybiB0aGlzLmlzT3ZlciAmJiAhdGhpcy5pc1JlamVjdGVkO1xuICB9XG5cbiAgZ2V0Q2lyY3VpdEVuZEFkZGl0aW9uYWxDbGFzc2VzKCk6IHN0cmluZ1tdIHtcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBbXTtcbiAgICBpZiAodGhpcy5nZXRDaXJjdWl0RW5kQWRkaXRpb25hbENsYXNzZXNGY3QpIHtcbiAgICAgIGNsYXNzZXMucHVzaCh0aGlzLmdldENpcmN1aXRFbmRBZGRpdGlvbmFsQ2xhc3Nlc0ZjdCgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xhc3Nlcy5wdXNoKHRoaXMuX29wdGlvbnMuYWRkaXRpb25hbEZpbmFsRW5kcG9pbnRDbGFzc2VzIHx8ICcnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZWR1Y2VkTW9kZSkge1xuICAgICAgY2xhc3Nlcy5wdXNoKCdyZWR1Y2VkLWVuZC1zdGVwJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzZXM7XG4gIH1cblxuICBnZXRBZGRpdGlvbmFsVmFsaWRhdG9yTGlzdENsYXNzZXMoKSB7XG4gICAgLy93YS1jaXJjdWl0LWluc3RhbmNlXG5cbiAgfVxuXG5cbiAgZ2V0U3RlcEFkZGl0aW9uYWxDbGFzc2VzKHN0ZXA6IFN0ZXBJbnN0YW5jZSwgc3RlcElkeDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIC8vIHRoaXMuaXNBY3RpdmVTdGVwKHN0ZXBJZHgpID8gJ3dhLWFjdGl2ZS1zdGVwIHdhLXdoaXRlLWljbicgOiAnJ1xuICAgIGNvbnN0IGNsYXNzZXMgPSBbXTtcbiAgICBpZiAodGhpcy5pc0FjdGl2ZVN0ZXAoc3RlcElkeCkpIHtcbiAgICAgIGNsYXNzZXMucHVzaCgnbHMtYWN0aXZlLXN0ZXAgbHMtd2hpdGUtaWNuJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVkdWNlZE1vZGUpIHtcbiAgICAgIGNsYXNzZXMucHVzaCgnbHMtcmVkdWNlZC1zdGVwJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnJlZHVjZWRNb2RlKSB7XG4gICAgICBpZiAoc3RlcC5zdGF0ZSA9PT0gU3RlcFN0YXRlLlNLSVBQRUQpIHtcbiAgICAgICAgY2xhc3Nlcy5wdXNoKCd3YS1jaXJjdWl0LXNraXBwZWQtc3RlcCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdGVwLnN0YXRlID09PSBTdGVwU3RhdGUuVkFMSURBVEVEKSB7XG4gICAgICBjbGFzc2VzLnB1c2goJ2xzLXZhbGlkYXRlZC1zdGVwJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzZXM7XG4gIH1cblxuICBnZXRWYWxpZGF0b3JDbGFzc2VzKHN0ZXA6IFN0ZXBJbnN0YW5jZSwgdmFsaWRhdG9yOiBXb3JrZmxvd0FjdG9yKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5pc0FjdHVhbFZhbGlkYXRvcihzdGVwLCB2YWxpZGF0b3IpKSB7XG4gICAgICBpZiAoc3RlcC5zdGF0ZSA9PT0gU3RlcFN0YXRlLlJFSkVDVEVEKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMucmVqZWN0ZWRJY29uQ2xhc3M7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnZhbGlkYXRlZEljb25DbGFzcztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbn1cbiJdfQ==