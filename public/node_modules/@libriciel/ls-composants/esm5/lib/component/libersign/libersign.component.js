/**
 * @fileoverview added by tsickle
 * Generated from: lib/component/libersign/libersign.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, EventEmitter, Input, NgZone, Output } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { LibersignNativeUtil } from './libersign.native.util';
import { LibersignAppletUtil } from './libersign.applet.util';
var LibersignComponent = /** @class */ (function () {
    function LibersignComponent(httpClient, zone, element) {
        this.httpClient = httpClient;
        this.zone = zone;
        this.element = element;
        this.sign = new EventEmitter();
        this.cancel = new EventEmitter();
        this.signed = new EventEmitter();
        // @ts-ignore
        this.isIE = false || !!document.documentMode;
        this.isValid = true;
    }
    /**
     * @return {?}
     */
    LibersignComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (typeof LiberSign !== 'undefined') {
            this.libersignUtil = new LibersignNativeUtil();
        }
        else if (this.isIE) {
            this.libersignUtil = new LibersignAppletUtil(this.zone);
        }
        else {
            this.libersignUtil = new LibersignAppletUtil(this.zone);
        }
        this.libersignUtil.init(this.updateUrl, this.appletUrl);
        this.libersignUtil.signatures.subscribe((/**
         * @param {?} sig
         * @return {?}
         */
        function (sig) {
            _this.signed.emit(sig);
        }));
    };
    /**
     * @return {?}
     */
    LibersignComponent.prototype.onSign = /**
     * @return {?}
     */
    function () {
        this.libersignUtil.status.dataToSignLoading = true;
        this.sign.emit(this.libersignUtil.currentCert);
    };
    /**
     * @return {?}
     */
    LibersignComponent.prototype.onCancel = /**
     * @return {?}
     */
    function () {
        this.libersignUtil.destroy();
        this.cancel.emit();
    };
    Object.defineProperty(LibersignComponent.prototype, "dataToSign", {
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            // tslint:disable-next-line:triple-equals
            if (value != undefined && value.length > 0) {
                if (typeof value === 'string') {
                    try {
                        value = JSON.parse(value);
                        this.libersignUtil.status.signLoading = true;
                        this.libersignUtil.sign(value);
                    }
                    catch (error) {
                        // Do nothing
                    }
                }
                else {
                    this.libersignUtil.status.signLoading = true;
                    this.libersignUtil.sign(value);
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LibersignComponent.prototype, "valid", {
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.isValid = value === 'true';
        },
        enumerable: true,
        configurable: true
    });
    LibersignComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ls-libersign',
                    template: "<div class=\"libersign-container\" [ngClass]=\"libersignUtil.status.certsLoaded ? '' : 'min-height'\">\n  <span class=\"text text-danger\" *ngIf=\"!libersignUtil.status.installed\">\n    <i class=\"fa fa-times\"></i> Merci d'installer l'extension LiberSign\n  </span>\n\n  <span class=\"text text-danger\" *ngIf=\"libersignUtil.status.certsError\">\n    <i class=\"fa fa-times\"></i> Erreur lors de la r\u00E9cup\u00E9ration des certificats\n  </span>\n\n  <div *ngIf=\"libersignUtil.status.isLoading()\" class=\"center\">\n    <div class=\"lds-roller\">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n\n    <div *ngIf=\"libersignUtil.status.certsLoading\" class=\"text text-info\">\n      Chargement des certificats disponibles en cours...\n    </div>\n\n    <div *ngIf=\"libersignUtil.status.appletLoading\" class=\"text text-info\">\n      Chargement de l'applet de signature en cours...\n    </div>\n\n    <div *ngIf=\"libersignUtil.status.dataToSignLoading\" class=\"text text-info\">\n      R\u00E9cup\u00E9ration des informations de signature en cours...\n    </div>\n\n    <div *ngIf=\"libersignUtil.status.signLoading\" class=\"text text-info\">\n      Signature en cours...\n    </div>\n  </div>\n\n  <div *ngIf=\"libersignUtil.status.showCerts()\" class=\"certs-loaded\">\n    <table class=\"table\">\n      <thead>\n      <tr>\n        <th></th>\n        <th>Nom</th>\n        <th>\u00C9metteur</th>\n        <th>Date d'expiration</th>\n      </tr>\n      </thead>\n\n      <tbody>\n      <tr *ngFor=\"let cert of libersignUtil.certificates\" (click)=\"libersignUtil.selectCertificate(cert)\" [class.active]=\"libersignUtil.currentCert && libersignUtil.currentCert.ID == cert.ID\">\n        <td>\n          <i class=\"fa-star text text-warning\" [ngClass]=\"libersignUtil.favorite === cert ? 'fa' : 'far fa fa-star-o'\" title=\"Certificat favori\" (click)=\"libersignUtil.favorite = cert\"></i>\n          <span [className]=\"'label label-' + cert.verifiedWith[0]\" *ngIf=\"cert.verifiedWith.length > 0\">{{cert.verifiedWith[0]}}</span>\n        </td>\n        <td>{{cert.CN}}</td>\n        <td>{{cert.ISSUERDN}}</td>\n        <td>{{cert.NOTAFTER | date:'dd/MM/yyyy'}}</td>\n      </tr>\n      </tbody>\n    </table>\n\n    <div class=\"float-right libersign-action-buttons\">\n      <button class=\"btn btn-warning\" (click)=\"onCancel()\">\n        <i class=\"fa fa-times-circle-o\"></i>\n        Annuler\n      </button>\n\n      <button class=\"btn btn-primary\" (click)=\"onSign()\" [disabled]=\"!libersignUtil.currentCert || !isValid\">\n        <i class=\"fa ls-signature\"></i>\n        Signer\n      </button>\n    </div>\n  </div>\n</div>\n\n\n",
                    styles: [".libersign-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.libersign-container.min-height{min-height:150px}.fa-star{margin-right:5px}.label-RGS{background-color:var(--ls-success-400);background-color:#5cb85c}.label-ADULLACT{background-color:var(--ls-info-400);background-color:#5bc0de}.label-LIBRICIEL{background-color:var(--ls-primary-500);background-color:#428bca}.label-EIDAS{background-color:var(--ls-grey-500);background-color:#999}.label-ETAT{background-color:var(--ls-warning-400);background-color:#f0ad4e}.certs-loaded{width:100%}table{text-align:left}.table td,.table th{padding:.3rem}tr{cursor:pointer}tr.active{background-color:var(--ls-primary-200);background-color:#b1dfff}tr.active>td{background-color:transparent!important}.center{text-align:center}#appletLibersign{height:0}.libersign-action-buttons>*{margin-left:1rem}.lds-roller{display:inline-block;position:relative;width:80px;height:80px}.lds-roller div{-webkit-animation:1.2s cubic-bezier(.5,0,.5,1) infinite lds-roller;animation:1.2s cubic-bezier(.5,0,.5,1) infinite lds-roller;-webkit-transform-origin:40px 40px;-ms-transform-origin:40px 40px;transform-origin:40px 40px}.lds-roller div:after{content:\" \";display:block;position:absolute;width:7px;height:7px;border-radius:50%;background:#000;margin:-4px 0 0 -4px}.lds-roller div:nth-child(1){-webkit-animation-delay:-36ms;animation-delay:-36ms}.lds-roller div:nth-child(1):after{top:63px;left:63px}.lds-roller div:nth-child(2){-webkit-animation-delay:-72ms;animation-delay:-72ms}.lds-roller div:nth-child(2):after{top:68px;left:56px}.lds-roller div:nth-child(3){-webkit-animation-delay:-108ms;animation-delay:-108ms}.lds-roller div:nth-child(3):after{top:71px;left:48px}.lds-roller div:nth-child(4){-webkit-animation-delay:-144ms;animation-delay:-144ms}.lds-roller div:nth-child(4):after{top:72px;left:40px}.lds-roller div:nth-child(5){-webkit-animation-delay:-.18s;animation-delay:-.18s}.lds-roller div:nth-child(5):after{top:71px;left:32px}.lds-roller div:nth-child(6){-webkit-animation-delay:-216ms;animation-delay:-216ms}.lds-roller div:nth-child(6):after{top:68px;left:24px}.lds-roller div:nth-child(7){-webkit-animation-delay:-252ms;animation-delay:-252ms}.lds-roller div:nth-child(7):after{top:63px;left:17px}.lds-roller div:nth-child(8){-webkit-animation-delay:-288ms;animation-delay:-288ms}.lds-roller div:nth-child(8):after{top:56px;left:12px}@-webkit-keyframes lds-roller{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes lds-roller{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}"]
                }] }
    ];
    /** @nocollapse */
    LibersignComponent.ctorParameters = function () { return [
        { type: HttpClient },
        { type: NgZone },
        { type: ElementRef }
    ]; };
    LibersignComponent.propDecorators = {
        updateUrl: [{ type: Input }],
        appletUrl: [{ type: Input }],
        sign: [{ type: Output }],
        cancel: [{ type: Output }],
        signed: [{ type: Output }],
        dataToSign: [{ type: Input }],
        valid: [{ type: Input }]
    };
    return LibersignComponent;
}());
export { LibersignComponent };
if (false) {
    /** @type {?} */
    LibersignComponent.prototype.updateUrl;
    /** @type {?} */
    LibersignComponent.prototype.appletUrl;
    /** @type {?} */
    LibersignComponent.prototype.sign;
    /** @type {?} */
    LibersignComponent.prototype.cancel;
    /** @type {?} */
    LibersignComponent.prototype.signed;
    /** @type {?} */
    LibersignComponent.prototype.isIE;
    /** @type {?} */
    LibersignComponent.prototype.isValid;
    /** @type {?} */
    LibersignComponent.prototype.libersignUtil;
    /**
     * @type {?}
     * @private
     */
    LibersignComponent.prototype.httpClient;
    /**
     * @type {?}
     * @private
     */
    LibersignComponent.prototype.zone;
    /**
     * @type {?}
     * @private
     */
    LibersignComponent.prototype.element;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliZXJzaWduLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BsaWJyaWNpZWwvbHMtY29tcG9zYW50cy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnQvbGliZXJzaWduL2xpYmVyc2lnbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBVSxNQUFNLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDakcsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLHNCQUFzQixDQUFDO0FBR2hELE9BQU8sRUFBQyxtQkFBbUIsRUFBQyxNQUFNLHlCQUF5QixDQUFDO0FBQzVELE9BQU8sRUFBQyxtQkFBbUIsRUFBQyxNQUFNLHlCQUF5QixDQUFDO0FBSTVEO0lBT0UsNEJBQW9CLFVBQXNCLEVBQVUsSUFBWSxFQUFVLE9BQW1CO1FBQXpFLGVBQVUsR0FBVixVQUFVLENBQVk7UUFBVSxTQUFJLEdBQUosSUFBSSxDQUFRO1FBQVUsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQUs3RixTQUFJLEdBQXVDLElBQUksWUFBWSxFQUF3QixDQUFDO1FBRXBGLFdBQU0sR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUUvQyxXQUFNLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7O1FBRy9DLFNBQUksR0FBZSxLQUFLLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUM7UUFDcEQsWUFBTyxHQUFHLElBQUksQ0FBQztJQWJrRixDQUFDOzs7O0lBZ0JsRyxxQ0FBUTs7O0lBQVI7UUFBQSxpQkFjQztRQWJDLElBQUksT0FBTyxTQUFTLEtBQUssV0FBVyxFQUFFO1lBQ3BDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO1NBQ2hEO2FBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ3BCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDekQ7YUFBTTtZQUNMLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDekQ7UUFFRCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUV4RCxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxTQUFTOzs7O1FBQUMsVUFBQSxHQUFHO1lBQ3pDLEtBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3hCLENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQzs7OztJQUVNLG1DQUFNOzs7SUFBYjtRQUNFLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztRQUNuRCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ2pELENBQUM7Ozs7SUFFTSxxQ0FBUTs7O0lBQWY7UUFDRSxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzdCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVELHNCQUNJLDBDQUFVOzs7OztRQURkLFVBQ2UsS0FBZTtZQUM1Qix5Q0FBeUM7WUFDekMsSUFBSSxLQUFLLElBQUksU0FBUyxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUMxQyxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRTtvQkFDN0IsSUFBSTt3QkFDRixLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDMUIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQzt3QkFDN0MsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7cUJBQ2hDO29CQUFDLE9BQU8sS0FBSyxFQUFFO3dCQUNkLGFBQWE7cUJBQ2Q7aUJBQ0Y7cUJBQU07b0JBQ0wsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztvQkFDN0MsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7aUJBQ2hDO2FBQ0Y7UUFDSCxDQUFDOzs7T0FBQTtJQUVELHNCQUNJLHFDQUFLOzs7OztRQURULFVBQ1UsS0FBYTtZQUNyQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssS0FBSyxNQUFNLENBQUM7UUFDbEMsQ0FBQzs7O09BQUE7O2dCQXZFRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLGNBQWM7b0JBQ3hCLDR1RkFBeUM7O2lCQUUxQzs7OztnQkFaTyxVQUFVO2dCQURrQyxNQUFNO2dCQUF2QyxVQUFVOzs7NEJBa0IxQixLQUFLOzRCQUNMLEtBQUs7dUJBQ0wsTUFBTTt5QkFFTixNQUFNO3lCQUVOLE1BQU07NkJBa0NOLEtBQUs7d0JBbUJMLEtBQUs7O0lBSVIseUJBQUM7Q0FBQSxBQXhFRCxJQXdFQztTQW5FWSxrQkFBa0I7OztJQUk3Qix1Q0FBMkI7O0lBQzNCLHVDQUEyQjs7SUFDM0Isa0NBQ29GOztJQUNwRixvQ0FDK0M7O0lBQy9DLG9DQUMrQzs7SUFHL0Msa0NBQW9EOztJQUNwRCxxQ0FBZTs7SUFDZiwyQ0FBNkI7Ozs7O0lBZGpCLHdDQUE4Qjs7Ozs7SUFBRSxrQ0FBb0I7Ozs7O0lBQUUscUNBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE5nWm9uZSwgT25Jbml0LCBPdXRwdXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtIdHRwQ2xpZW50fSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQge0xpYmVyc2lnbkNlcnRpZmljYXRlfSBmcm9tICcuL2NlcnRpZmljYXRlLm1vZGVsJztcbmltcG9ydCB7TGliZXJzaWduVXRpbH0gZnJvbSAnLi9saWJlcnNpZ24udXRpbCc7XG5pbXBvcnQge0xpYmVyc2lnbk5hdGl2ZVV0aWx9IGZyb20gJy4vbGliZXJzaWduLm5hdGl2ZS51dGlsJztcbmltcG9ydCB7TGliZXJzaWduQXBwbGV0VXRpbH0gZnJvbSAnLi9saWJlcnNpZ24uYXBwbGV0LnV0aWwnO1xuXG5kZWNsYXJlIHZhciBMaWJlclNpZ246IGFueTtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbHMtbGliZXJzaWduJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2xpYmVyc2lnbi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2xpYmVyc2lnbi5jb21wb25lbnQuc2NzcyddLFxufSlcbmV4cG9ydCBjbGFzcyBMaWJlcnNpZ25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaHR0cENsaWVudDogSHR0cENsaWVudCwgcHJpdmF0ZSB6b25lOiBOZ1pvbmUsIHByaXZhdGUgZWxlbWVudDogRWxlbWVudFJlZikgeyB9XG5cbiAgQElucHV0KCkgdXBkYXRlVXJsOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGFwcGxldFVybDogc3RyaW5nO1xuICBAT3V0cHV0KClcbiAgc2lnbjogRXZlbnRFbWl0dGVyPExpYmVyc2lnbkNlcnRpZmljYXRlPiA9IG5ldyBFdmVudEVtaXR0ZXI8TGliZXJzaWduQ2VydGlmaWNhdGU+KCk7XG4gIEBPdXRwdXQoKVxuICBjYW5jZWw6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KClcbiAgc2lnbmVkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAvLyBAdHMtaWdub3JlXG4gIGlzSUUgPSAvKkBjY19vbiFAKi9mYWxzZSB8fCAhIWRvY3VtZW50LmRvY3VtZW50TW9kZTtcbiAgaXNWYWxpZCA9IHRydWU7XG4gIGxpYmVyc2lnblV0aWw6IExpYmVyc2lnblV0aWw7XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHR5cGVvZiBMaWJlclNpZ24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmxpYmVyc2lnblV0aWwgPSBuZXcgTGliZXJzaWduTmF0aXZlVXRpbCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0lFKSB7XG4gICAgICB0aGlzLmxpYmVyc2lnblV0aWwgPSBuZXcgTGliZXJzaWduQXBwbGV0VXRpbCh0aGlzLnpvbmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxpYmVyc2lnblV0aWwgPSBuZXcgTGliZXJzaWduQXBwbGV0VXRpbCh0aGlzLnpvbmUpO1xuICAgIH1cblxuICAgIHRoaXMubGliZXJzaWduVXRpbC5pbml0KHRoaXMudXBkYXRlVXJsLCB0aGlzLmFwcGxldFVybCk7XG5cbiAgICB0aGlzLmxpYmVyc2lnblV0aWwuc2lnbmF0dXJlcy5zdWJzY3JpYmUoc2lnID0+IHtcbiAgICAgIHRoaXMuc2lnbmVkLmVtaXQoc2lnKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBvblNpZ24oKSB7XG4gICAgdGhpcy5saWJlcnNpZ25VdGlsLnN0YXR1cy5kYXRhVG9TaWduTG9hZGluZyA9IHRydWU7XG4gICAgdGhpcy5zaWduLmVtaXQodGhpcy5saWJlcnNpZ25VdGlsLmN1cnJlbnRDZXJ0KTtcbiAgfVxuXG4gIHB1YmxpYyBvbkNhbmNlbCgpIHtcbiAgICB0aGlzLmxpYmVyc2lnblV0aWwuZGVzdHJveSgpO1xuICAgIHRoaXMuY2FuY2VsLmVtaXQoKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCBkYXRhVG9TaWduKHZhbHVlOiBzdHJpbmdbXSkge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp0cmlwbGUtZXF1YWxzXG4gICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCAmJiB2YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhbHVlID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICAgICAgdGhpcy5saWJlcnNpZ25VdGlsLnN0YXR1cy5zaWduTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgdGhpcy5saWJlcnNpZ25VdGlsLnNpZ24odmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIERvIG5vdGhpbmdcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5saWJlcnNpZ25VdGlsLnN0YXR1cy5zaWduTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMubGliZXJzaWduVXRpbC5zaWduKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBASW5wdXQoKVxuICBzZXQgdmFsaWQodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuaXNWYWxpZCA9IHZhbHVlID09PSAndHJ1ZSc7XG4gIH1cbn1cbiJdfQ==