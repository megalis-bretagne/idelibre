/**
 * @fileoverview added by tsickle
 * Generated from: lib/pages/login/login-config/login-config.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, HostListener, Input, Output, ViewChild } from '@angular/core';
import { defaultConfiguration } from './login-config.model';
import { DomSanitizer } from '@angular/platform-browser';
export class LoginConfigComponent {
    /**
     * @param {?} _DomSanitizationService
     */
    constructor(_DomSanitizationService) {
        this._DomSanitizationService = _DomSanitizationService;
        this.save = new EventEmitter();
        this.back = new EventEmitter();
        this.showPrevisu = false;
        this.saving = false;
        this.isSaved = false;
        this._asyncSave = false;
        this._configuration = Object.assign({}, defaultConfiguration);
    }
    /**
     * @return {?}
     */
    onSaved() {
        this.isSaved = true;
        this.saving = false;
        clearTimeout(this._timeoutShow);
        this._timeoutShow = setTimeout((/**
         * @return {?}
         */
        () => {
            this.isSaved = false;
        }), 3000);
    }
    /**
     * @param {?} async
     * @return {?}
     */
    set asyncSave(async) {
        this._asyncSave = typeof async === 'string' ? async === 'true' : async;
    }
    /**
     * @param {?} config
     * @return {?}
     */
    set configuration(config) {
        this._configuration = typeof config === 'string' ? JSON.parse(config) : config;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    stopPropagation(event) {
        event.stopPropagation();
    }
    /**
     * @return {?}
     */
    onEscapeKeyPressed() {
        this.showPrevisu = false;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onFileChanged(event) {
        /** @type {?} */
        const file = event.target.files[0];
        /** @type {?} */
        const reader = new FileReader();
        reader.addEventListener('load', (/**
         * @return {?}
         */
        () => {
            this._configuration.imgName = file.name;
            // @ts-ignore
            this._configuration.imgData = reader.result;
        }), false);
        if (file) {
            reader.readAsDataURL(file);
        }
    }
    /**
     * @return {?}
     */
    removeCurrentFile() {
        this._configuration.imgData = undefined;
        this.fileInput.nativeElement.value = '';
    }
    /**
     * @return {?}
     */
    onReset() {
        this.removeCurrentFile();
        Object.assign(this._configuration, defaultConfiguration);
    }
    /**
     * @return {?}
     */
    onSave() {
        this.save.emit(this._configuration);
        if (this._asyncSave) {
            this.saving = true;
        }
        else {
            this.onSaved();
        }
    }
    /**
     * @return {?}
     */
    onBack() {
        this.back.emit();
    }
}
LoginConfigComponent.decorators = [
    { type: Component, args: [{
                selector: 'ls-login-config',
                template: "<h3>Personnalisation de la page de connexion</h3>\n\n<span class=\"alert alert-info\">\n  <i class=\"fa fa-info-circle\"></i>\n  Rappel : les champs renseign\u00E9s ci-dessous sont visibles de tous les utilisateurs\n</span>\n\n<div class=\"action-buttons\">\n  <div class=\"left-buttons\">\n    <button class=\"btn btn-outline-primary\" (click)=\"onBack()\">\n      <i class=\"fa fa-arrow-left\"></i>\n      Retour\n    </button>\n    <button (click)=\"showPrevisu = true\" class=\"btn btn-outline-primary\">\n      <i class=\"fa fa-eye\"></i>\n      Pr\u00E9visualiser les modifications\n    </button>\n    <button class=\"btn btn-outline-primary\" (click)=\"onReset()\">\n      <i class=\"fa fa-undo\"></i>\n      R\u00E9initialiser\n    </button>\n    <button class=\"btn btn-primary\" (click)=\"onSave()\" [disabled]=\"saving\">\n      <i class=\"fa fa-save\" *ngIf=\"!saving\"></i>\n      <i class=\"fa fa-spinner fa-spin\" *ngIf=\"saving\"></i>\n      Enregistrer\n    </button>\n\n    <span *ngIf=\"isSaved\" class=\"text text-success\"><i class=\"fa fa-check\"></i> Configuration enregistr\u00E9e</span>\n  </div>\n</div>\n\n<div class=\"content-div\">\n  <div>\n    <div>\n      <h3>Collectivit\u00E9 / structure</h3>\n      <p>Activer l'espace de personnalisation r\u00E9serv\u00E9 \u00E0 la collectivit\u00E9 / structure ?</p>\n      <div>\n        <input [(ngModel)]=\"_configuration.showCustom\" [value]=\"true\" checked class=\"btn-radio\" id=\"show-custom-yes\"\n               name=\"show-custom\"\n               type=\"radio\">\n        <label for=\"show-custom-yes\">\n          Activer\n        </label>\n        <input [(ngModel)]=\"_configuration.showCustom\" [value]=\"false\" class=\"btn-radio\" id=\"show-custom-no\"\n               name=\"show-custom\"\n               type=\"radio\">\n        <label class=\"margin-left-16\" for=\"show-custom-no\">\n          D\u00E9sactiver\n        </label>\n      </div>\n    </div>\n    <div [class.disabled]=\"!_configuration.showCustom\">\n      <h4>Logo de la collectivit\u00E9</h4>\n      <input\n        #fileInput\n        (change)=\"onFileChanged($event)\" style=\"display: none\"\n        type=\"file\">\n      <button (click)=\"fileInput.click()\" *ngIf=\"!_configuration.imgData\" class=\"btn btn-primary\">\n        <i class=\"fa fa-plus-circle\"></i>\n        Ajouter une image\n      </button>\n      <div *ngIf=\"_configuration.imgData\" class=\"image-informations\">\n        <div>\n          <i class=\"fa fa-image\"></i>\n          {{_configuration.imgName}}\n        </div>\n        <div>\n          <i (click)=\"removeCurrentFile()\" title=\"Supprimer le logo\" class=\"fa fa-trash fa-trash-alt\"></i>\n          <i (click)=\"fileInput.click()\" title=\"Modifier le logo\" class=\"fa fa-refresh fa-sync\"></i>\n        </div>\n      </div>\n    </div>\n    <div [class.disabled]=\"!_configuration.showCustom\">\n      <h4>\n        Couleurs\n      </h4>\n      <div class=\"d-flex\">\n        <div class=\"color-picker color-background\">\n          <label for=\"background-color\">Couleur de fond</label>\n          <ls-color-picker id=\"background-color\" [(ngModel)]=\"_configuration.colorBackground\"></ls-color-picker>\n        </div>\n        <div class=\"color-picker color-text\">\n          <label for=\"text-color\">Couleur du sous-titre</label>\n          <ls-color-picker id=\"text-color\" [(ngModel)]=\"_configuration.colorText\"></ls-color-picker>\n        </div>\n      </div>\n    </div>\n\n    <div [class.disabled]=\"!_configuration.showCustom\">\n      <label class=\"h4\" for=\"soustitre\">\n        Sous-titre\n      </label>\n      <ls-max-length-textarea [(ngModel)]=\"_configuration.subText\" id=\"soustitre\" maxlength=\"300\"\n                              name=\"soustitre\"></ls-max-length-textarea>\n    </div>\n  </div>\n  <div>\n    <div>\n      <h3>Message d'informations</h3>\n      <p>Afficher un message d'information ?</p>\n      <div>\n        <input [(ngModel)]=\"_configuration.showInformation\" [value]=\"true\" checked class=\"btn-radio\" id=\"show-info-yes\"\n               name=\"show-info\"\n               type=\"radio\">\n        <label for=\"show-info-yes\">\n          Afficher\n        </label>\n        <input [(ngModel)]=\"_configuration.showInformation\" [value]=\"false\" class=\"btn-radio\" id=\"show-info-no\"\n               name=\"show-info\"\n               type=\"radio\">\n        <label class=\"margin-left-16\" for=\"show-info-no\">\n          Ne pas afficher\n        </label>\n      </div>\n\n    </div>\n\n    <div [class.disabled]=\"!_configuration.showInformation\">\n      <label for=\"message-text\">Texte du message :</label>\n      <ls-max-length-textarea [(ngModel)]=\"_configuration.informationText\" id=\"message-text\" maxlength=\"300\"\n                              name=\"message-text\"></ls-max-length-textarea>\n    </div>\n\n    <div [class.disabled]=\"!_configuration.showInformation\">\n      <h4>Niveau d'alerte du message</h4>\n      <div class=\"\">\n        <input [(ngModel)]=\"_configuration.informationType\" id=\"exampleRadios1\" name=\"exampleRadios\" type=\"radio\"\n               value=\"info\">\n        <label class=\" alert alert-info margin-left-16\" for=\"exampleRadios1\">\n          <i class=\"fa fa-info-circle\">\n          </i>\n          Information\n        </label>\n      </div>\n      <div class=\"\">\n        <input [(ngModel)]=\"_configuration.informationType\" id=\"exampleRadios2\" name=\"exampleRadios\" type=\"radio\"\n               value=\"warning\">\n        <label class=\"alert alert-warning margin-left-16\" for=\"exampleRadios2\">\n          <i class=\"fa fa-exclamation-circle\"></i>\n          Alerte\n        </label>\n      </div>\n      <div class=\"\">\n        <input [(ngModel)]=\"_configuration.informationType \" id=\"exampleRadios3\" name=\"exampleRadios\" type=\"radio\"\n               value=\"danger\">\n        <label class=\"alert alert-danger margin-left-16\" for=\"exampleRadios3\">\n          <i class=\"fa fa-exclamation-triangle\"></i>\n          Danger\n        </label>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n<div [class.show]=\"showPrevisu\" class=\"preview-modal\">\n  <div (click)=\"showPrevisu = false\" class=\"preview-background\">\n    <div (click)=\"stopPropagation($event)\" class=\"preview-body\">\n      <h3>Pr\u00E9visualisation de la page de connexion</h3>\n\n      <div class=\"login-previsu\">\n        <div [style.background-color]=\"_configuration.colorBackground\" class=\"login-previsu-sidebar\" [style.opacity]=\"_configuration.showCustom ? 1 : 0\">\n          <img *ngIf=\"_configuration.imgData\" [src]=\"_DomSanitizationService.bypassSecurityTrustUrl(_configuration.imgData)\" alt=\"Image preview...\" src=\"\">\n          <div [style.color]=\"_configuration.colorText\">{{_configuration.subText}}</div>\n        </div>\n        <div class=\"login-previsu-content\">\n          <span *ngIf=\"_configuration.showInformation && _configuration.informationText\" [ngSwitch]=\"_configuration.informationType\"\n                [ngClass]=\"'alert-' + _configuration.informationType\" class=\"alert\">\n            <i *ngSwitchCase=\"'info'\" class=\"fa fa-info-circle\"></i>\n            <i *ngSwitchCase=\"'warning'\" class=\"fa fa-exclamation-circle\"></i>\n            <i *ngSwitchCase=\"'danger'\" class=\"fa fa-exclamation-triangle\"></i>\n            {{_configuration.informationText}}\n          </span>\n        </div>\n        <div class=\"login-previsu-footer\">\n\n        </div>\n        <div class=\"login-previsu-footer\">\n\n        </div>\n      </div>\n      <i (click)=\"showPrevisu = false\" class=\"fa fa-times close-icon\"></i>\n    </div>\n  </div>\n\n</div>\n",
                styles: [".alert{display:inline-block;margin-top:.6rem;margin-bottom:.6rem}.action-buttons{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.action-buttons>:nth-child(1) button{margin-right:15px}textarea{min-height:110px}@media screen and (max-width:1280px){.content-div{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.content-div>*{margin:30px 40px}}@media screen and (min-width:1280px){.content-div>:nth-child(1){margin:30px 40px;border-right:1px solid rgba(0,0,0,.15);padding-right:30px}.content-div>*{width:50%;margin:30px 40px 30px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.content-div>*>:nth-child(n+2){margin-top:20px}}.content-div{font-family:Ubuntu,sans-serif;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:start;margin-top:20px;-webkit-box-shadow:0 0 6px rgba(0,0,0,.15);box-shadow:0 0 6px rgba(0,0,0,.15);background-color:#fff}.content-div .h4,.content-div h4{font-size:15px;font-weight:700}.content-div .color-picker{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.content-div .color-picker:nth-child(1){margin-right:30px}.content-div .color-picker span{font-size:15px}.content-div textarea{margin-right:30px}.content-div .margin-left-16{margin-left:16px}.content-div .disabled{pointer-events:none;opacity:.25}.content-div>div>div:nth-child(1){margin-bottom:20px}.preview-modal:not(.show){display:none}.preview-modal.show{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:10000}.preview-modal.show .preview-background{width:100%;height:100%;background-color:rgba(0,0,0,.4);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.preview-modal.show .preview-body{background-color:#fff;width:70vw;height:70vh;padding:30px;position:relative;display:-ms-grid;display:grid;-ms-grid-rows:50px 1fr;-ms-grid-columns:1fr;grid-template:\"title\" 50px \"previsu\" 1fr/1fr}.preview-modal.show .preview-body>h3{-ms-grid-row:1;-ms-grid-column:1;grid-area:title}.preview-modal.show .close-icon{position:absolute;right:25px;top:25px;font-size:18px;cursor:pointer}.login-previsu{-ms-grid-row:2;-ms-grid-column:1;grid-area:previsu;-webkit-box-shadow:0 0 6px rgba(0,0,0,.15);box-shadow:0 0 6px rgba(0,0,0,.15);display:-ms-grid;display:grid;-ms-grid-rows:1fr 20px;-ms-grid-columns:35% 1fr;grid-template:\"sidebar  content\" 1fr \"footer   footer\" 20px/35% 1fr;height:95%;min-height:95%}.login-previsu .login-previsu-content{-ms-grid-row:1;-ms-grid-column:2;grid-area:content}.login-previsu .login-previsu-sidebar{-ms-grid-row:1;-ms-grid-column:1;grid-area:sidebar;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:30px;font-size:10px;text-align:center}.login-previsu .login-previsu-sidebar div{padding-top:1rem}.login-previsu .login-previsu-footer{-ms-grid-row:2;-ms-grid-column:1;-ms-grid-column-span:2;grid-area:footer;background-color:#222}.login-previsu .alert{position:fixed;right:0;left:0;margin-right:auto;margin-left:auto;text-align:center;width:45vw}.login-previsu img{display:block;max-width:90%;max-height:20vh;width:auto}@media screen and (min-width:0\\0){.login-previsu img{height:auto;-webkit-box-flex:1;-ms-flex:1;flex:1}.login-previsu div{max-width:100%}}.image-informations{display:-webkit-box;display:-ms-flexbox;display:flex}.image-informations div:nth-child(1){max-width:50%;word-break:break-all;padding:19px;background-color:#f7f7f7}.image-informations div:nth-child(2){padding-left:25px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.image-informations i{-webkit-transition:.1s;transition:.1s;cursor:pointer;margin:auto}.image-informations .fa-trash-alt:hover{color:var(--danger)}.image-informations .fa-sync:hover{color:var(--primary)}.color-picker>span{margin-bottom:5px}"]
            }] }
];
/** @nocollapse */
LoginConfigComponent.ctorParameters = () => [
    { type: DomSanitizer }
];
LoginConfigComponent.propDecorators = {
    save: [{ type: Output }],
    back: [{ type: Output }],
    fileInput: [{ type: ViewChild, args: ['fileInput',] }],
    onSaved: [{ type: HostListener, args: ['saved',] }],
    asyncSave: [{ type: Input }],
    configuration: [{ type: Input }],
    onEscapeKeyPressed: [{ type: HostListener, args: ['document:keydown.escape',] }]
};
if (false) {
    /** @type {?} */
    LoginConfigComponent.prototype.save;
    /** @type {?} */
    LoginConfigComponent.prototype.back;
    /** @type {?} */
    LoginConfigComponent.prototype.fileInput;
    /** @type {?} */
    LoginConfigComponent.prototype.showPrevisu;
    /** @type {?} */
    LoginConfigComponent.prototype.saving;
    /** @type {?} */
    LoginConfigComponent.prototype.isSaved;
    /** @type {?} */
    LoginConfigComponent.prototype._configuration;
    /** @type {?} */
    LoginConfigComponent.prototype._asyncSave;
    /** @type {?} */
    LoginConfigComponent.prototype._timeoutShow;
    /** @type {?} */
    LoginConfigComponent.prototype._DomSanitizationService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4tY29uZmlnLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BsaWJyaWNpZWwvbHMtY29tcG9zYW50cy8iLCJzb3VyY2VzIjpbImxpYi9wYWdlcy9sb2dpbi9sb2dpbi1jb25maWcvbG9naW4tY29uZmlnLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUM5RixPQUFPLEVBQUMsb0JBQW9CLEVBQW1CLE1BQU0sc0JBQXNCLENBQUM7QUFDNUUsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLDJCQUEyQixDQUFDO0FBT3ZELE1BQU0sT0FBTyxvQkFBb0I7Ozs7SUFhL0IsWUFBbUIsdUJBQXFDO1FBQXJDLDRCQUF1QixHQUF2Qix1QkFBdUIsQ0FBYztRQVZ4RCxTQUFJLEdBQW1DLElBQUksWUFBWSxFQUFvQixDQUFDO1FBRTVFLFNBQUksR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUk3QyxnQkFBVyxHQUFHLEtBQUssQ0FBQztRQUNwQixXQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ2YsWUFBTyxHQUFHLEtBQUssQ0FBQztRQU9oQixlQUFVLEdBQUcsS0FBSyxDQUFDO1FBSmpCLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztJQUNoRSxDQUFDOzs7O0lBTXNCLE9BQU87UUFDNUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7UUFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDcEIsWUFBWSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNoQyxJQUFJLENBQUMsWUFBWSxHQUFHLFVBQVU7OztRQUFDLEdBQUcsRUFBRTtZQUNsQyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUN2QixDQUFDLEdBQUUsSUFBSSxDQUFDLENBQUM7SUFDWCxDQUFDOzs7OztJQUVELElBQ0ksU0FBUyxDQUFDLEtBQUs7UUFDakIsSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLEtBQUssS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUN6RSxDQUFDOzs7OztJQUVELElBQ0ksYUFBYSxDQUFDLE1BQU07UUFDdEIsSUFBSSxDQUFDLGNBQWMsR0FBRyxPQUFPLE1BQU0sS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNqRixDQUFDOzs7OztJQUVNLGVBQWUsQ0FBQyxLQUFVO1FBQy9CLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUMxQixDQUFDOzs7O0lBR00sa0JBQWtCO1FBQ3ZCLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0lBQzNCLENBQUM7Ozs7O0lBRU0sYUFBYSxDQUFDLEtBQUs7O2NBQ2xCLElBQUksR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7O2NBQzVCLE1BQU0sR0FBRyxJQUFJLFVBQVUsRUFBRTtRQUUvQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTTs7O1FBQUUsR0FBRyxFQUFFO1lBQ25DLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDeEMsYUFBYTtZQUNiLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDOUMsQ0FBQyxHQUFFLEtBQUssQ0FBQyxDQUFDO1FBRVYsSUFBSSxJQUFJLEVBQUU7WUFDUixNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzVCO0lBQ0gsQ0FBQzs7OztJQUVELGlCQUFpQjtRQUNmLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQztRQUN4QyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO0lBQzFDLENBQUM7Ozs7SUFFTSxPQUFPO1FBQ1osSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDekIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLG9CQUFvQixDQUFDLENBQUM7SUFDM0QsQ0FBQzs7OztJQUVNLE1BQU07UUFDWCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDcEMsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1NBQ3BCO2FBQU07WUFDTCxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDaEI7SUFDSCxDQUFDOzs7O0lBRU0sTUFBTTtRQUNYLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDbkIsQ0FBQzs7O1lBMUZGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsaUJBQWlCO2dCQUMzQix5a1BBQTRDOzthQUU3Qzs7OztZQU5PLFlBQVk7OzttQkFTakIsTUFBTTttQkFFTixNQUFNO3dCQUdOLFNBQVMsU0FBQyxXQUFXO3NCQWNyQixZQUFZLFNBQUMsT0FBTzt3QkFTcEIsS0FBSzs0QkFLTCxLQUFLO2lDQVNMLFlBQVksU0FBQyx5QkFBeUI7Ozs7SUExQ3ZDLG9DQUM0RTs7SUFDNUUsb0NBQzZDOztJQUU3Qyx5Q0FBa0M7O0lBRWxDLDJDQUFvQjs7SUFDcEIsc0NBQWU7O0lBQ2YsdUNBQWdCOztJQU1oQiw4Q0FBaUM7O0lBQ2pDLDBDQUFtQjs7SUFDbkIsNENBQWE7O0lBTkQsdURBQTRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSG9zdExpc3RlbmVyLCBJbnB1dCwgT3V0cHV0LCBWaWV3Q2hpbGR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtkZWZhdWx0Q29uZmlndXJhdGlvbiwgTG9naW5Db25maWdNb2RlbH0gZnJvbSAnLi9sb2dpbi1jb25maWcubW9kZWwnO1xuaW1wb3J0IHtEb21TYW5pdGl6ZXJ9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdscy1sb2dpbi1jb25maWcnLFxuICB0ZW1wbGF0ZVVybDogJy4vbG9naW4tY29uZmlnLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbG9naW4tY29uZmlnLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTG9naW5Db25maWdDb21wb25lbnQge1xuXG4gIEBPdXRwdXQoKVxuICBzYXZlOiBFdmVudEVtaXR0ZXI8TG9naW5Db25maWdNb2RlbD4gPSBuZXcgRXZlbnRFbWl0dGVyPExvZ2luQ29uZmlnTW9kZWw+KCk7XG4gIEBPdXRwdXQoKVxuICBiYWNrOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAVmlld0NoaWxkKCdmaWxlSW5wdXQnKSBmaWxlSW5wdXQ7XG5cbiAgc2hvd1ByZXZpc3UgPSBmYWxzZTtcbiAgc2F2aW5nID0gZmFsc2U7XG4gIGlzU2F2ZWQgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgX0RvbVNhbml0aXphdGlvblNlcnZpY2U6IERvbVNhbml0aXplcikge1xuICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0Q29uZmlndXJhdGlvbik7XG4gIH1cblxuICBfY29uZmlndXJhdGlvbjogTG9naW5Db25maWdNb2RlbDtcbiAgX2FzeW5jU2F2ZSA9IGZhbHNlO1xuICBfdGltZW91dFNob3c7XG5cbiAgQEhvc3RMaXN0ZW5lcignc2F2ZWQnKSBvblNhdmVkKCkge1xuICAgIHRoaXMuaXNTYXZlZCA9IHRydWU7XG4gICAgdGhpcy5zYXZpbmcgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dFNob3cpO1xuICAgIHRoaXMuX3RpbWVvdXRTaG93ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmlzU2F2ZWQgPSBmYWxzZTtcbiAgICB9LCAzMDAwKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCBhc3luY1NhdmUoYXN5bmMpIHtcbiAgICB0aGlzLl9hc3luY1NhdmUgPSB0eXBlb2YgYXN5bmMgPT09ICdzdHJpbmcnID8gYXN5bmMgPT09ICd0cnVlJyA6IGFzeW5jO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IGNvbmZpZ3VyYXRpb24oY29uZmlnKSB7XG4gICAgdGhpcy5fY29uZmlndXJhdGlvbiA9IHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShjb25maWcpIDogY29uZmlnO1xuICB9XG5cbiAgcHVibGljIHN0b3BQcm9wYWdhdGlvbihldmVudDogYW55KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDprZXlkb3duLmVzY2FwZScpXG4gIHB1YmxpYyBvbkVzY2FwZUtleVByZXNzZWQoKSB7XG4gICAgdGhpcy5zaG93UHJldmlzdSA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIG9uRmlsZUNoYW5nZWQoZXZlbnQpIHtcbiAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cbiAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24uaW1nTmFtZSA9IGZpbGUubmFtZTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24uaW1nRGF0YSA9IHJlYWRlci5yZXN1bHQ7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZUN1cnJlbnRGaWxlKCkge1xuICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24uaW1nRGF0YSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmZpbGVJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlID0gJyc7XG4gIH1cblxuICBwdWJsaWMgb25SZXNldCgpIHtcbiAgICB0aGlzLnJlbW92ZUN1cnJlbnRGaWxlKCk7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLl9jb25maWd1cmF0aW9uLCBkZWZhdWx0Q29uZmlndXJhdGlvbik7XG4gIH1cblxuICBwdWJsaWMgb25TYXZlKCkge1xuICAgIHRoaXMuc2F2ZS5lbWl0KHRoaXMuX2NvbmZpZ3VyYXRpb24pO1xuICAgIGlmICh0aGlzLl9hc3luY1NhdmUpIHtcbiAgICAgIHRoaXMuc2F2aW5nID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vblNhdmVkKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uQmFjaygpIHtcbiAgICB0aGlzLmJhY2suZW1pdCgpO1xuICB9XG5cbn1cbiJdfQ==