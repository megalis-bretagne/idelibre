/**
 * @fileoverview added by tsickle
 * Generated from: lib/pages/login/component/login-config/login-config.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, HostListener, Input, Output, ViewChild } from '@angular/core';
import { defaultConfiguration } from './login-config.model';
import { DomSanitizer } from '@angular/platform-browser';
import { Weight } from '../../../../ui-concepts/weight';
import { CommonIcons } from '../../../../icons/common-icons';
import { CommonMessages } from '../../../../i18n/common-messages';
export class LoginConfigComponent {
    /**
     * @param {?} _DomSanitizationService
     */
    constructor(_DomSanitizationService) {
        this._DomSanitizationService = _DomSanitizationService;
        this.save = new EventEmitter();
        this.back = new EventEmitter();
        this.previewChanges = false;
        this.saving = false;
        this.isSaved = false;
        this.weight = Weight;
        this.commonIcons = CommonIcons;
        this.commonMessages = CommonMessages;
        this._asyncSave = false;
        this._configuration = Object.assign({}, defaultConfiguration);
    }
    /**
     * @return {?}
     */
    onSaved() {
        this.isSaved = true;
        this.saving = false;
        clearTimeout(this._timeoutShow);
        this._timeoutShow = setTimeout((/**
         * @return {?}
         */
        () => {
            this.isSaved = false;
        }), 3000);
    }
    /**
     * @param {?} async
     * @return {?}
     */
    set asyncSave(async) {
        this._asyncSave = typeof async === 'string' ? async === 'true' : async;
    }
    /**
     * @param {?} config
     * @return {?}
     */
    set configuration(config) {
        this._configuration = typeof config === 'string' ? JSON.parse(config) : config;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    stopPropagation(event) {
        event.stopPropagation();
    }
    /**
     * @return {?}
     */
    onEscapeKeyPressed() {
        this.previewChanges = false;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onFileChanged(event) {
        /** @type {?} */
        const file = event.target.files[0];
        /** @type {?} */
        const reader = new FileReader();
        reader.addEventListener('load', (/**
         * @return {?}
         */
        () => {
            this._configuration.imgName = file.name;
            // @ts-ignore
            this._configuration.imgData = reader.result;
        }), false);
        if (file) {
            reader.readAsDataURL(file);
        }
    }
    /**
     * @return {?}
     */
    removeCurrentFile() {
        this._configuration.imgData = undefined;
        this.fileInput.nativeElement.value = '';
    }
    /**
     * @return {?}
     */
    onReset() {
        this.removeCurrentFile();
        Object.assign(this._configuration, defaultConfiguration);
    }
    /**
     * @return {?}
     */
    onSave() {
        this.save.emit(this._configuration);
        if (this._asyncSave) {
            this.saving = true;
        }
        else {
            this.onSaved();
        }
    }
    /**
     * @return {?}
     */
    onBack() {
        this.back.emit();
    }
}
LoginConfigComponent.decorators = [
    { type: Component, args: [{
                selector: 'ls-login-config',
                template: "<h3>Personnalisation de la page de connexion</h3>\n\n<span class=\"alert alert-info\">\n  <i class=\"fa fa-info-circle\"></i>\n  Rappel : les champs renseign\u00E9s ci-dessous sont visibles de tous les utilisateurs\n</span>\n\n<div class=\"action-buttons\">\n  <div class=\"left-buttons\">\n\n    <ls-button-go-back (click)=\"onBack()\"></ls-button-go-back>\n    <ls-button (click)=\"previewChanges = true\" [icon]=\"commonIcons.PREVIEW_ICON\" [title]=\"commonMessages.PREVIEW\"\n               [weight]=\"weight.SECONDARY\">\n    </ls-button>\n    <ls-button (click)=\"onReset()\" [icon]=\"commonIcons.RE_INIT_ICON\" [title]=\"commonMessages.RE_INIT\"\n               [weight]=\"weight.SECONDARY\">\n    </ls-button>\n    <ls-button-save (click)=\"onSave()\" [processing]=\"saving\"></ls-button-save>\n\n    <span *ngIf=\"isSaved\" class=\"text text-success\"><i class=\"fa fa-check\"></i> Configuration enregistr\u00E9e</span>\n  </div>\n</div>\n\n<div class=\"content-div\">\n  <div>\n    <div>\n      <h3>Collectivit\u00E9 / structure</h3>\n      <p>Activer l'espace de personnalisation r\u00E9serv\u00E9 \u00E0 la collectivit\u00E9 / structure ?</p>\n      <div>\n        <input [(ngModel)]=\"_configuration.showCustom\" [value]=\"true\" checked class=\"btn-radio\" id=\"show-custom-yes\"\n               name=\"show-custom\"\n               type=\"radio\">\n        <label for=\"show-custom-yes\">\n          Activer\n        </label>\n        <input [(ngModel)]=\"_configuration.showCustom\" [value]=\"false\" class=\"btn-radio\" id=\"show-custom-no\"\n               name=\"show-custom\"\n               type=\"radio\">\n        <label class=\"margin-left-16\" for=\"show-custom-no\">\n          D\u00E9sactiver\n        </label>\n      </div>\n    </div>\n    <div [class.disabled]=\"!_configuration.showCustom\">\n      <h4>Logo de la collectivit\u00E9</h4>\n      <input\n        #fileInput\n        (change)=\"onFileChanged($event)\" style=\"display: none\"\n        type=\"file\">\n      <button (click)=\"fileInput.click()\" *ngIf=\"!_configuration.imgData\" class=\"btn btn-primary\">\n        <i class=\"fa fa-plus-circle\"></i>\n        Ajouter une image\n      </button>\n      <div *ngIf=\"_configuration.imgData\" class=\"image-informations\">\n        <div>\n          <i class=\"fa fa-image\"></i>\n          {{_configuration.imgName}}\n        </div>\n        <div>\n          <i (click)=\"removeCurrentFile()\" title=\"Supprimer le logo\" class=\"fa fa-trash fa-trash-alt\"></i>\n          <i (click)=\"fileInput.click()\" title=\"Modifier le logo\" class=\"fa fa-refresh fa-sync\"></i>\n        </div>\n      </div>\n    </div>\n    <div [class.disabled]=\"!_configuration.showCustom\">\n      <h4>\n        Couleurs\n      </h4>\n      <div class=\"d-flex\">\n        <div class=\"color-picker color-background\">\n          <label for=\"background-color\">Couleur de fond</label>\n          <ls-color-picker id=\"background-color\" [(ngModel)]=\"_configuration.colorBackground\"></ls-color-picker>\n        </div>\n        <div class=\"color-picker color-text\">\n          <label for=\"text-color\">Couleur du sous-titre</label>\n          <ls-color-picker id=\"text-color\" [(ngModel)]=\"_configuration.colorText\"></ls-color-picker>\n        </div>\n      </div>\n    </div>\n\n    <div [class.disabled]=\"!_configuration.showCustom\">\n      <label class=\"h4\" for=\"soustitre\">\n        Sous-titre\n      </label>\n      <ls-max-length-textarea [(ngModel)]=\"_configuration.subText\" id=\"soustitre\" maxlength=\"300\"\n                              name=\"soustitre\"></ls-max-length-textarea>\n    </div>\n  </div>\n  <div>\n    <div>\n      <h3>Message d'informations</h3>\n      <p>Afficher un message d'information ?</p>\n      <div>\n        <input [(ngModel)]=\"_configuration.showInformation\" [value]=\"true\" checked class=\"btn-radio\" id=\"show-info-yes\"\n               name=\"show-info\"\n               type=\"radio\">\n        <label for=\"show-info-yes\">\n          Afficher\n        </label>\n        <input [(ngModel)]=\"_configuration.showInformation\" [value]=\"false\" class=\"btn-radio\" id=\"show-info-no\"\n               name=\"show-info\"\n               type=\"radio\">\n        <label class=\"margin-left-16\" for=\"show-info-no\">\n          Ne pas afficher\n        </label>\n      </div>\n\n    </div>\n\n    <div [class.disabled]=\"!_configuration.showInformation\">\n      <label for=\"message-text\">Texte du message :</label>\n      <ls-max-length-textarea [(ngModel)]=\"_configuration.informationText\" id=\"message-text\" maxlength=\"300\"\n                              name=\"message-text\"></ls-max-length-textarea>\n    </div>\n\n    <div [class.disabled]=\"!_configuration.showInformation\">\n      <h4>Niveau d'alerte du message</h4>\n      <div class=\"\">\n        <input [(ngModel)]=\"_configuration.informationType\" id=\"exampleRadios1\" name=\"exampleRadios\" type=\"radio\"\n               value=\"info\">\n        <label class=\" alert alert-info margin-left-16\" for=\"exampleRadios1\">\n          <i class=\"fa fa-info-circle\">\n          </i>\n          Information\n        </label>\n      </div>\n      <div class=\"\">\n        <input [(ngModel)]=\"_configuration.informationType\" id=\"exampleRadios2\" name=\"exampleRadios\" type=\"radio\"\n               value=\"warning\">\n        <label class=\"alert alert-warning margin-left-16\" for=\"exampleRadios2\">\n          <i class=\"fa fa-exclamation-circle\"></i>\n          Alerte\n        </label>\n      </div>\n      <div class=\"\">\n        <input [(ngModel)]=\"_configuration.informationType \" id=\"exampleRadios3\" name=\"exampleRadios\" type=\"radio\"\n               value=\"danger\">\n        <label class=\"alert alert-danger margin-left-16\" for=\"exampleRadios3\">\n          <i class=\"fa fa-exclamation-triangle\"></i>\n          Danger\n        </label>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n<div [class.show]=\"previewChanges\" class=\"preview-modal\">\n  <div (click)=\"previewChanges = false\" class=\"preview-background\">\n    <div (click)=\"stopPropagation($event)\" class=\"preview-body\">\n      <h3>Pr\u00E9visualisation de la page de connexion</h3>\n\n      <div class=\"login-previsu\">\n        <div [style.background-color]=\"_configuration.colorBackground\" class=\"login-previsu-sidebar\"\n             [style.opacity]=\"_configuration.showCustom ? 1 : 0\">\n          <img *ngIf=\"_configuration.imgData\"\n               [src]=\"_DomSanitizationService.bypassSecurityTrustUrl(_configuration.imgData)\" alt=\"Image preview...\"\n               src=\"\">\n          <div [style.color]=\"_configuration.colorText\">{{_configuration.subText}}</div>\n        </div>\n        <div class=\"login-previsu-content\">\n          <span *ngIf=\"_configuration.showInformation && _configuration.informationText\"\n                [ngSwitch]=\"_configuration.informationType\"\n                [ngClass]=\"'alert-' + _configuration.informationType\" class=\"alert\">\n            <i *ngSwitchCase=\"'info'\" class=\"fa fa-info-circle\"></i>\n            <i *ngSwitchCase=\"'warning'\" class=\"fa fa-exclamation-circle\"></i>\n            <i *ngSwitchCase=\"'danger'\" class=\"fa fa-exclamation-triangle\"></i>\n            {{_configuration.informationText}}\n          </span>\n        </div>\n        <div class=\"login-previsu-footer\">\n\n        </div>\n        <div class=\"login-previsu-footer\">\n\n        </div>\n      </div>\n      <i (click)=\"previewChanges = false\" class=\"fa fa-times close-icon\"></i>\n    </div>\n  </div>\n\n</div>\n",
                styles: [".alert{display:inline-block;margin-bottom:.6rem;margin-top:.6rem}.action-buttons{-ms-flex-pack:justify;-webkit-box-pack:justify;display:-webkit-box;display:-ms-flexbox;display:flex;justify-content:space-between}.action-buttons>:first-child *{margin-right:15px}textarea{min-height:110px}@media screen and (max-width:1280px){.content-div{-ms-flex-direction:column;-webkit-box-direction:normal;-webkit-box-orient:vertical;flex-direction:column}.content-div>*{margin:30px 40px}}@media screen and (min-width:1280px){.content-div>:first-child{border-right:1px solid rgba(0,0,0,.15);margin:30px 40px;padding-right:30px}.content-div>*{-ms-flex-direction:column;-webkit-box-direction:normal;-webkit-box-orient:vertical;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:column;margin:30px 40px 30px 0;width:50%}.content-div>*>:nth-child(n+2){margin-top:20px}}.content-div{-ms-flex-pack:start;-webkit-box-pack:start;-webkit-box-shadow:0 0 6px rgba(0,0,0,.15);background-color:#fff;box-shadow:0 0 6px rgba(0,0,0,.15);display:-webkit-box;display:-ms-flexbox;display:flex;font-family:Ubuntu,sans-serif;justify-content:flex-start;margin-top:20px}.content-div .h4,.content-div h4{font-size:15px;font-weight:700}.content-div .color-picker{-ms-flex-direction:column;-webkit-box-direction:normal;-webkit-box-orient:vertical;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:column}.content-div .color-picker:first-child{margin-right:30px}.content-div .color-picker span{font-size:15px}.content-div textarea{margin-right:30px}.content-div .margin-left-16{margin-left:16px}.content-div .disabled{opacity:.25;pointer-events:none}.content-div>div>div:first-child{margin-bottom:20px}.preview-modal:not(.show){display:none}.preview-modal.show{height:100vh;left:0;position:fixed;top:0;width:100vw;z-index:10000}.preview-modal.show .preview-background{-ms-flex-align:center;-ms-flex-pack:center;-webkit-box-align:center;-webkit-box-pack:center;align-items:center;background-color:rgba(0,0,0,.4);display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;justify-content:center;width:100%}.preview-modal.show .preview-body{-ms-grid-columns:1fr;-ms-grid-rows:50px 1fr;background-color:#fff;display:-ms-grid;display:grid;grid-template:\"title\" 50px \"previsu\" 1fr/1fr;height:70vh;padding:30px;position:relative;width:70vw}.preview-modal.show .preview-body>h3{-ms-grid-column:1;-ms-grid-row:1;grid-area:title}.preview-modal.show .close-icon{cursor:pointer;font-size:18px;position:absolute;right:25px;top:25px}.login-previsu{-ms-grid-column:1;-ms-grid-columns:35% 1fr;-ms-grid-row:2;-ms-grid-rows:1fr 20px;-webkit-box-shadow:0 0 6px rgba(0,0,0,.15);box-shadow:0 0 6px rgba(0,0,0,.15);display:-ms-grid;display:grid;grid-area:previsu;grid-template:\"sidebar  content\" 1fr \"footer   footer\" 20px/35% 1fr;height:95%;min-height:95%}.login-previsu .login-previsu-content{-ms-grid-column:2;-ms-grid-row:1;grid-area:content}.login-previsu .login-previsu-sidebar{-ms-flex-align:center;-ms-flex-direction:column;-ms-flex-pack:center;-ms-grid-column:1;-ms-grid-row:1;-webkit-box-align:center;-webkit-box-direction:normal;-webkit-box-orient:vertical;-webkit-box-pack:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:column;font-size:10px;grid-area:sidebar;justify-content:center;padding:30px;text-align:center}.login-previsu .login-previsu-sidebar div{padding-top:1rem}.login-previsu .login-previsu-footer{-ms-grid-column:1;-ms-grid-column-span:2;-ms-grid-row:2;background-color:#222;grid-area:footer}.login-previsu .alert{left:0;margin-left:auto;margin-right:auto;position:fixed;right:0;text-align:center;width:45vw}.login-previsu img{display:block;max-height:20vh;max-width:90%;width:auto}@media screen and (min-width:0 \\0){.login-previsu img{-ms-flex:1;-webkit-box-flex:1;flex:1;height:auto}.login-previsu div{max-width:100%}}.image-informations{display:-webkit-box;display:-ms-flexbox;display:flex}.image-informations div:first-child{background-color:#f7f7f7;max-width:50%;padding:19px;word-break:break-all}.image-informations div:nth-child(2){-ms-flex-direction:column;-webkit-box-direction:normal;-webkit-box-orient:vertical;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:column;padding-left:25px}.image-informations i{-webkit-transition:.1s;cursor:pointer;margin:auto;transition:.1s}.image-informations .fa-trash-alt:hover{color:var(--danger)}.image-informations .fa-sync:hover{color:var(--primary)}.color-picker>span{margin-bottom:5px}"]
            }] }
];
/** @nocollapse */
LoginConfigComponent.ctorParameters = () => [
    { type: DomSanitizer }
];
LoginConfigComponent.propDecorators = {
    save: [{ type: Output }],
    back: [{ type: Output }],
    fileInput: [{ type: ViewChild, args: ['fileInput',] }],
    onSaved: [{ type: HostListener, args: ['saved',] }],
    asyncSave: [{ type: Input }],
    configuration: [{ type: Input }],
    onEscapeKeyPressed: [{ type: HostListener, args: ['document:keydown.escape',] }]
};
if (false) {
    /** @type {?} */
    LoginConfigComponent.prototype.save;
    /** @type {?} */
    LoginConfigComponent.prototype.back;
    /** @type {?} */
    LoginConfigComponent.prototype.fileInput;
    /** @type {?} */
    LoginConfigComponent.prototype.previewChanges;
    /** @type {?} */
    LoginConfigComponent.prototype.saving;
    /** @type {?} */
    LoginConfigComponent.prototype.isSaved;
    /** @type {?} */
    LoginConfigComponent.prototype.weight;
    /** @type {?} */
    LoginConfigComponent.prototype.commonIcons;
    /** @type {?} */
    LoginConfigComponent.prototype.commonMessages;
    /** @type {?} */
    LoginConfigComponent.prototype._configuration;
    /** @type {?} */
    LoginConfigComponent.prototype._asyncSave;
    /** @type {?} */
    LoginConfigComponent.prototype._timeoutShow;
    /** @type {?} */
    LoginConfigComponent.prototype._DomSanitizationService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4tY29uZmlnLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIvYnVpbGRzL291dGlscy9jaGFydGVncmFwaGlxdWUvbGlicmFpcmllLWFuZ3VsYXIvbGliL3NyYy8iLCJzb3VyY2VzIjpbImxpYi9wYWdlcy9sb2dpbi9jb21wb25lbnQvbG9naW4tY29uZmlnL2xvZ2luLWNvbmZpZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDaEcsT0FBTyxFQUFFLG9CQUFvQixFQUFvQixNQUFNLHNCQUFzQixDQUFDO0FBQzlFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDeEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQzdELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQU9sRSxNQUFNLE9BQU8sb0JBQW9COzs7O0lBZ0IvQixZQUFtQix1QkFBcUM7UUFBckMsNEJBQXVCLEdBQXZCLHVCQUF1QixDQUFjO1FBYnhELFNBQUksR0FBbUMsSUFBSSxZQUFZLEVBQW9CLENBQUM7UUFFNUUsU0FBSSxHQUFzQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBSTdDLG1CQUFjLEdBQUcsS0FBSyxDQUFDO1FBQ3ZCLFdBQU0sR0FBRyxLQUFLLENBQUM7UUFDZixZQUFPLEdBQUcsS0FBSyxDQUFDO1FBQ2hCLFdBQU0sR0FBRyxNQUFNLENBQUM7UUFDaEIsZ0JBQVcsR0FBRyxXQUFXLENBQUM7UUFDMUIsbUJBQWMsR0FBRyxjQUFjLENBQUM7UUFPaEMsZUFBVSxHQUFHLEtBQUssQ0FBQztRQUpqQixJQUFJLENBQUMsY0FBYyxHQUFHLE1B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aUNBU0wsWUFBWSxTQUFDLHlCQUF5Qjs7OztJQTdDdkMsb0NBQzRFOztJQUM1RSxvQ0FDNkM7O0lBRTdDLHlDQUFrQzs7SUFFbEMsOENBQXVCOztJQUN2QixzQ0FBZTs7SUFDZix1Q0FBZ0I7O0lBQ2hCLHNDQUFnQjs7SUFDaEIsMkNBQTBCOztJQUMxQiw4Q0FBZ0M7O0lBTWhDLDhDQUFpQzs7SUFDakMsMENBQW1COztJQUNuQiw0Q0FBYTs7SUFORCx1REFBNEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSG9zdExpc3RlbmVyLCBJbnB1dCwgT3V0cHV0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGRlZmF1bHRDb25maWd1cmF0aW9uLCBMb2dpbkNvbmZpZ01vZGVsIH0gZnJvbSAnLi9sb2dpbi1jb25maWcubW9kZWwnO1xuaW1wb3J0IHsgRG9tU2FuaXRpemVyIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG5pbXBvcnQgeyBXZWlnaHQgfSBmcm9tICcuLi8uLi8uLi8uLi91aS1jb25jZXB0cy93ZWlnaHQnO1xuaW1wb3J0IHsgQ29tbW9uSWNvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9pY29ucy9jb21tb24taWNvbnMnO1xuaW1wb3J0IHsgQ29tbW9uTWVzc2FnZXMgfSBmcm9tICcuLi8uLi8uLi8uLi9pMThuL2NvbW1vbi1tZXNzYWdlcyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xzLWxvZ2luLWNvbmZpZycsXG4gIHRlbXBsYXRlVXJsOiAnLi9sb2dpbi1jb25maWcuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9sb2dpbi1jb25maWcuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMb2dpbkNvbmZpZ0NvbXBvbmVudCB7XG5cbiAgQE91dHB1dCgpXG4gIHNhdmU6IEV2ZW50RW1pdHRlcjxMb2dpbkNvbmZpZ01vZGVsPiA9IG5ldyBFdmVudEVtaXR0ZXI8TG9naW5Db25maWdNb2RlbD4oKTtcbiAgQE91dHB1dCgpXG4gIGJhY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBWaWV3Q2hpbGQoJ2ZpbGVJbnB1dCcpIGZpbGVJbnB1dDtcblxuICBwcmV2aWV3Q2hhbmdlcyA9IGZhbHNlO1xuICBzYXZpbmcgPSBmYWxzZTtcbiAgaXNTYXZlZCA9IGZhbHNlO1xuICB3ZWlnaHQgPSBXZWlnaHQ7XG4gIGNvbW1vbkljb25zID0gQ29tbW9uSWNvbnM7XG4gIGNvbW1vbk1lc3NhZ2VzID0gQ29tbW9uTWVzc2FnZXM7XG5cbiAgY29uc3RydWN0b3IocHVibGljIF9Eb21TYW5pdGl6YXRpb25TZXJ2aWNlOiBEb21TYW5pdGl6ZXIpIHtcbiAgICB0aGlzLl9jb25maWd1cmF0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdENvbmZpZ3VyYXRpb24pO1xuICB9XG5cbiAgX2NvbmZpZ3VyYXRpb246IExvZ2luQ29uZmlnTW9kZWw7XG4gIF9hc3luY1NhdmUgPSBmYWxzZTtcbiAgX3RpbWVvdXRTaG93O1xuXG4gIEBIb3N0TGlzdGVuZXIoJ3NhdmVkJykgb25TYXZlZCgpIHtcbiAgICB0aGlzLmlzU2F2ZWQgPSB0cnVlO1xuICAgIHRoaXMuc2F2aW5nID0gZmFsc2U7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRTaG93KTtcbiAgICB0aGlzLl90aW1lb3V0U2hvdyA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5pc1NhdmVkID0gZmFsc2U7XG4gICAgfSwgMzAwMCk7XG4gIH1cblxuICBASW5wdXQoKVxuICBzZXQgYXN5bmNTYXZlKGFzeW5jKSB7XG4gICAgdGhpcy5fYXN5bmNTYXZlID0gdHlwZW9mIGFzeW5jID09PSAnc3RyaW5nJyA/IGFzeW5jID09PSAndHJ1ZScgOiBhc3luYztcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIHNldCBjb25maWd1cmF0aW9uKGNvbmZpZykge1xuICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24gPSB0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoY29uZmlnKSA6IGNvbmZpZztcbiAgfVxuXG4gIHB1YmxpYyBzdG9wUHJvcGFnYXRpb24oZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6a2V5ZG93bi5lc2NhcGUnKVxuICBwdWJsaWMgb25Fc2NhcGVLZXlQcmVzc2VkKCkge1xuICAgIHRoaXMucHJldmlld0NoYW5nZXMgPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBvbkZpbGVDaGFuZ2VkKGV2ZW50KSB7XG4gICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICB0aGlzLl9jb25maWd1cmF0aW9uLmltZ05hbWUgPSBmaWxlLm5hbWU7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0aGlzLl9jb25maWd1cmF0aW9uLmltZ0RhdGEgPSByZWFkZXIucmVzdWx0O1xuICAgIH0sIGZhbHNlKTtcblxuICAgIGlmIChmaWxlKSB7XG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICB9XG4gIH1cblxuICByZW1vdmVDdXJyZW50RmlsZSgpIHtcbiAgICB0aGlzLl9jb25maWd1cmF0aW9uLmltZ0RhdGEgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5maWxlSW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSA9ICcnO1xuICB9XG5cbiAgcHVibGljIG9uUmVzZXQoKSB7XG4gICAgdGhpcy5yZW1vdmVDdXJyZW50RmlsZSgpO1xuICAgIE9iamVjdC5hc3NpZ24odGhpcy5fY29uZmlndXJhdGlvbiwgZGVmYXVsdENvbmZpZ3VyYXRpb24pO1xuICB9XG5cbiAgcHVibGljIG9uU2F2ZSgpIHtcbiAgICB0aGlzLnNhdmUuZW1pdCh0aGlzLl9jb25maWd1cmF0aW9uKTtcbiAgICBpZiAodGhpcy5fYXN5bmNTYXZlKSB7XG4gICAgICB0aGlzLnNhdmluZyA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub25TYXZlZCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbkJhY2soKSB7XG4gICAgdGhpcy5iYWNrLmVtaXQoKTtcbiAgfVxuXG59XG4iXX0=