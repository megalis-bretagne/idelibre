/**
 * @fileoverview added by tsickle
 * Generated from: lib/structure/sidebar/sidebar.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, HostBinding, Input, Renderer2 } from '@angular/core';
import { SidebarService } from './sidebar.service';
export class SidebarComponent {
    /**
     * @param {?} el
     * @param {?} sidebarService
     * @param {?} renderer
     */
    constructor(el, sidebarService, renderer) {
        this.el = el;
        this.sidebarService = sidebarService;
        this.renderer = renderer;
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        this.mainMenuItems = this.el.nativeElement.querySelectorAll('.main-menu > li');
        this.subMenuLists = this.el.nativeElement.querySelectorAll('.main-menu > li > .sub-menu');
        for (const mainMenuItem of this.mainMenuItems) {
            this.renderer.listen(mainMenuItem, 'mouseover', (/**
             * @return {?}
             */
            () => {
                mainMenuItem.classList.add('over-menu');
                /** @type {?} */
                let maxWidth = 200;
                /** @type {?} */
                const menuItem = mainMenuItem.querySelector('a');
                /** @type {?} */
                const menuItemSpan = mainMenuItem.querySelector('a > span');
                /** @type {?} */
                const subMenu = mainMenuItem.querySelector('.sub-menu');
                /** @type {?} */
                const position = mainMenuItem.getBoundingClientRect();
                if (this.isCollapsed) {
                    menuItem.style.transform = 'translateY(' + position.top + 'px)';
                    maxWidth = menuItemSpan.clientWidth > maxWidth ? menuItemSpan.clientWidth : maxWidth;
                }
                if (this.isCollapsed || !mainMenuItem.classList.contains('active')) {
                    /** @type {?} */
                    const Xpx = this.isCollapsed ? 3.125 : 12.5;
                    subMenu.style.transform = 'translate3d(' + Xpx + 'rem, ' + position.top + 'px, 0px)';
                    maxWidth = subMenu.clientWidth > maxWidth ? subMenu.clientWidth : maxWidth;
                }
                if (this.isCollapsed) {
                    if (menuItemSpan.clientWidth < maxWidth) {
                        menuItemSpan.style.width = maxWidth + 'px';
                    }
                    if (subMenu.clientWidth < maxWidth) {
                        subMenu.style.width = maxWidth + 'px';
                    }
                }
            }));
            this.renderer.listen(mainMenuItem, 'mouseleave', (/**
             * @return {?}
             */
            () => {
                mainMenuItem.classList.remove('over-menu');
                mainMenuItem.querySelector('a').style.transform = '';
                mainMenuItem.querySelector('.sub-menu').style.transform = '';
                mainMenuItem.querySelector('.sub-menu').style.width = '';
                mainMenuItem.querySelector('a > span').style.width = '';
            }));
        }
        this.setCollapsedClassEvent();
        this.setMainMenuEvents();
        this.setSubMenuEvents();
    }
    /**
     * @return {?}
     */
    setCollapsedClassEvent() {
        if (this.el.nativeElement.className === 'collapsed') {
            this.isCollapsed = true;
        }
        this.changes = new MutationObserver((/**
         * @param {?} mutations
         * @return {?}
         */
        (mutations) => {
            mutations.forEach((/**
             * @param {?} mutation
             * @return {?}
             */
            (mutation) => this.changed(mutation)));
        }));
        this.changes.observe(this.el.nativeElement, {
            attributes: true,
            childList: true,
            characterData: true
        });
    }
    /**
     * @param {?} event
     * @return {?}
     */
    changed(event) {
        if (event.attributeName === 'class') {
            this.isCollapsed = event.target.className.indexOf('collapsed') !== -1;
            this.sidebarService.collapsed(this.isCollapsed);
        }
    }
    /**
     * @return {?}
     */
    setMainMenuEvents() {
        /** @type {?} */
        const mainMenu = this.el.nativeElement.querySelectorAll('.main-menu');
        for (const menu of mainMenu) {
            for (const child of menu.children) {
                this.renderer.listen(child, 'click', (/**
                 * @return {?}
                 */
                () => {
                    /** @type {?} */
                    const activeItems = this.el.nativeElement.querySelectorAll('.active');
                    // We remove all active class
                    for (const childlist of activeItems) {
                        if (childlist.parentElement.parentElement !== child) {
                            childlist.classList.remove('active');
                        }
                    }
                    // We set active to current item
                    child.classList.add('active');
                    if (!this.isCollapsed) {
                        child.querySelector('a').style.transform = '';
                        child.querySelector('.sub-menu').style.transform = '';
                    }
                }));
            }
        }
    }
    /**
     * @return {?}
     */
    setSubMenuEvents() {
        /** @type {?} */
        const subMenus = this.el.nativeElement.querySelectorAll('.sub-menu li');
        for (const submenu of subMenus) {
            this.renderer.listen(submenu, 'click', (/**
             * @return {?}
             */
            () => {
                // We remove all active class
                for (const childlist of subMenus) {
                    childlist.classList.remove('active');
                }
                // We set active to current item
                submenu.classList.add('active');
            }));
        }
    }
}
SidebarComponent.decorators = [
    { type: Component, args: [{
                selector: 'ls-sidebar',
                template: "<aside>\n  <ng-content></ng-content>\n\n  <section class=\"ls-sidebar-toggle\" (click)=\"isCollapsed = !isCollapsed\">\n    <div class=\"toggle-collapse\">\n      <div *ngIf=\"!isCollapsed\" class=\"collapse-icon\"></div>\n      <div *ngIf=\"isCollapsed\" class=\"uncollapse-icon\"></div>\n    </div>\n  </section>\n</aside>\n",
                styles: ["a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,main,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{border:0;font:inherit;font-size:100%;margin:0;padding:0;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}[hidden]{display:none}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:\"\";content:none}table{border-collapse:collapse;border-spacing:0}aside{-ms-flex-direction:column;-webkit-box-direction:normal;-webkit-box-orient:vertical;-webkit-box-shadow:0 0 10px 0 rgba(0,0,0,.25);-webkit-transition:width .3s;background-color:var(--white);box-shadow:0 0 10px 0 rgba(0,0,0,.25);color:#222;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:column;height:calc(100vh - 30px);overflow-x:hidden;padding-bottom:30px;position:fixed;top:30px;transition:width .3s;z-index:5}aside .ls-sidebar-toggle{height:60px}aside .toggle-collapse{bottom:2.3rem;cursor:pointer;position:absolute;right:.5rem;width:auto}aside .toggle-collapse div{height:1rem;width:2.125rem}aside .toggle-collapse .collapse-icon{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NS4xOCAyNy4xMyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMyMjI7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5jb2xsYXBzZUZpY2hpZXIgMjE8L3RpdGxlPjxnIGlkPSJDYWxxdWVfMiIgZGF0YS1uYW1lPSJDYWxxdWUgMiI+PGcgaWQ9ImZsw6pjaGVzIj48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iNTUuMTggMTEuMjUgOS42OCAxMS4yNSAxNi40NSA0Ljk0IDEyLjk0IDAuNTIgMCAxMy4yOSAxMi43OSAyNS45OCAxNi4wNiAyMS40IDkuNjggMTUuODggNTUuMTggMTUuODggNTUuMTggMTEuMjUiLz48cmVjdCBjbGFzcz0iY2xzLTEiIHg9IjIyLjkzIiB3aWR0aD0iMzIuMTMiIGhlaWdodD0iNC42MyIvPjxyZWN0IGNsYXNzPSJjbHMtMSIgeD0iMjIuOTMiIHk9IjIyLjUiIHdpZHRoPSIzMi4xMyIgaGVpZ2h0PSI0LjYzIi8+PC9nPjwvZz48L3N2Zz4=) no-repeat}aside .toggle-collapse .uncollapse-icon{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NS4xOCAyNy4xMyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMyMjI7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5jb2xsYXBzZUZpY2hpZXIgMjI8L3RpdGxlPjxnIGlkPSJDYWxxdWVfMiIgZGF0YS1uYW1lPSJDYWxxdWUgMiI+PGcgaWQ9ImZsw6pjaGVzIj48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iMCAxMS4yNSA0NS41IDExLjI1IDM4LjczIDQuOTQgNDIuMjMgMC41MiA1NS4xOCAxMy4yOSA0Mi4zOSAyNS45OCAzOS4xMiAyMS40IDQ1LjUgMTUuODggMCAxNS44OCAwIDExLjI1Ii8+PHJlY3QgY2xhc3M9ImNscy0xIiB4PSIwLjEzIiB3aWR0aD0iMzIuMTMiIGhlaWdodD0iNC42MyIvPjxyZWN0IGNsYXNzPSJjbHMtMSIgeD0iMC4xMyIgeT0iMjIuNSIgd2lkdGg9IjMyLjEzIiBoZWlnaHQ9IjQuNjMiLz48L2c+PC9nPjwvc3ZnPg==) no-repeat}:host.collapsed aside{width:3.125rem}:host.collapsed ::ng-deep .sub-menu{max-height:0;top:0}:host.collapsed ::ng-deep .main-menu{width:12.5rem}:host.collapsed ::ng-deep .ls-sidebar-menu{overflow-x:hidden;width:3.125rem}:host.collapsed ::ng-deep .ls-sidebar-menu span:not(.badge){padding:.6rem .6rem .6rem .75rem;width:100%}:host.collapsed ::ng-deep .ls-sidebar-menu span:not(.badge):hover{background-color:var(--ls-primary-100)}:host.collapsed ::ng-deep:not(.over-menu) span{display:none}:host.collapsed ::ng-deep .over-menu span{display:inline!important}:host.collapsed ::ng-deep .over-menu>a{-webkit-box-shadow:inset 4px 0 0 var(--ls-primary-600);box-shadow:inset 4px 0 0 var(--ls-primary-600);height:2.75rem;min-width:12.7rem;padding-right:0;position:fixed;top:0;z-index:1}:host.collapsed ::ng-deep .over-menu>a>span{font-weight:700}:host.collapsed ::ng-deep .over-menu i{width:38px}:host.collapsed ::ng-deep .over-menu .sub-menu{-webkit-box-shadow:2px 2px 10px 0 rgba(0,0,0,.25);background-color:var(--white);box-shadow:2px 2px 10px 0 rgba(0,0,0,.25);max-height:100vh;min-width:9.5rem;position:fixed;top:0}:host.collapsed ::ng-deep .over-menu .sub-menu:after{bottom:-30px;content:\"\";left:-16px;position:absolute;right:-30px;top:-30px;z-index:-1}:host.collapsed ::ng-deep .over-menu .sub-menu a{padding-left:.75rem;padding-right:.75rem}:host.collapsed ::ng-deep .over-menu .sub-menu li{padding:0}:host.collapsed ::ng-deep .over-menu .sub-menu:before{border-bottom:1px solid rgba(0,0,0,.1);content:\"\";display:block;height:2.75rem}:host.collapsed ::ng-deep .over-menu .sub-menu>.active{font-weight:500}:host:not(.collapsed) aside{width:12.5rem}:host:not(.collapsed) ::ng-deep .main-menu>li.active>a{font-weight:700}:host:not(.collapsed) ::ng-deep .main-menu li.active a{-webkit-box-shadow:inset 4px 0 0 var(--ls-primary-600);box-shadow:inset 4px 0 0 var(--ls-primary-600)}:host:not(.collapsed) ::ng-deep .main-menu li.active .sub-menu{max-height:100vh}:host:not(.collapsed) ::ng-deep .main-menu li.active .sub-menu .active{background-color:var(--ls-primary-200);color:#222;font-weight:500}:host:not(.collapsed) ::ng-deep .sub-menu a{padding-left:3rem}:host:not(.collapsed) ::ng-deep .over-menu:not(.active)>.sub-menu{-webkit-box-shadow:2px 2px 10px 0 rgba(0,0,0,.25);background-color:var(--white);box-shadow:2px 2px 10px 0 rgba(0,0,0,.25);max-height:100vh;min-width:9.5rem;position:fixed;top:0}:host:not(.collapsed) ::ng-deep .over-menu:not(.active)>.sub-menu:after{bottom:-30px;content:\"\";left:-16px;position:absolute;right:-30px;top:-30px;z-index:-1}:host:not(.collapsed) ::ng-deep .over-menu:not(.active)>.sub-menu a{padding-left:.75rem;padding-right:.75rem}:host:not(.collapsed) ::ng-deep .over-menu:not(.active)>.sub-menu li{padding:0}:host ::ng-deep img{max-width:38px}:host ::ng-deep section{width:12.5rem}:host ::ng-deep a{-ms-flex-align:center;-webkit-box-align:center;align-items:center;color:inherit;min-height:2.75rem;padding-left:.75rem;padding-right:.75rem;text-decoration:none}:host ::ng-deep .over-menu{background-color:var(--ls-primary-100)}:host ::ng-deep i{font-size:1.15rem;padding-bottom:.6rem;padding-top:.6rem;width:3.125rem}:host ::ng-deep .badge{-webkit-transition:right .3s;border-radius:1rem;position:absolute;right:.5rem;top:.85rem;transition:right .3s}:host ::ng-deep .ls-sidebar-coll-logo{-ms-flex-align:center;-ms-flex-pack:justify;-webkit-box-align:center;-webkit-box-pack:justify;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:1.125rem;height:8.5em;justify-content:space-between;padding:1.75rem .4rem 3.25rem;text-align:center}:host ::ng-deep .ls-sidebar-menu{-ms-flex-direction:column;-webkit-box-direction:normal;-webkit-box-orient:vertical;display:-webkit-box;display:-ms-flexbox;display:flex;flex-direction:column;height:100%;overflow-y:auto}:host ::ng-deep li{list-style:none}:host ::ng-deep .main-menu{padding:.5rem 0}:host ::ng-deep .main-menu:first-child{-ms-flex-positive:1;-webkit-box-flex:1;flex-grow:1}:host ::ng-deep .main-menu>li{min-height:2.75rem;overflow-y:hidden;position:relative}:host ::ng-deep .main-menu>li>a{display:-webkit-box;display:-ms-flexbox;display:flex}:host ::ng-deep .main-menu>li>a>i{width:38px}:host ::ng-deep .main-menu>li.active{-webkit-box-shadow:inset 4px 0 0 var(--ls-primary-600);background-color:var(--ls-primary-50);box-shadow:inset 4px 0 0 var(--ls-primary-600)}:host ::ng-deep .main-menu>li.active .sub-menu>.active,:host ::ng-deep .main-menu>li.active>a{color:var(--ls-primary-600)}:host ::ng-deep .sub-menu{max-height:0;padding:0}:host ::ng-deep .sub-menu li{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}:host ::ng-deep .sub-menu li>a{-ms-flex:1;-webkit-box-flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;flex:1}:host ::ng-deep .sub-menu>li:hover{background-color:var(--ls-primary-100)}"]
            }] }
];
/** @nocollapse */
SidebarComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: SidebarService },
    { type: Renderer2 }
];
SidebarComponent.propDecorators = {
    isCollapsed: [{ type: HostBinding, args: ['class.collapsed',] }, { type: Input }]
};
if (false) {
    /** @type {?} */
    SidebarComponent.prototype.isCollapsed;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.changes;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.mainMenuItems;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.subMenuLists;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.sidebarService;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lkZWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiL2J1aWxkcy9vdXRpbHMvY2hhcnRlZ3JhcGhpcXVlL2xpYnJhaXJpZS1hbmd1bGFyL2xpYi9zcmMvIiwic291cmNlcyI6WyJsaWIvc3RydWN0dXJlL3NpZGViYXIvc2lkZWJhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQW1CLFNBQVMsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDckcsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBT2pELE1BQU0sT0FBTyxnQkFBZ0I7Ozs7OztJQVMzQixZQUFvQixFQUFjLEVBQVUsY0FBOEIsRUFBVSxRQUFtQjtRQUFuRixPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQVUsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVztJQUN2RyxDQUFDOzs7O0lBRUQsa0JBQWtCO1FBQ2hCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUMvRSxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLDZCQUE2QixDQUFDLENBQUM7UUFFMUYsS0FBSyxNQUFNLFlBQVksSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQzdDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxXQUFXOzs7WUFBRSxHQUFHLEVBQUU7Z0JBQ25ELFlBQVksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDOztvQkFFcEMsUUFBUSxHQUFHLEdBQUc7O3NCQUNaLFFBQVEsR0FBRyxZQUFZLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FB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Qzs7Ozs7SUFBRSxvQ0FBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0FmdGVyQ29udGVudEluaXQsIENvbXBvbmVudCwgRWxlbWVudFJlZiwgSG9zdEJpbmRpbmcsIElucHV0LCBSZW5kZXJlcjJ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtTaWRlYmFyU2VydmljZX0gZnJvbSAnLi9zaWRlYmFyLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdscy1zaWRlYmFyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3NpZGViYXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9zaWRlYmFyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgU2lkZWJhckNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQge1xuXG4gIEBIb3N0QmluZGluZygnY2xhc3MuY29sbGFwc2VkJykgQElucHV0KCkgaXNDb2xsYXBzZWQ6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBjaGFuZ2VzOiBNdXRhdGlvbk9ic2VydmVyO1xuXG4gIHByaXZhdGUgbWFpbk1lbnVJdGVtcztcbiAgcHJpdmF0ZSBzdWJNZW51TGlzdHM7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSBzaWRlYmFyU2VydmljZTogU2lkZWJhclNlcnZpY2UsIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMikge1xuICB9XG5cbiAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgIHRoaXMubWFpbk1lbnVJdGVtcyA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFpbi1tZW51ID4gbGknKTtcbiAgICB0aGlzLnN1Yk1lbnVMaXN0cyA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFpbi1tZW51ID4gbGkgPiAuc3ViLW1lbnUnKTtcblxuICAgIGZvciAoY29uc3QgbWFpbk1lbnVJdGVtIG9mIHRoaXMubWFpbk1lbnVJdGVtcykge1xuICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4obWFpbk1lbnVJdGVtLCAnbW91c2VvdmVyJywgKCkgPT4ge1xuICAgICAgICBtYWluTWVudUl0ZW0uY2xhc3NMaXN0LmFkZCgnb3Zlci1tZW51Jyk7XG5cbiAgICAgICAgbGV0IG1heFdpZHRoID0gMjAwO1xuICAgICAgICBjb25zdCBtZW51SXRlbSA9IG1haW5NZW51SXRlbS5xdWVyeVNlbGVjdG9yKCdhJyk7XG4gICAgICAgIGNvbnN0IG1lbnVJdGVtU3BhbiA9IG1haW5NZW51SXRlbS5xdWVyeVNlbGVjdG9yKCdhID4gc3BhbicpO1xuICAgICAgICBjb25zdCBzdWJNZW51ID0gbWFpbk1lbnVJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zdWItbWVudScpO1xuXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbWFpbk1lbnVJdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAodGhpcy5pc0NvbGxhcHNlZCkge1xuICAgICAgICAgIG1lbnVJdGVtLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKCcgKyBwb3NpdGlvbi50b3AgKyAncHgpJztcbiAgICAgICAgICBtYXhXaWR0aCA9IG1lbnVJdGVtU3Bhbi5jbGllbnRXaWR0aCA+IG1heFdpZHRoID8gbWVudUl0ZW1TcGFuLmNsaWVudFdpZHRoIDogbWF4V2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQgfHwgIW1haW5NZW51SXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgY29uc3QgWHB4ID0gdGhpcy5pc0NvbGxhcHNlZCA/IDMuMTI1IDogMTIuNTtcbiAgICAgICAgICBzdWJNZW51LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgnICsgWHB4ICsgJ3JlbSwgJyArIHBvc2l0aW9uLnRvcCArICdweCwgMHB4KSc7XG4gICAgICAgICAgbWF4V2lkdGggPSBzdWJNZW51LmNsaWVudFdpZHRoID4gbWF4V2lkdGggPyBzdWJNZW51LmNsaWVudFdpZHRoIDogbWF4V2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICBpZiAobWVudUl0ZW1TcGFuLmNsaWVudFdpZHRoIDwgbWF4V2lkdGgpIHtcbiAgICAgICAgICAgIG1lbnVJdGVtU3Bhbi5zdHlsZS53aWR0aCA9IG1heFdpZHRoICsgJ3B4JztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN1Yk1lbnUuY2xpZW50V2lkdGggPCBtYXhXaWR0aCkge1xuICAgICAgICAgICAgc3ViTWVudS5zdHlsZS53aWR0aCA9IG1heFdpZHRoICsgJ3B4JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMucmVuZGVyZXIubGlzdGVuKG1haW5NZW51SXRlbSwgJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgIG1haW5NZW51SXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyLW1lbnUnKTtcbiAgICAgICAgbWFpbk1lbnVJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2EnKS5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICAgICAgbWFpbk1lbnVJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zdWItbWVudScpLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgICBtYWluTWVudUl0ZW0ucXVlcnlTZWxlY3RvcignLnN1Yi1tZW51Jykuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgbWFpbk1lbnVJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2EgPiBzcGFuJykuc3R5bGUud2lkdGggPSAnJztcblxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRDb2xsYXBzZWRDbGFzc0V2ZW50KCk7XG5cbiAgICB0aGlzLnNldE1haW5NZW51RXZlbnRzKCk7XG4gICAgdGhpcy5zZXRTdWJNZW51RXZlbnRzKCk7XG4gIH1cblxuICBzZXRDb2xsYXBzZWRDbGFzc0V2ZW50KCkge1xuICAgIGlmICh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lID09PSAnY29sbGFwc2VkJykge1xuICAgICAgdGhpcy5pc0NvbGxhcHNlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5jaGFuZ2VzID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9uczogTXV0YXRpb25SZWNvcmRbXSkgPT4ge1xuICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaCgobXV0YXRpb246IE11dGF0aW9uUmVjb3JkKSA9PiB0aGlzLmNoYW5nZWQobXV0YXRpb24pKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgdGhpcy5jaGFuZ2VzLm9ic2VydmUodGhpcy5lbC5uYXRpdmVFbGVtZW50LCB7XG4gICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgY2hhbmdlZChldmVudCkge1xuICAgIGlmIChldmVudC5hdHRyaWJ1dGVOYW1lID09PSAnY2xhc3MnKSB7XG4gICAgICB0aGlzLmlzQ29sbGFwc2VkID0gZXZlbnQudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdjb2xsYXBzZWQnKSAhPT0gLTE7XG4gICAgICB0aGlzLnNpZGViYXJTZXJ2aWNlLmNvbGxhcHNlZCh0aGlzLmlzQ29sbGFwc2VkKTtcbiAgICB9XG4gIH1cblxuICBzZXRNYWluTWVudUV2ZW50cygpIHtcbiAgICBjb25zdCBtYWluTWVudSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFpbi1tZW51Jyk7XG4gICAgZm9yIChjb25zdCBtZW51IG9mIG1haW5NZW51KSB7XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIG1lbnUuY2hpbGRyZW4pIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oY2hpbGQsICdjbGljaycsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBhY3RpdmVJdGVtcyA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWN0aXZlJyk7XG4gICAgICAgICAgLy8gV2UgcmVtb3ZlIGFsbCBhY3RpdmUgY2xhc3NcbiAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkbGlzdCBvZiBhY3RpdmVJdGVtcykge1xuICAgICAgICAgICAgaWYgKGNoaWxkbGlzdC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQgIT09IGNoaWxkKSB7XG4gICAgICAgICAgICAgIGNoaWxkbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gV2Ugc2V0IGFjdGl2ZSB0byBjdXJyZW50IGl0ZW1cbiAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblxuICAgICAgICAgIGlmICghdGhpcy5pc0NvbGxhcHNlZCkge1xuICAgICAgICAgICAgY2hpbGQucXVlcnlTZWxlY3RvcignYScpLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgICAgICAgY2hpbGQucXVlcnlTZWxlY3RvcignLnN1Yi1tZW51Jykuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRTdWJNZW51RXZlbnRzKCkge1xuICAgIGNvbnN0IHN1Yk1lbnVzID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdWItbWVudSBsaScpO1xuXG4gICAgZm9yIChjb25zdCBzdWJtZW51IG9mIHN1Yk1lbnVzKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLmxpc3RlbihzdWJtZW51LCAnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIC8vIFdlIHJlbW92ZSBhbGwgYWN0aXZlIGNsYXNzXG4gICAgICAgIGZvciAoY29uc3QgY2hpbGRsaXN0IG9mIHN1Yk1lbnVzKSB7XG4gICAgICAgICAgY2hpbGRsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIHNldCBhY3RpdmUgdG8gY3VycmVudCBpdGVtXG4gICAgICAgIHN1Ym1lbnUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==