/**
 * @fileoverview added by tsickle
 * Generated from: workflows/ls-workflow-editor/ls-workflow-editor.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChild, EventEmitter, Input, Output, QueryList, TemplateRef, ViewChild, ViewChildren } from '@angular/core';
import { NgbPopover } from '@ng-bootstrap/ng-bootstrap';
import { WorkflowModel } from '../../shared/model/workflows/workflow-model';
import { StepModel } from '../../shared/model/workflows/step-model';
import { moveItemInArray } from '@angular/cdk/drag-drop';
import { WorkflowModelLocalizedMessages, WorkflowModelOptions } from '../../shared/model/workflows/workflow-model-options';
export class LsWorkflowEditorComponent {
    constructor() {
        this.messages = {
            CREATE_STEP_TITLE: 'Ajouter une étape',
            EDIT_STEP_TITLE: 'Modification de l\'étape',
            ADD_STEP_BTN_TXT: 'Ajouter une étape',
            FIRST_STEP_TXT: 'Début',
            LAST_STEP_TXT: 'Fin',
        };
        this.activeOptions = {
            startIconClass: 'far fa-flag',
            endIconClass: 'fas fa-flag-checkered',
            editorGlobalLayoutClass: 'ls-workflow-editor-default-layout',
            additionalFinalEndpointClasses: ''
        };
        this.endpointIsEditable = false;
        this.workflowChange = new EventEmitter();
    }
    /**
     * @return {?}
     */
    get localizedMessages() {
        return this.messages;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set localizedMessages(value) {
        this.messages = Object.assign(this.messages, value);
    }
    /**
     * @return {?}
     */
    get options() {
        return this.activeOptions;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set options(value) {
        this.activeOptions = Object.assign(this.activeOptions, value);
    }
    /**
     * @return {?}
     */
    get workflow() {
        return this.workflowData;
    }
    /**
     * @param {?} newValue
     * @return {?}
     */
    set workflow(newValue) {
        this.workflowData = newValue;
        this.workflowChange.emit(newValue);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (!this.workflowData) {
            console.error('Missing input workflow data');
            this.workflowData = new WorkflowModel();
        }
        if (!this.messages) {
            throw new Error('Missing localised messages for LsWorkflowViewerComponent!');
        }
    }
    /**
     * @return {?}
     */
    workflowDataChanged() {
        this.workflowChange.emit(this.workflowData);
    }
    /**
     * @param {?} stepIdx
     * @return {?}
     */
    askForStepDeletion(stepIdx) {
        console.debug('delete step');
        if (this.confirmStepDeletionFct) {
            this.confirmStepDeletionFct(this.workflowData.steps[stepIdx]).then((/**
             * @param {?} result
             * @return {?}
             */
            result => {
                if (result) {
                    this.deleteStep(stepIdx);
                }
            }));
        }
        else {
            this.deleteStep(stepIdx);
        }
    }
    /**
     * @param {?} stepData
     * @param {?} idx
     * @return {?}
     */
    confirmStepCreation(stepData, idx) {
        this.addStep(stepData, idx);
        this.closeCurrentPopover();
    }
    /**
     * @param {?} stepData
     * @param {?} idx
     * @return {?}
     */
    confirmStepEdition(stepData, idx) {
        this.replaceStep(stepData, idx);
        this.closeCurrentPopover();
    }
    /**
     * @return {?}
     */
    confirmFinalStepEdition() {
        this.closeCurrentPopover();
    }
    /**
     * @return {?}
     */
    cancelStepEdition() {
        this.closeCurrentPopover();
    }
    /**
     * @param {?} idx
     * @return {?}
     */
    cancelStepCreation(idx) {
        this.closeCurrentPopover();
    }
    /**
     * @return {?}
     */
    isFirstStep() {
        return (!this.workflowData || this.workflowData.steps.length === 0);
    }
    /**
     * @param {?} idx
     * @return {?}
     */
    getAdditionalStepClass(idx) {
        if (this.currentEditedStepIdx !== null && this.currentEditedStepIdx === idx) {
            return 'selected';
        }
        return '';
    }
    /**
     * @param {?} step
     * @return {?}
     */
    getStepIconClass(step) {
        if (this.getStepIconClassFct) {
            return this.getStepIconClassFct(step);
        }
        return '';
    }
    /**
     * @param {?} step
     * @return {?}
     */
    getStepTooltip(step) {
        if (this.getStepTooltipFct) {
            return this.getStepTooltipFct(step);
        }
        return '';
    }
    /**
     * @param {?} src
     * @return {?}
     */
    cloneStep(src) {
        return src.clone();
    }
    /**
     * @param {?} stepIdx
     * @return {?}
     */
    createStep(stepIdx) {
        /** @type {?} */
        const newStep = new StepModel();
        this.currentPopover = this.getCreationPopoverForIdx(stepIdx);
        this.currentPopover.hidden.subscribe((/**
         * @return {?}
         */
        () => this.cancelStepCreation(stepIdx)));
        this.currentPopover.open({
            stepData: newStep,
            idx: stepIdx,
            cancelStepCreation: this.cancelStepCreation.bind(this),
            confirmStepCreation: this.confirmStepCreation.bind(this)
        });
    }
    /**
     * @param {?} stepIdx
     * @return {?}
     */
    editStep(stepIdx) {
        this.currentEditedStepIdx = stepIdx;
        /** @type {?} */
        const editingStep = this.cloneStep(this.workflowData.steps[stepIdx]);
        this.currentPopover = this.getEditionPopoverForIdx(stepIdx);
        this.currentPopover.hidden.subscribe((/**
         * @return {?}
         */
        () => this.cancelStepEdition()));
        this.currentPopover.open({
            stepData: editingStep,
            idx: stepIdx,
            cancelStepEdition: this.cancelStepEdition.bind(this),
            confirmStepEdition: this.confirmStepEdition.bind(this)
        });
    }
    /**
     * @return {?}
     */
    editFinalStep() {
        /** @type {?} */
        const editingStep = this.cloneStep(this.lastStepData);
        this.currentPopover = this.endpointPopoverElementRef;
        this.currentPopover.hidden.subscribe((/**
         * @return {?}
         */
        () => this.cancelStepEdition()));
        this.currentPopover.open({
            stepData: editingStep,
            cancelStepEdition: this.cancelStepEdition.bind(this),
            confirmStepEdition: this.confirmFinalStepEdition.bind(this)
        });
    }
    /**
     * @param {?} event
     * @return {?}
     */
    drop(event) {
        moveItemInArray(this.workflowData.steps, event.previousIndex, event.currentIndex);
        this.workflowDataChanged();
    }
    /**
     * @param {?} idx
     * @return {?}
     */
    dragDisabledForIdx(idx) {
        return (this.currentEditedStepIdx !== null && this.currentEditedStepIdx === idx);
    }
    /**
     * @private
     * @return {?}
     */
    closeCurrentPopover() {
        if (this.currentPopover && this.currentPopover.isOpen()) {
            this.currentPopover.close();
        }
        this.currentPopover = null;
        this.currentEditedStepIdx = null;
    }
    /**
     * @private
     * @param {?} step
     * @param {?} pos
     * @return {?}
     */
    addStep(step, pos) {
        this.workflowData.steps.splice(pos, 0, step);
        this.workflowDataChanged();
    }
    /**
     * @private
     * @param {?} newStep
     * @param {?} stepIdx
     * @return {?}
     */
    replaceStep(newStep, stepIdx) {
        this.workflowData.steps.splice(stepIdx, 1, newStep);
        this.workflowDataChanged();
    }
    /**
     * @private
     * @param {?} stepIdx
     * @return {?}
     */
    deleteStep(stepIdx) {
        this.workflowData.steps.splice(stepIdx, 1);
        this.workflowDataChanged();
    }
    /**
     * @private
     * @param {?} idx
     * @return {?}
     */
    getCreationPopoverForIdx(idx) {
        /** @type {?} */
        const filteredList = this.allCircuitEditionPopover.filter((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            /** @type {?} */
            const elem = ((/** @type {?} */ (item)))._elementRef;
            if (elem && elem.nativeElement) {
                return elem.nativeElement.hasAttribute('create-btn');
            }
            return true;
        }));
        return filteredList[idx];
    }
    /**
     * @private
     * @param {?} idx
     * @return {?}
     */
    getEditionPopoverForIdx(idx) {
        /** @type {?} */
        const filteredList = this.allCircuitEditionPopover.filter((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            /** @type {?} */
            const elem = ((/** @type {?} */ (item)))._elementRef;
            if (elem && elem.nativeElement) {
                return !(elem.nativeElement.hasAttribute('create-btn'));
            }
            return true;
        }));
        return filteredList[idx];
    }
}
LsWorkflowEditorComponent.decorators = [
    { type: Component, args: [{
                selector: 'ls-workflow-editor',
                template: "<div class=\"ls-workflow-editor\" [ngClass]=\"options.editorGlobalLayoutClass\">\n  <div class=\"ls-workflow-canevas\">\n    <div class=\"ls-workflow-start ls-workflow-endpoint\">\n      <div class=\"ls-workflow-endpoint-content\">\n        <div class=\"ls-workflow-endpoint-icn fa fa-2x\" [ngClass]=\"options.startIconClass\"></div>\n        <div class=\"ls-step-bounds-txt\">{{messages.FIRST_STEP_TXT}}</div>\n      </div>\n    </div>\n    <div class=\"ls-workflow-stepList-container\" cdkDropList (cdkDropListDropped)=\"drop($event)\">\n      <div class=\"ls-workflow-link-container\">\n        <div class=\"ls-workflow-link\"></div>\n        <div [ngClass]=\"isFirstStep() ? 'firstStep' : ''\" class=\"ls-link-button-container\">\n          <div (click)=\"createStep(0)\" [autoClose]=\"'outside'\" [ngbPopover]=\"popCreateContent\"\n               [popoverTitle]=\"messages.popCreateTitle\" class=\"add-step-btn\" create-btn\n               placement=\"right\" popoverClass=\"ls-step-edition-popover\"\n               triggers=\"manual\"\n               autoClose=\"false\">\n            <span class=\"fa fa-plus-circle\"></span>\n            <span class=\"add-step-btn-txt\">{{messages.ADD_STEP_BTN_TXT}}</span>\n          </div>\n        </div>\n      </div>\n\n      <div *ngFor=\"let step of workflowData.steps; index as i\">\n        <div class=\"ls-workflow-step-container\" cdkDrag [cdkDragDisabled]=\"dragDisabledForIdx(i)\">\n          <div [ngClass]=\"getAdditionalStepClass(i)\" class=\"ls-workflow-step\">\n            <div class=\"ls-step-top-line\">\n              <div class=\"step-number\">{{i + 1}}.</div>\n              <div class=\"step-name\">{{step.name}}</div>\n              <div [ngClass]=\"getStepIconClass(step)\" class=\"step-icn fa\" ngbTooltip=\"{{getStepTooltip(step)}}\"></div>\n            </div>\n            <div class=\"ls-step-validator-list\">\n              <ng-template\n                [ngTemplateOutlet]=\"stepDisplayContentRef\"\n                [ngTemplateOutletContext]=\"{step: step}\">\n              </ng-template>\n            </div>\n          </div>\n          <div class=\"ls-workflow-step-external-buttons\">\n            <div (click)=\"editStep(i)\" [autoClose]=\"'outside'\" [ngbPopover]=\"popEditContent\"\n                 [popoverTitle]=\"messages.popEditTitle\" class=\"fa fa-pencil-alt fa-pencil edit-step-btn\"\n                 placement=\"right-top\"\n                 popoverClass=\"ls-step-edition-popover\"\n                 triggers=\"manual\"></div>\n            <div (click)=\"askForStepDeletion(i)\" class=\"fa fa-trash delete-step-btn\"></div>\n          </div>\n        </div>\n\n        <div class=\"ls-workflow-link-container\">\n          <div class=\"ls-workflow-link\"></div>\n          <div class=\"ls-link-button-container\">\n            <div (click)=\"createStep(i + 1)\" [autoClose]=\"'outside'\" [ngbPopover]=\"popCreateContent\"\n                 [popoverTitle]=\"messages.popCreateTitle\" class=\"add-step-btn\" create-btn\n                 placement=\"right\" popoverClass=\"ls-step-edition-popover\"\n                 triggers=\"manual\"\n                 autoClose=\"false\">\n              <span class=\"fa fa-plus-circle\"></span>\n              <span class=\"add-step-btn-txt\">{{messages.ADD_STEP_BTN_TXT}}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n    <div class=\"ls-workflow-end ls-workflow-endpoint\" [ngClass]=\"options.additionalFinalEndpointClasses\">\n      <ng-container *ngIf=\"endpointIsEditable\">\n        <div\n          #endpointPopoverHandle\n          (click)=\"editFinalStep()\"\n          [autoClose]=\"'outside'\"\n          [ngbPopover]=\"popEditFinalStepContent\"\n          [popoverTitle]=\"messages.popEditTitle\"\n          class=\"ls-workflow-endpoint-overlay\"\n          placement=\"right\"\n          popoverClass=\"ls-step-edition-popover\"\n          triggers=\"manual\">\n\n        </div>\n      </ng-container>\n      <div class=\"ls-workflow-endpoint-content\">\n        <div class=\"ls-workflow-endpoint-icn-group\">\n          <div class=\"ls-workflow-endpoint-icn fa fa-2x\" [ngClass]=\"options.endIconClass\"></div>\n          <div class=\"ls-step-bounds-txt\">{{messages.LAST_STEP_TXT}}</div>\n        </div>\n        <div *ngIf=\"endpointIsEditable\" class=\"ls-step-validator-list\">\n          <ng-template [ngTemplateOutlet]=\"lastStepDisplayContentRef\">\n          </ng-template>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<ng-template\n  #popEditContent\n  let-idx=\"idx\"\n  let-stepData=\"stepData\"\n  let-cancelStepEdition=\"cancelStepEdition\"\n  let-confirmStepEdition=\"confirmStepEdition\">\n  <ng-template\n    [ngTemplateOutlet]=\"popEditContentTemplateRef\"\n    [ngTemplateOutletContext]=\"{idx:idx, stepData:stepData, cancelStepEdition:cancelStepEdition, confirmStepEdition:confirmStepEdition}\">\n  </ng-template>\n</ng-template>\n\n<ng-template\n  #popCreateContent\n  let-idx=\"idx\"\n  let-stepData=\"stepData\"\n  let-cancelStepCreation=\"cancelStepCreation\"\n  let-confirmStepCreation=\"confirmStepCreation\">\n  <ng-template\n    [ngTemplateOutlet]=\"popCreateContentTemplateRef\"\n    [ngTemplateOutletContext]=\"{idx:idx, stepData:stepData, cancelStepCreation:cancelStepCreation, confirmStepCreation:confirmStepCreation}\">\n  </ng-template>\n</ng-template>\n\n\n<ng-template\n  #popEditFinalStepContent\n  let-stepData=\"stepData\"\n  let-cancelStepEdition=\"cancelStepEdition\"\n  let-confirmStepEdition=\"confirmStepEdition\">\n  <ng-template\n    [ngTemplateOutlet]=\"endpointPopoverEditContentRef\"\n    [ngTemplateOutletContext]=\"{stepData:stepData, cancelStepEdition:cancelStepEdition, confirmStepEdition:confirmStepEdition, isLastStep:true}\">\n  </ng-template>\n</ng-template>\n",
                styles: ["body{background-color:var(--ls-grey-50)}.active-btn{color:#42a1e8}.ls-workflow-canevas{-ms-grid-column:1;grid-column:1;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.ls-workflow-endpoint.with-content,.ls-workflow-step{background-color:#fff;-webkit-box-shadow:0 0 .25rem rgba(0,0,0,.15);box-shadow:0 0 .25rem rgba(0,0,0,.15);border:none;width:var(--ls-workflow-step-width,20rem);min-height:6rem}.ls-workflow-endpoint.with-content .ls-step-top-line,.ls-workflow-step .ls-step-top-line{padding:.5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:700}.ls-workflow-endpoint.with-content .ls-display-step-separator,.ls-workflow-step .ls-display-step-separator{width:100%;border-bottom:1px solid #d3d3d3}.ls-workflow-endpoint.with-content .ls-step-validator-list,.ls-workflow-step .ls-step-validator-list{padding:.5rem .5rem .5rem 1.5rem;color:#5b5b5b}.ls-workflow-step.selected,.selected.ls-workflow-endpoint.with-content{-webkit-box-shadow:0 .5rem .25rem rgba(0,0,0,.3);box-shadow:0 .5rem .25rem rgba(0,0,0,.3)}.ls-workflow-endpoint.with-content .step-icn,.ls-workflow-step .step-icn{width:1.7rem;height:1.7rem}.ls-workflow-endpoint-content{margin:auto;text-align:center}.ls-workflow-endpoint-content .ls-step-bounds-txt{color:var(--primary);font-weight:700}.ls-workflow-endpoint-content .ls-workflow-endpoint-icn{color:var(--primary)}.ls-workflow-endpoint-content.not-active .ls-step-bounds-txt,.ls-workflow-endpoint-content.not-active .ls-workflow-endpoint-icn{color:#5b5b5b}.ls-workflow-endpoint-content .ls-step-validator-list{text-align:left}.ls-horizontal-separation-line{margin-top:2rem;border-bottom:1px solid #5b5b5b}.ls-workflow-endpoint{background-color:#fff;-webkit-box-shadow:0 0 .25rem rgba(0,0,0,.15);box-shadow:0 0 .25rem rgba(0,0,0,.15);border:none;display:-ms-grid;display:grid;width:6rem;height:6rem;border-radius:50%;position:relative}.ls-workflow-endpoint.with-content{display:block;width:var(--ls-workflow-step-width,20rem);border-radius:0}.ls-workflow-endpoint.with-content .ls-workflow-endpoint-content{width:100%;height:100%;padding:.5em}.ls-workflow-endpoint.with-content .ls-workflow-endpoint-content .ls-workflow-endpoint-icn-group{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;padding:0 .5em}.ls-workflow-endpoint.with-content .ls-workflow-endpoint-content .ls-workflow-endpoint-icn-group:after{content:'';display:block;width:2em}.ls-workflow-endpoint .ls-workflow-endpoint-overlay{width:100%;height:100%;position:absolute;left:0;bottom:0;z-index:2;cursor:pointer}.ls-workflow-link{width:0;border:1px solid #222}.cdk-drag-preview .ls-workflow-endpoint.with-content,.cdk-drag-preview .ls-workflow-step{-webkit-box-shadow:0 .5rem .25rem rgba(0,0,0,.3);box-shadow:0 .5rem .25rem rgba(0,0,0,.3)}.cdk-drag-placeholder{min-height:6rem}.cdk-drag-placeholder .ls-workflow-endpoint.with-content,.cdk-drag-placeholder .ls-workflow-step,.cdk-drag-placeholder .ls-workflow-step-external-buttons{display:none}.cdk-drop-list-dragging .cdk-drag{-webkit-transition:-webkit-transform 250ms cubic-bezier(0,0,.2,1);transition:transform 250ms cubic-bezier(0,0,.2,1);transition:transform 250ms cubic-bezier(0,0,.2,1),-webkit-transform 250ms cubic-bezier(0,0,.2,1)}.cdk-drag-animating{-webkit-transition:-webkit-transform .3s cubic-bezier(0,0,.2,1);transition:transform .3s cubic-bezier(0,0,.2,1);transition:transform .3s cubic-bezier(0,0,.2,1),-webkit-transform .3s cubic-bezier(0,0,.2,1)}.ls-workflow-link-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;min-height:4rem;min-width:20rem}.ls-workflow-link-container::before{content:\"\";-webkit-box-flex:0;-ms-flex:0 0 calc(50% - 2px);flex:0 0 calc(50% - 2px)}.ls-workflow-link-container .ls-link-button-container{-webkit-box-flex:0;-ms-flex:0 0 calc(50% - 2px);flex:0 0 calc(50% - 2px);-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center;height:-webkit-min-content;height:-moz-min-content;height:min-content;width:-webkit-min-content;width:-moz-min-content;width:min-content;padding-left:1rem}.ls-workflow-stepList-container{width:100%}.ls-workflow-step-container{-ms-flex-item-align:center;align-self:center;margin-left:auto;margin-right:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.ls-workflow-step-container::before{content:\"\";-webkit-box-flex:0;-ms-flex:0 0 5rem;flex:0 0 5rem}.ls-workflow-step-container .ls-workflow-endpoint.with-content,.ls-workflow-step-container .ls-workflow-step{-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center}.ls-workflow-step-container .ls-workflow-step-external-buttons{padding-left:1rem;height:-webkit-min-content;height:-moz-min-content;height:min-content;-webkit-box-flex:0;-ms-flex:0 0 5rem;flex:0 0 5rem}.ls-workflow-step-external-buttons{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.ls-workflow-step-external-buttons .edit-step-btn{margin-right:1rem;cursor:pointer}.ls-workflow-step-external-buttons .edit-step-btn:hover{color:var(--primary)}.ls-workflow-step-external-buttons .delete-step-btn{cursor:pointer}.ls-workflow-step-external-buttons .delete-step-btn:hover{color:var(--danger)}.ls-workflow-editor{display:-ms-grid;display:grid;height:100%}.ls-workflow-editor .ls-link-button-container .add-step-btn{width:-webkit-max-content;width:-moz-max-content;width:max-content;cursor:pointer}.ls-workflow-editor .ls-link-button-container .add-step-btn .add-step-btn-txt{margin-left:.5em;opacity:0;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.ls-workflow-editor .ls-link-button-container.firstStep .add-step-btn .add-step-btn-txt,.ls-workflow-editor .ls-link-button-container:hover .add-step-btn .add-step-btn-txt{opacity:100}.ls-workflow-editor-default-layout{-ms-grid-columns:66% auto;grid-template-columns:66% auto;-ms-grid-rows:100%;grid-template-rows:100%}@media (min-width:1400px){.container{max-width:1340px}}@media (min-width:1600px){.container{max-width:1540px}}"]
            }] }
];
/** @nocollapse */
LsWorkflowEditorComponent.ctorParameters = () => [];
LsWorkflowEditorComponent.propDecorators = {
    endpointPopoverElementRef: [{ type: ViewChild, args: ['endpointPopoverHandle', { read: NgbPopover },] }],
    allCircuitEditionPopover: [{ type: ViewChildren, args: [NgbPopover,] }],
    popEditContentTemplateRef: [{ type: ContentChild, args: ['popEditContent',] }],
    popCreateContentTemplateRef: [{ type: ContentChild, args: ['popCreateContent',] }],
    endpointPopoverEditContentRef: [{ type: ContentChild, args: ['endpointPopoverEditContent',] }],
    stepDisplayContentRef: [{ type: ContentChild, args: ['stepDisplayContent',] }],
    lastStepDisplayContentRef: [{ type: ContentChild, args: ['lastStepDisplayContent',] }],
    endpointIsEditable: [{ type: Input }],
    getStepIconClassFct: [{ type: Input }],
    getStepTooltipFct: [{ type: Input }],
    confirmStepDeletionFct: [{ type: Input }],
    lastStepData: [{ type: Input }],
    workflowChange: [{ type: Output }],
    localizedMessages: [{ type: Input }],
    options: [{ type: Input }],
    workflow: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.currentEditedStepIdx;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.endpointPopoverElementRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.allCircuitEditionPopover;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.currentPopover;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.popEditContentTemplateRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.popCreateContentTemplateRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.endpointPopoverEditContentRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.stepDisplayContentRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.lastStepDisplayContentRef;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.messages;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.activeOptions;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.endpointIsEditable;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.getStepIconClassFct;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.getStepTooltipFct;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.confirmStepDeletionFct;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.lastStepData;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.workflowData;
    /** @type {?} */
    LsWorkflowEditorComponent.prototype.workflowChange;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHMtd29ya2Zsb3ctZWRpdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BsaWJyaWNpZWwvbHMtY29tcG9zYW50cy93b3JrZmxvd3MvIiwic291cmNlcyI6WyJ3b3JrZmxvd3MvbHMtd29ya2Zsb3ctZWRpdG9yL2xzLXdvcmtmbG93LWVkaXRvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULFlBQVksRUFDWixZQUFZLEVBQ1osS0FBSyxFQUVMLE1BQU0sRUFDTixTQUFTLEVBQ1QsV0FBVyxFQUNYLFNBQVMsRUFDVCxZQUFZLEVBQ2IsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ3hELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUM1RSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDcEUsT0FBTyxFQUFlLGVBQWUsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3RFLE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFEQUFxRCxDQUFDO0FBTzNILE1BQU0sT0FBTyx5QkFBeUI7SUF1Q3BDO1FBdkJBLGFBQVEsR0FBbUM7WUFDekMsaUJBQWlCLEVBQUUsbUJBQW1CO1lBQ3RDLGVBQWUsRUFBRSwwQkFBMEI7WUFDM0MsZ0JBQWdCLEVBQUUsbUJBQW1CO1lBQ3JDLGNBQWMsRUFBRSxPQUFPO1lBQ3ZCLGFBQWEsRUFBRSxLQUFLO1NBQ3JCLENBQUM7UUFDRixrQkFBYSxHQUF5QjtZQUNwQyxjQUFjLEVBQUUsYUFBYTtZQUM3QixZQUFZLEVBQUUsdUJBQXVCO1lBQ3JDLHVCQUF1QixFQUFFLG1DQUFtQztZQUM1RCw4QkFBOEIsRUFBRSxFQUFFO1NBQ25DLENBQUM7UUFDTyx1QkFBa0IsR0FBRyxLQUFLLENBQUM7UUFRMUIsbUJBQWMsR0FBRyxJ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RixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLG9CQUFvQjtnQkFDOUIsMHNMQUFrRDs7YUFFbkQ7Ozs7O3dDQUtFLFNBQVMsU0FBQyx1QkFBdUIsRUFBRSxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUM7dUNBQ3JELFlBQVksU0FBQyxVQUFVO3dDQUl2QixZQUFZLFNBQUMsZ0JBQWdCOzBDQUM3QixZQUFZLFNBQUMsa0JBQWtCOzRDQUMvQixZQUFZLFNBQUMsNEJBQTRCO29DQUN6QyxZQUFZLFNBQUMsb0JBQW9CO3dDQUNqQyxZQUFZLFNBQUMsd0JBQXdCO2lDQWdCckMsS0FBSztrQ0FDTCxLQUFLO2dDQUNMLEtBQUs7cUNBQ0wsS0FBSzsyQkFFTCxLQUFLOzZCQUdMLE1BQU07Z0NBS04sS0FBSztzQkFRTCxLQUFLO3VCQVFMLEtBQUs7Ozs7SUF4RE4seURBQTZCOztJQUU3Qiw4REFBOEY7O0lBQzlGLDZEQUEwRTs7SUFDMUUsbURBQTJCOztJQUczQiw4REFBNEU7O0lBQzVFLGdFQUFnRjs7SUFDaEYsa0VBQTRGOztJQUM1RiwwREFBNEU7O0lBQzVFLDhEQUFvRjs7SUFHcEYsNkNBTUU7O0lBQ0Ysa0RBS0U7O0lBQ0YsdURBQW9DOztJQUNwQyx3REFBMEQ7O0lBQzFELHNEQUF3RDs7SUFDeEQsMkRBQXVFOztJQUV2RSxpREFBaUM7O0lBRWpDLGlEQUE0Qjs7SUFDNUIsbURBQTZEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBDb250ZW50Q2hpbGQsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBRdWVyeUxpc3QsXG4gIFRlbXBsYXRlUmVmLFxuICBWaWV3Q2hpbGQsXG4gIFZpZXdDaGlsZHJlblxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5nYlBvcG92ZXIgfSBmcm9tICdAbmctYm9vdHN0cmFwL25nLWJvb3RzdHJhcCc7XG5pbXBvcnQgeyBXb3JrZmxvd01vZGVsIH0gZnJvbSAnLi4vLi4vc2hhcmVkL21vZGVsL3dvcmtmbG93cy93b3JrZmxvdy1tb2RlbCc7XG5pbXBvcnQgeyBTdGVwTW9kZWwgfSBmcm9tICcuLi8uLi9zaGFyZWQvbW9kZWwvd29ya2Zsb3dzL3N0ZXAtbW9kZWwnO1xuaW1wb3J0IHsgQ2RrRHJhZ0Ryb3AsIG1vdmVJdGVtSW5BcnJheSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9kcmFnLWRyb3AnO1xuaW1wb3J0IHsgV29ya2Zsb3dNb2RlbExvY2FsaXplZE1lc3NhZ2VzLCBXb3JrZmxvd01vZGVsT3B0aW9ucyB9IGZyb20gJy4uLy4uL3NoYXJlZC9tb2RlbC93b3JrZmxvd3Mvd29ya2Zsb3ctbW9kZWwtb3B0aW9ucyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xzLXdvcmtmbG93LWVkaXRvcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9scy13b3JrZmxvdy1lZGl0b3IuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9scy13b3JrZmxvdy1lZGl0b3IuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMc1dvcmtmbG93RWRpdG9yQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBjdXJyZW50RWRpdGVkU3RlcElkeDogbnVtYmVyO1xuXG4gIEBWaWV3Q2hpbGQoJ2VuZHBvaW50UG9wb3ZlckhhbmRsZScsIHtyZWFkOiBOZ2JQb3BvdmVyfSkgZW5kcG9pbnRQb3BvdmVyRWxlbWVudFJlZjogTmdiUG9wb3ZlcjtcbiAgQFZpZXdDaGlsZHJlbihOZ2JQb3BvdmVyKSBhbGxDaXJjdWl0RWRpdGlvblBvcG92ZXI6IFF1ZXJ5TGlzdDxOZ2JQb3BvdmVyPjtcbiAgY3VycmVudFBvcG92ZXI6IE5nYlBvcG92ZXI7XG5cblxuICBAQ29udGVudENoaWxkKCdwb3BFZGl0Q29udGVudCcpIHBvcEVkaXRDb250ZW50VGVtcGxhdGVSZWY6IFRlbXBsYXRlUmVmPGFueT47XG4gIEBDb250ZW50Q2hpbGQoJ3BvcENyZWF0ZUNvbnRlbnQnKSBwb3BDcmVhdGVDb250ZW50VGVtcGxhdGVSZWY6IFRlbXBsYXRlUmVmPGFueT47XG4gIEBDb250ZW50Q2hpbGQoJ2VuZHBvaW50UG9wb3ZlckVkaXRDb250ZW50JykgZW5kcG9pbnRQb3BvdmVyRWRpdENvbnRlbnRSZWY6IFRlbXBsYXRlUmVmPGFueT47XG4gIEBDb250ZW50Q2hpbGQoJ3N0ZXBEaXNwbGF5Q29udGVudCcpIHN0ZXBEaXNwbGF5Q29udGVudFJlZjogVGVtcGxhdGVSZWY8YW55PjtcbiAgQENvbnRlbnRDaGlsZCgnbGFzdFN0ZXBEaXNwbGF5Q29udGVudCcpIGxhc3RTdGVwRGlzcGxheUNvbnRlbnRSZWY6IFRlbXBsYXRlUmVmPGFueT47XG5cblxuICBtZXNzYWdlczogV29ya2Zsb3dNb2RlbExvY2FsaXplZE1lc3NhZ2VzID0ge1xuICAgIENSRUFURV9TVEVQX1RJVExFOiAnQWpvdXRlciB1bmUgw6l0YXBlJyxcbiAgICBFRElUX1NURVBfVElUTEU6ICdNb2RpZmljYXRpb24gZGUgbFxcJ8OpdGFwZScsXG4gICAgQUREX1NURVBfQlROX1RYVDogJ0Fqb3V0ZXIgdW5lIMOpdGFwZScsXG4gICAgRklSU1RfU1RFUF9UWFQ6ICdEw6lidXQnLFxuICAgIExBU1RfU1RFUF9UWFQ6ICdGaW4nLFxuICB9O1xuICBhY3RpdmVPcHRpb25zOiBXb3JrZmxvd01vZGVsT3B0aW9ucyA9IHtcbiAgICBzdGFydEljb25DbGFzczogJ2ZhciBmYS1mbGFnJyxcbiAgICBlbmRJY29uQ2xhc3M6ICdmYXMgZmEtZmxhZy1jaGVja2VyZWQnLFxuICAgIGVkaXRvckdsb2JhbExheW91dENsYXNzOiAnbHMtd29ya2Zsb3ctZWRpdG9yLWRlZmF1bHQtbGF5b3V0JyxcbiAgICBhZGRpdGlvbmFsRmluYWxFbmRwb2ludENsYXNzZXM6ICcnXG4gIH07XG4gIEBJbnB1dCgpIGVuZHBvaW50SXNFZGl0YWJsZSA9IGZhbHNlO1xuICBASW5wdXQoKSBnZXRTdGVwSWNvbkNsYXNzRmN0OiAoc3RlcDogU3RlcE1vZGVsKSA9PiBzdHJpbmc7XG4gIEBJbnB1dCgpIGdldFN0ZXBUb29sdGlwRmN0OiAoc3RlcDogU3RlcE1vZGVsKSA9PiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbmZpcm1TdGVwRGVsZXRpb25GY3Q6IChzdGVwOiBTdGVwTW9kZWwpID0+IFByb21pc2U8Ym9vbGVhbj47XG5cbiAgQElucHV0KCkgbGFzdFN0ZXBEYXRhOiBTdGVwTW9kZWw7XG5cbiAgd29ya2Zsb3dEYXRhOiBXb3JrZmxvd01vZGVsO1xuICBAT3V0cHV0KCkgd29ya2Zsb3dDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFdvcmtmbG93TW9kZWw+KCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICBASW5wdXQoKSBnZXQgbG9jYWxpemVkTWVzc2FnZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZXM7XG4gIH1cblxuICBzZXQgbG9jYWxpemVkTWVzc2FnZXModmFsdWU6IFdvcmtmbG93TW9kZWxMb2NhbGl6ZWRNZXNzYWdlcykge1xuICAgIHRoaXMubWVzc2FnZXMgPSBPYmplY3QuYXNzaWduKHRoaXMubWVzc2FnZXMsIHZhbHVlKTtcbiAgfVxuXG4gIEBJbnB1dCgpIGdldCBvcHRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZU9wdGlvbnM7XG4gIH1cblxuICBzZXQgb3B0aW9ucyh2YWx1ZTogV29ya2Zsb3dNb2RlbE9wdGlvbnMpIHtcbiAgICB0aGlzLmFjdGl2ZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMuYWN0aXZlT3B0aW9ucywgdmFsdWUpO1xuICB9XG5cbiAgQElucHV0KCkgZ2V0IHdvcmtmbG93KCk6IFdvcmtmbG93TW9kZWwge1xuICAgIHJldHVybiB0aGlzLndvcmtmbG93RGF0YTtcbiAgfVxuXG4gIHNldCB3b3JrZmxvdyhuZXdWYWx1ZTogV29ya2Zsb3dNb2RlbCkge1xuICAgIHRoaXMud29ya2Zsb3dEYXRhID0gbmV3VmFsdWU7XG4gICAgdGhpcy53b3JrZmxvd0NoYW5nZS5lbWl0KG5ld1ZhbHVlKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGlmICghdGhpcy53b3JrZmxvd0RhdGEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgaW5wdXQgd29ya2Zsb3cgZGF0YScpO1xuICAgICAgdGhpcy53b3JrZmxvd0RhdGEgPSBuZXcgV29ya2Zsb3dNb2RlbCgpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5tZXNzYWdlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGxvY2FsaXNlZCBtZXNzYWdlcyBmb3IgTHNXb3JrZmxvd1ZpZXdlckNvbXBvbmVudCEnKTtcbiAgICB9XG5cbiAgfVxuXG4gIHdvcmtmbG93RGF0YUNoYW5nZWQoKSB7XG4gICAgdGhpcy53b3JrZmxvd0NoYW5nZS5lbWl0KHRoaXMud29ya2Zsb3dEYXRhKTtcbiAgfVxuXG4gIGFza0ZvclN0ZXBEZWxldGlvbihzdGVwSWR4OiBudW1iZXIpIHtcbiAgICBjb25zb2xlLmRlYnVnKCdkZWxldGUgc3RlcCcpO1xuXG4gICAgaWYgKHRoaXMuY29uZmlybVN0ZXBEZWxldGlvbkZjdCkge1xuICAgICAgdGhpcy5jb25maXJtU3RlcERlbGV0aW9uRmN0KHRoaXMud29ya2Zsb3dEYXRhLnN0ZXBzW3N0ZXBJZHhdKS50aGVuKFxuICAgICAgICByZXN1bHQgPT4ge1xuICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlU3RlcChzdGVwSWR4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVsZXRlU3RlcChzdGVwSWR4KTtcbiAgICB9XG4gIH1cblxuXG4gIGNvbmZpcm1TdGVwQ3JlYXRpb24oc3RlcERhdGE6IFN0ZXBNb2RlbCwgaWR4OiBudW1iZXIpIHtcbiAgICB0aGlzLmFkZFN0ZXAoc3RlcERhdGEsIGlkeCk7XG4gICAgdGhpcy5jbG9zZUN1cnJlbnRQb3BvdmVyKCk7XG4gIH1cblxuICBjb25maXJtU3RlcEVkaXRpb24oc3RlcERhdGE6IFN0ZXBNb2RlbCwgaWR4OiBudW1iZXIpIHtcbiAgICB0aGlzLnJlcGxhY2VTdGVwKHN0ZXBEYXRhLCBpZHgpO1xuICAgIHRoaXMuY2xvc2VDdXJyZW50UG9wb3ZlcigpO1xuICB9XG5cbiAgY29uZmlybUZpbmFsU3RlcEVkaXRpb24oKSB7XG4gICAgdGhpcy5jbG9zZUN1cnJlbnRQb3BvdmVyKCk7XG4gIH1cblxuICBjYW5jZWxTdGVwRWRpdGlvbigpIHtcbiAgICB0aGlzLmNsb3NlQ3VycmVudFBvcG92ZXIoKTtcbiAgfVxuXG4gIGNhbmNlbFN0ZXBDcmVhdGlvbihpZHg6IG51bWJlcikge1xuICAgIHRoaXMuY2xvc2VDdXJyZW50UG9wb3ZlcigpO1xuICB9XG5cbiAgaXNGaXJzdFN0ZXAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICghdGhpcy53b3JrZmxvd0RhdGEgfHwgdGhpcy53b3JrZmxvd0RhdGEuc3RlcHMubGVuZ3RoID09PSAwKTtcbiAgfVxuXG4gIGdldEFkZGl0aW9uYWxTdGVwQ2xhc3MoaWR4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmN1cnJlbnRFZGl0ZWRTdGVwSWR4ICE9PSBudWxsICYmIHRoaXMuY3VycmVudEVkaXRlZFN0ZXBJZHggPT09IGlkeCkge1xuICAgICAgcmV0dXJuICdzZWxlY3RlZCc7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGdldFN0ZXBJY29uQ2xhc3Moc3RlcDogU3RlcE1vZGVsKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5nZXRTdGVwSWNvbkNsYXNzRmN0KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRTdGVwSWNvbkNsYXNzRmN0KHN0ZXApO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBnZXRTdGVwVG9vbHRpcChzdGVwOiBTdGVwTW9kZWwpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmdldFN0ZXBUb29sdGlwRmN0KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRTdGVwVG9vbHRpcEZjdChzdGVwKTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgcHVibGljIGNsb25lU3RlcChzcmM6IFN0ZXBNb2RlbCk6IFN0ZXBNb2RlbCB7XG4gICAgcmV0dXJuIHNyYy5jbG9uZSgpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZVN0ZXAoc3RlcElkeDogbnVtYmVyKSB7XG4gICAgY29uc3QgbmV3U3RlcCA9IG5ldyBTdGVwTW9kZWwoKTtcblxuICAgIHRoaXMuY3VycmVudFBvcG92ZXIgPSB0aGlzLmdldENyZWF0aW9uUG9wb3ZlckZvcklkeChzdGVwSWR4KTtcbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLmhpZGRlbi5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jYW5jZWxTdGVwQ3JlYXRpb24oc3RlcElkeCkpO1xuICAgIHRoaXMuY3VycmVudFBvcG92ZXIub3BlbihcbiAgICAgIHtcbiAgICAgICAgc3RlcERhdGE6IG5ld1N0ZXAsXG4gICAgICAgIGlkeDogc3RlcElkeCxcbiAgICAgICAgY2FuY2VsU3RlcENyZWF0aW9uOiB0aGlzLmNhbmNlbFN0ZXBDcmVhdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICBjb25maXJtU3RlcENyZWF0aW9uOiB0aGlzLmNvbmZpcm1TdGVwQ3JlYXRpb24uYmluZCh0aGlzKVxuICAgICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZWRpdFN0ZXAoc3RlcElkeDogbnVtYmVyKSB7XG4gICAgdGhpcy5jdXJyZW50RWRpdGVkU3RlcElkeCA9IHN0ZXBJZHg7XG4gICAgY29uc3QgZWRpdGluZ1N0ZXAgPSB0aGlzLmNsb25lU3RlcCh0aGlzLndvcmtmbG93RGF0YS5zdGVwc1tzdGVwSWR4XSk7XG5cbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyID0gdGhpcy5nZXRFZGl0aW9uUG9wb3ZlckZvcklkeChzdGVwSWR4KTtcbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLmhpZGRlbi5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jYW5jZWxTdGVwRWRpdGlvbigpKTtcbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLm9wZW4oe1xuICAgICAgc3RlcERhdGE6IGVkaXRpbmdTdGVwLFxuICAgICAgaWR4OiBzdGVwSWR4LFxuICAgICAgY2FuY2VsU3RlcEVkaXRpb246IHRoaXMuY2FuY2VsU3RlcEVkaXRpb24uYmluZCh0aGlzKSxcbiAgICAgIGNvbmZpcm1TdGVwRWRpdGlvbjogdGhpcy5jb25maXJtU3RlcEVkaXRpb24uYmluZCh0aGlzKVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGVkaXRGaW5hbFN0ZXAoKSB7XG4gICAgY29uc3QgZWRpdGluZ1N0ZXAgPSB0aGlzLmNsb25lU3RlcCh0aGlzLmxhc3RTdGVwRGF0YSk7XG4gICAgdGhpcy5jdXJyZW50UG9wb3ZlciA9IHRoaXMuZW5kcG9pbnRQb3BvdmVyRWxlbWVudFJlZjtcbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLmhpZGRlbi5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jYW5jZWxTdGVwRWRpdGlvbigpKTtcbiAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLm9wZW4oe1xuICAgICAgc3RlcERhdGE6IGVkaXRpbmdTdGVwLFxuICAgICAgY2FuY2VsU3RlcEVkaXRpb246IHRoaXMuY2FuY2VsU3RlcEVkaXRpb24uYmluZCh0aGlzKSxcbiAgICAgIGNvbmZpcm1TdGVwRWRpdGlvbjogdGhpcy5jb25maXJtRmluYWxTdGVwRWRpdGlvbi5iaW5kKHRoaXMpXG4gICAgfSk7XG4gIH1cblxuICBkcm9wKGV2ZW50OiBDZGtEcmFnRHJvcDxTdGVwTW9kZWxbXT4pIHtcbiAgICBtb3ZlSXRlbUluQXJyYXkodGhpcy53b3JrZmxvd0RhdGEuc3RlcHMsIGV2ZW50LnByZXZpb3VzSW5kZXgsIGV2ZW50LmN1cnJlbnRJbmRleCk7XG4gICAgdGhpcy53b3JrZmxvd0RhdGFDaGFuZ2VkKCk7XG4gIH1cblxuICBkcmFnRGlzYWJsZWRGb3JJZHgoaWR4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gKHRoaXMuY3VycmVudEVkaXRlZFN0ZXBJZHggIT09IG51bGwgJiYgdGhpcy5jdXJyZW50RWRpdGVkU3RlcElkeCA9PT0gaWR4KTtcbiAgfVxuXG4gIHByaXZhdGUgY2xvc2VDdXJyZW50UG9wb3ZlcigpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50UG9wb3ZlciAmJiB0aGlzLmN1cnJlbnRQb3BvdmVyLmlzT3BlbigpKSB7XG4gICAgICB0aGlzLmN1cnJlbnRQb3BvdmVyLmNsb3NlKCk7XG4gICAgfVxuICAgIHRoaXMuY3VycmVudFBvcG92ZXIgPSBudWxsO1xuICAgIHRoaXMuY3VycmVudEVkaXRlZFN0ZXBJZHggPSBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdGVwKHN0ZXA6IFN0ZXBNb2RlbCwgcG9zOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLndvcmtmbG93RGF0YS5zdGVwcy5zcGxpY2UocG9zLCAwLCBzdGVwKTtcbiAgICB0aGlzLndvcmtmbG93RGF0YUNoYW5nZWQoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVwbGFjZVN0ZXAobmV3U3RlcDogU3RlcE1vZGVsLCBzdGVwSWR4OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLndvcmtmbG93RGF0YS5zdGVwcy5zcGxpY2Uoc3RlcElkeCwgMSwgbmV3U3RlcCk7XG4gICAgdGhpcy53b3JrZmxvd0RhdGFDaGFuZ2VkKCk7XG4gIH1cblxuICBwcml2YXRlIGRlbGV0ZVN0ZXAoc3RlcElkeDogbnVtYmVyKSB7XG4gICAgdGhpcy53b3JrZmxvd0RhdGEuc3RlcHMuc3BsaWNlKHN0ZXBJZHgsIDEpO1xuICAgIHRoaXMud29ya2Zsb3dEYXRhQ2hhbmdlZCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDcmVhdGlvblBvcG92ZXJGb3JJZHgoaWR4OiBudW1iZXIpOiBOZ2JQb3BvdmVyIHtcbiAgICBjb25zdCBmaWx0ZXJlZExpc3QgPSB0aGlzLmFsbENpcmN1aXRFZGl0aW9uUG9wb3Zlci5maWx0ZXIoXG4gICAgICAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtID0gKGl0ZW0gYXMgYW55KS5fZWxlbWVudFJlZjtcbiAgICAgICAgaWYgKGVsZW0gJiYgZWxlbS5uYXRpdmVFbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGVsZW0ubmF0aXZlRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2NyZWF0ZS1idG4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIGZpbHRlcmVkTGlzdFtpZHhdO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRFZGl0aW9uUG9wb3ZlckZvcklkeChpZHg6IG51bWJlcik6IE5nYlBvcG92ZXIge1xuICAgIGNvbnN0IGZpbHRlcmVkTGlzdCA9IHRoaXMuYWxsQ2lyY3VpdEVkaXRpb25Qb3BvdmVyLmZpbHRlcihcbiAgICAgIChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW0gPSAoaXRlbSBhcyBhbnkpLl9lbGVtZW50UmVmO1xuICAgICAgICBpZiAoZWxlbSAmJiBlbGVtLm5hdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gIShlbGVtLm5hdGl2ZUVsZW1lbnQuaGFzQXR0cmlidXRlKCdjcmVhdGUtYnRuJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG5cbiAgICByZXR1cm4gZmlsdGVyZWRMaXN0W2lkeF07XG4gIH1cblxufVxuIl19