/**
 * @fileoverview added by tsickle
 * Generated from: lib/structure/sidebar/sidebar.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, HostBinding, Input, Renderer2 } from '@angular/core';
import { SidebarService } from './sidebar.service';
var SidebarComponent = /** @class */ (function () {
    function SidebarComponent(el, sidebarService, renderer) {
        this.el = el;
        this.sidebarService = sidebarService;
        this.renderer = renderer;
    }
    /**
     * @return {?}
     */
    SidebarComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        var e_1, _a;
        this.mainMenuItems = this.el.nativeElement.querySelectorAll('.main-menu > li');
        this.subMenuLists = this.el.nativeElement.querySelectorAll('.main-menu > li > .sub-menu');
        var _loop_1 = function (mainMenuItem) {
            this_1.renderer.listen(mainMenuItem, 'mouseover', (/**
             * @return {?}
             */
            function () {
                mainMenuItem.classList.add('over-menu');
                /** @type {?} */
                var maxWidth = 200;
                /** @type {?} */
                var menuItem = mainMenuItem.querySelector('a');
                /** @type {?} */
                var menuItemSpan = mainMenuItem.querySelector('a > span');
                /** @type {?} */
                var subMenu = mainMenuItem.querySelector('.sub-menu');
                /** @type {?} */
                var position = mainMenuItem.getBoundingClientRect();
                if (_this.isCollapsed) {
                    menuItem.style.transform = 'translateY(' + position.top + 'px)';
                    maxWidth = menuItemSpan.clientWidth > maxWidth ? menuItemSpan.clientWidth : maxWidth;
                }
                if (_this.isCollapsed || !mainMenuItem.classList.contains('active')) {
                    /** @type {?} */
                    var Xpx = _this.isCollapsed ? 3.125 : 12.5;
                    subMenu.style.transform = 'translate3d(' + Xpx + 'rem, ' + position.top + 'px, 0px)';
                    maxWidth = subMenu.clientWidth > maxWidth ? subMenu.clientWidth : maxWidth;
                }
                if (_this.isCollapsed) {
                    if (menuItemSpan.clientWidth < maxWidth) {
                        menuItemSpan.style.width = maxWidth + 'px';
                    }
                    if (subMenu.clientWidth < maxWidth) {
                        subMenu.style.width = maxWidth + 'px';
                    }
                }
            }));
            this_1.renderer.listen(mainMenuItem, 'mouseleave', (/**
             * @return {?}
             */
            function () {
                mainMenuItem.classList.remove('over-menu');
                mainMenuItem.querySelector('a').style.transform = '';
                mainMenuItem.querySelector('.sub-menu').style.transform = '';
                mainMenuItem.querySelector('.sub-menu').style.width = '';
                mainMenuItem.querySelector('a > span').style.width = '';
            }));
        };
        var this_1 = this;
        try {
            for (var _b = tslib_1.__values(this.mainMenuItems), _c = _b.next(); !_c.done; _c = _b.next()) {
                var mainMenuItem = _c.value;
                _loop_1(mainMenuItem);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        this.setCollapsedClassEvent();
        this.setMainMenuEvents();
        this.setSubMenuEvents();
    };
    /**
     * @return {?}
     */
    SidebarComponent.prototype.setCollapsedClassEvent = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.el.nativeElement.className === 'collapsed') {
            this.isCollapsed = true;
        }
        this.changes = new MutationObserver((/**
         * @param {?} mutations
         * @return {?}
         */
        function (mutations) {
            mutations.forEach((/**
             * @param {?} mutation
             * @return {?}
             */
            function (mutation) { return _this.changed(mutation); }));
        }));
        this.changes.observe(this.el.nativeElement, {
            attributes: true,
            childList: true,
            characterData: true
        });
    };
    /**
     * @param {?} event
     * @return {?}
     */
    SidebarComponent.prototype.changed = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (event.attributeName === 'class') {
            this.isCollapsed = event.target.className.indexOf('collapsed') !== -1;
            this.sidebarService.collapsed(this.isCollapsed);
        }
    };
    /**
     * @return {?}
     */
    SidebarComponent.prototype.setMainMenuEvents = /**
     * @return {?}
     */
    function () {
        var _this = this;
        var e_2, _a, e_3, _b;
        /** @type {?} */
        var mainMenu = this.el.nativeElement.querySelectorAll('.main-menu');
        try {
            for (var mainMenu_1 = tslib_1.__values(mainMenu), mainMenu_1_1 = mainMenu_1.next(); !mainMenu_1_1.done; mainMenu_1_1 = mainMenu_1.next()) {
                var menu = mainMenu_1_1.value;
                var _loop_2 = function (child) {
                    this_2.renderer.listen(child, 'click', (/**
                     * @return {?}
                     */
                    function () {
                        var e_4, _a;
                        /** @type {?} */
                        var activeItems = _this.el.nativeElement.querySelectorAll('.active');
                        try {
                            // We remove all active class
                            for (var activeItems_1 = tslib_1.__values(activeItems), activeItems_1_1 = activeItems_1.next(); !activeItems_1_1.done; activeItems_1_1 = activeItems_1.next()) {
                                var childlist = activeItems_1_1.value;
                                if (childlist.parentElement.parentElement !== child) {
                                    childlist.classList.remove('active');
                                }
                            }
                        }
                        catch (e_4_1) { e_4 = { error: e_4_1 }; }
                        finally {
                            try {
                                if (activeItems_1_1 && !activeItems_1_1.done && (_a = activeItems_1.return)) _a.call(activeItems_1);
                            }
                            finally { if (e_4) throw e_4.error; }
                        }
                        // We set active to current item
                        child.classList.add('active');
                        if (!_this.isCollapsed) {
                            child.querySelector('a').style.transform = '';
                            child.querySelector('.sub-menu').style.transform = '';
                        }
                    }));
                };
                var this_2 = this;
                try {
                    for (var _c = tslib_1.__values(menu.children), _d = _c.next(); !_d.done; _d = _c.next()) {
                        var child = _d.value;
                        _loop_2(child);
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (mainMenu_1_1 && !mainMenu_1_1.done && (_a = mainMenu_1.return)) _a.call(mainMenu_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
    };
    /**
     * @return {?}
     */
    SidebarComponent.prototype.setSubMenuEvents = /**
     * @return {?}
     */
    function () {
        var e_5, _a;
        /** @type {?} */
        var subMenus = this.el.nativeElement.querySelectorAll('.sub-menu li');
        var _loop_3 = function (submenu) {
            this_3.renderer.listen(submenu, 'click', (/**
             * @return {?}
             */
            function () {
                var e_6, _a;
                try {
                    // We remove all active class
                    for (var subMenus_2 = tslib_1.__values(subMenus), subMenus_2_1 = subMenus_2.next(); !subMenus_2_1.done; subMenus_2_1 = subMenus_2.next()) {
                        var childlist = subMenus_2_1.value;
                        childlist.classList.remove('active');
                    }
                }
                catch (e_6_1) { e_6 = { error: e_6_1 }; }
                finally {
                    try {
                        if (subMenus_2_1 && !subMenus_2_1.done && (_a = subMenus_2.return)) _a.call(subMenus_2);
                    }
                    finally { if (e_6) throw e_6.error; }
                }
                // We set active to current item
                submenu.classList.add('active');
            }));
        };
        var this_3 = this;
        try {
            for (var subMenus_1 = tslib_1.__values(subMenus), subMenus_1_1 = subMenus_1.next(); !subMenus_1_1.done; subMenus_1_1 = subMenus_1.next()) {
                var submenu = subMenus_1_1.value;
                _loop_3(submenu);
            }
        }
        catch (e_5_1) { e_5 = { error: e_5_1 }; }
        finally {
            try {
                if (subMenus_1_1 && !subMenus_1_1.done && (_a = subMenus_1.return)) _a.call(subMenus_1);
            }
            finally { if (e_5) throw e_5.error; }
        }
    };
    SidebarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ls-sidebar',
                    template: "<aside>\n  <ng-content></ng-content>\n\n  <section class=\"ls-sidebar-toggle\" (click)=\"isCollapsed = !isCollapsed\">\n    <div class=\"toggle-collapse\">\n      <div *ngIf=\"!isCollapsed\" class=\"collapse-icon\"></div>\n      <div *ngIf=\"isCollapsed\" class=\"uncollapse-icon\"></div>\n    </div>\n  </section>\n</aside>\n",
                    styles: ["a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,main,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}[hidden]{display:none}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}aside{background-color:var(--white);-webkit-box-shadow:0 0 10px 0 rgba(0,0,0,.25);box-shadow:0 0 10px 0 rgba(0,0,0,.25);color:#222;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:calc(100vh - 30px);overflow-x:hidden;padding-bottom:30px;position:fixed;top:30px;-webkit-transition:width .3s;transition:width .3s;z-index:5}aside .ls-sidebar-toggle{height:60px}aside .toggle-collapse{bottom:2.3rem;cursor:pointer;position:absolute;right:.5rem;width:auto}aside .toggle-collapse div{height:1rem;width:2.125rem}aside .toggle-collapse .collapse-icon{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NS4xOCAyNy4xMyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMyMjI7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5jb2xsYXBzZUZpY2hpZXIgMjE8L3RpdGxlPjxnIGlkPSJDYWxxdWVfMiIgZGF0YS1uYW1lPSJDYWxxdWUgMiI+PGcgaWQ9ImZsw6pjaGVzIj48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iNTUuMTggMTEuMjUgOS42OCAxMS4yNSAxNi40NSA0Ljk0IDEyLjk0IDAuNTIgMCAxMy4yOSAxMi43OSAyNS45OCAxNi4wNiAyMS40IDkuNjggMTUuODggNTUuMTggMTUuODggNTUuMTggMTEuMjUiLz48cmVjdCBjbGFzcz0iY2xzLTEiIHg9IjIyLjkzIiB3aWR0aD0iMzIuMTMiIGhlaWdodD0iNC42MyIvPjxyZWN0IGNsYXNzPSJjbHMtMSIgeD0iMjIuOTMiIHk9IjIyLjUiIHdpZHRoPSIzMi4xMyIgaGVpZ2h0PSI0LjYzIi8+PC9nPjwvZz48L3N2Zz4=) no-repeat}aside .toggle-collapse .uncollapse-icon{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NS4xOCAyNy4xMyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMyMjI7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5jb2xsYXBzZUZpY2hpZXIgMjI8L3RpdGxlPjxnIGlkPSJDYWxxdWVfMiIgZGF0YS1uYW1lPSJDYWxxdWUgMiI+PGcgaWQ9ImZsw6pjaGVzIj48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iMCAxMS4yNSA0NS41IDExLjI1IDM4LjczIDQuOTQgNDIuMjMgMC41MiA1NS4xOCAxMy4yOSA0Mi4zOSAyNS45OCAzOS4xMiAyMS40IDQ1LjUgMTUuODggMCAxNS44OCAwIDExLjI1Ii8+PHJlY3QgY2xhc3M9ImNscy0xIiB4PSIwLjEzIiB3aWR0aD0iMzIuMTMiIGhlaWdodD0iNC42MyIvPjxyZWN0IGNsYXNzPSJjbHMtMSIgeD0iMC4xMyIgeT0iMjIuNSIgd2lkdGg9IjMyLjEzIiBoZWlnaHQ9IjQuNjMiLz48L2c+PC9nPjwvc3ZnPg==) no-repeat}:host.collapsed aside{width:3.125rem}:host.collapsed ::ng-deep .sub-menu{max-height:0;top:0}:host.collapsed ::ng-deep .main-menu{width:12.5rem}:host.collapsed ::ng-deep .ls-sidebar-menu{overflow-x:hidden;width:3.125rem}:host.collapsed ::ng-deep .ls-sidebar-menu span:not(.badge){padding:.6rem .6rem .6rem .75rem;width:100%}:host.collapsed ::ng-deep .ls-sidebar-menu span:not(.badge):hover{background-color:var(--ls-primary-100)}:host.collapsed ::ng-deep:not(.over-menu) span{display:none}:host.collapsed ::ng-deep .over-menu span{display:inline!important}:host.collapsed ::ng-deep .over-menu>a{-webkit-box-shadow:inset 4px 0 0 var(--ls-primary-600);box-shadow:inset 4px 0 0 var(--ls-primary-600);min-width:12.7rem;padding-right:0;position:fixed;top:0;z-index:1;height:2.75rem}:host.collapsed ::ng-deep .over-menu>a>span{font-weight:700}:host.collapsed ::ng-deep .over-menu i{width:38px}:host.collapsed ::ng-deep .over-menu .sub-menu{position:fixed;min-width:9.5rem;background-color:var(--white);max-height:100vh;top:0;-webkit-box-shadow:2px 2px 10px 0 rgba(0,0,0,.25);box-shadow:2px 2px 10px 0 rgba(0,0,0,.25)}:host.collapsed ::ng-deep .over-menu .sub-menu::after{bottom:-30px;content:'';left:-16px;position:absolute;right:-30px;top:-30px;z-index:-1}:host.collapsed ::ng-deep .over-menu .sub-menu a{padding-left:.75rem;padding-right:.75rem}:host.collapsed ::ng-deep .over-menu .sub-menu li{padding:0}:host.collapsed ::ng-deep .over-menu .sub-menu::before{border-bottom:1px solid rgba(0,0,0,.1);content:'';display:block;height:2.75rem}:host.collapsed ::ng-deep .over-menu .sub-menu>.active{font-weight:500}:host:not(.collapsed) aside{width:12.5rem}:host:not(.collapsed) ::ng-deep .main-menu>li.active>a{font-weight:700}:host:not(.collapsed) ::ng-deep .main-menu li.active a{-webkit-box-shadow:inset 4px 0 0 var(--ls-primary-600);box-shadow:inset 4px 0 0 var(--ls-primary-600)}:host:not(.collapsed) ::ng-deep .main-menu li.active .sub-menu{max-height:100vh}:host:not(.collapsed) ::ng-deep .main-menu li.active .sub-menu .active{background-color:var(--ls-primary-200);color:#222;font-weight:500}:host:not(.collapsed) ::ng-deep .sub-menu a{padding-left:3rem}:host:not(.collapsed) ::ng-deep .over-menu:not(.active)>.sub-menu{position:fixed;min-width:9.5rem;background-color:var(--white);max-height:100vh;top:0;-webkit-box-shadow:2px 2px 10px 0 rgba(0,0,0,.25);box-shadow:2px 2px 10px 0 rgba(0,0,0,.25)}:host:not(.collapsed) ::ng-deep .over-menu:not(.active)>.sub-menu::after{bottom:-30px;content:'';left:-16px;position:absolute;right:-30px;top:-30px;z-index:-1}:host:not(.collapsed) ::ng-deep .over-menu:not(.active)>.sub-menu a{padding-left:.75rem;padding-right:.75rem}:host:not(.collapsed) ::ng-deep .over-menu:not(.active)>.sub-menu li{padding:0}:host ::ng-deep img{max-width:38px}:host ::ng-deep section{width:12.5rem}:host ::ng-deep a{color:inherit;text-decoration:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:2.75rem;padding-right:.75rem;padding-left:.75rem}:host ::ng-deep .over-menu{background-color:var(--ls-primary-100)}:host ::ng-deep i{padding-top:.6rem;padding-bottom:.6rem;width:3.125rem;font-size:1.15rem}:host ::ng-deep .badge{border-radius:1rem;position:absolute;top:.85rem;right:.5rem;-webkit-transition:right .3s;transition:right .3s}:host ::ng-deep .ls-sidebar-coll-logo{height:8.5em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:1.75rem .4rem 3.25rem;font-size:1.125rem}:host ::ng-deep .ls-sidebar-menu{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-y:auto}:host ::ng-deep li{list-style:none}:host ::ng-deep .main-menu{padding:.5rem 0}:host ::ng-deep .main-menu:nth-child(1){-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}:host ::ng-deep .main-menu>li{min-height:2.75rem;position:relative;overflow-y:hidden}:host ::ng-deep .main-menu>li>a{display:-webkit-box;display:-ms-flexbox;display:flex}:host ::ng-deep .main-menu>li>a>i{width:38px}:host ::ng-deep .main-menu>li.active{-webkit-box-shadow:inset 4px 0 0 var(--ls-primary-600);box-shadow:inset 4px 0 0 var(--ls-primary-600);background-color:var(--ls-primary-50)}:host ::ng-deep .main-menu>li.active .sub-menu>.active,:host ::ng-deep .main-menu>li.active>a{color:var(--ls-primary-600)}:host ::ng-deep .sub-menu{max-height:0;padding:0}:host ::ng-deep .sub-menu li{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}:host ::ng-deep .sub-menu li>a{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex}:host ::ng-deep .sub-menu>li:hover{background-color:var(--ls-primary-100)}"]
                }] }
    ];
    /** @nocollapse */
    SidebarComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: SidebarService },
        { type: Renderer2 }
    ]; };
    SidebarComponent.propDecorators = {
        isCollapsed: [{ type: HostBinding, args: ['class.collapsed',] }, { type: Input }]
    };
    return SidebarComponent;
}());
export { SidebarComponent };
if (false) {
    /** @type {?} */
    SidebarComponent.prototype.isCollapsed;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.changes;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.mainMenuItems;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.subMenuLists;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.sidebarService;
    /**
     * @type {?}
     * @private
     */
    SidebarComponent.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lkZWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AbGlicmljaWVsL2xzLWNvbXBvc2FudHMvIiwic291cmNlcyI6WyJsaWIvc3RydWN0dXJlL3NpZGViYXIvc2lkZWJhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsT0FBTyxFQUFtQixTQUFTLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3JHLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUVqRDtJQWNFLDBCQUFvQixFQUFjLEVBQVUsY0FBOEIsRUFBVSxRQUFtQjtRQUFuRixPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQVUsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVztJQUN2RyxDQUFDOzs7O0lBRUQsNkNBQWtCOzs7SUFBbEI7UUFBQSxpQkFnREM7O1FBL0NDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUMvRSxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLDZCQUE2QixDQUFDLENBQUM7Z0NBRS9FLFlBQVk7WUFDckIsT0FBSyxRQUFRLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxXQUFXOzs7WUFBRTtnQkFDOUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7O29CQUVwQyxRQUFRLEdBQUcsR0FBRzs7b0JBQ1osUUFBUSxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDOztvQkFDMUMsWUFBWSxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDOztvQkFDckQsT0FBTyxHQUFHLFlBQVksQ0FB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QSxRQUFRLENBQUEsa0NBQUE7Z0JBQXpCLElBQU0sT0FBTyxxQkFBQTt3QkFBUCxPQUFPO2FBU2pCOzs7Ozs7Ozs7SUFDSCxDQUFDOztnQkFoSUYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxZQUFZO29CQUN0QixrVkFBdUM7O2lCQUV4Qzs7OztnQkFQb0MsVUFBVTtnQkFDdkMsY0FBYztnQkFEK0MsU0FBUzs7OzhCQVUzRSxXQUFXLFNBQUMsaUJBQWlCLGNBQUcsS0FBSzs7SUEwSHhDLHVCQUFDO0NBQUEsQUFqSUQsSUFpSUM7U0E1SFksZ0JBQWdCOzs7SUFFM0IsdUNBQThEOzs7OztJQUU5RCxtQ0FBa0M7Ozs7O0lBRWxDLHlDQUFzQjs7Ozs7SUFDdEIsd0NBQXFCOzs7OztJQUVULDhCQUFzQjs7Ozs7SUFBRSwwQ0FBc0M7Ozs7O0lBQUUsb0NBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtBZnRlckNvbnRlbnRJbml0LCBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEhvc3RCaW5kaW5nLCBJbnB1dCwgUmVuZGVyZXIyfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7U2lkZWJhclNlcnZpY2V9IGZyb20gJy4vc2lkZWJhci5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbHMtc2lkZWJhcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9zaWRlYmFyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vc2lkZWJhci5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIFNpZGViYXJDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlckNvbnRlbnRJbml0IHtcblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmNvbGxhcHNlZCcpIEBJbnB1dCgpIGlzQ29sbGFwc2VkOiBib29sZWFuO1xuXG4gIHByaXZhdGUgY2hhbmdlczogTXV0YXRpb25PYnNlcnZlcjtcblxuICBwcml2YXRlIG1haW5NZW51SXRlbXM7XG4gIHByaXZhdGUgc3ViTWVudUxpc3RzO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsIHByaXZhdGUgc2lkZWJhclNlcnZpY2U6IFNpZGViYXJTZXJ2aWNlLCBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcbiAgfVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICB0aGlzLm1haW5NZW51SXRlbXMgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1haW4tbWVudSA+IGxpJyk7XG4gICAgdGhpcy5zdWJNZW51TGlzdHMgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1haW4tbWVudSA+IGxpID4gLnN1Yi1tZW51Jyk7XG5cbiAgICBmb3IgKGNvbnN0IG1haW5NZW51SXRlbSBvZiB0aGlzLm1haW5NZW51SXRlbXMpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIubGlzdGVuKG1haW5NZW51SXRlbSwgJ21vdXNlb3ZlcicsICgpID0+IHtcbiAgICAgICAgbWFpbk1lbnVJdGVtLmNsYXNzTGlzdC5hZGQoJ292ZXItbWVudScpO1xuXG4gICAgICAgIGxldCBtYXhXaWR0aCA9IDIwMDtcbiAgICAgICAgY29uc3QgbWVudUl0ZW0gPSBtYWluTWVudUl0ZW0ucXVlcnlTZWxlY3RvcignYScpO1xuICAgICAgICBjb25zdCBtZW51SXRlbVNwYW4gPSBtYWluTWVudUl0ZW0ucXVlcnlTZWxlY3RvcignYSA+IHNwYW4nKTtcbiAgICAgICAgY29uc3Qgc3ViTWVudSA9IG1haW5NZW51SXRlbS5xdWVyeVNlbGVjdG9yKCcuc3ViLW1lbnUnKTtcblxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG1haW5NZW51SXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICBtZW51SXRlbS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgnICsgcG9zaXRpb24udG9wICsgJ3B4KSc7XG4gICAgICAgICAgbWF4V2lkdGggPSBtZW51SXRlbVNwYW4uY2xpZW50V2lkdGggPiBtYXhXaWR0aCA/IG1lbnVJdGVtU3Bhbi5jbGllbnRXaWR0aCA6IG1heFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzQ29sbGFwc2VkIHx8ICFtYWluTWVudUl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgICAgIGNvbnN0IFhweCA9IHRoaXMuaXNDb2xsYXBzZWQgPyAzLjEyNSA6IDEyLjU7XG4gICAgICAgICAgc3ViTWVudS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoJyArIFhweCArICdyZW0sICcgKyBwb3NpdGlvbi50b3AgKyAncHgsIDBweCknO1xuICAgICAgICAgIG1heFdpZHRoID0gc3ViTWVudS5jbGllbnRXaWR0aCA+IG1heFdpZHRoID8gc3ViTWVudS5jbGllbnRXaWR0aCA6IG1heFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzQ29sbGFwc2VkKSB7XG4gICAgICAgICAgaWYgKG1lbnVJdGVtU3Bhbi5jbGllbnRXaWR0aCA8IG1heFdpZHRoKSB7XG4gICAgICAgICAgICBtZW51SXRlbVNwYW4uc3R5bGUud2lkdGggPSBtYXhXaWR0aCArICdweCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdWJNZW51LmNsaWVudFdpZHRoIDwgbWF4V2lkdGgpIHtcbiAgICAgICAgICAgIHN1Yk1lbnUuc3R5bGUud2lkdGggPSBtYXhXaWR0aCArICdweCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnJlbmRlcmVyLmxpc3RlbihtYWluTWVudUl0ZW0sICdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICBtYWluTWVudUl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnb3Zlci1tZW51Jyk7XG4gICAgICAgIG1haW5NZW51SXRlbS5xdWVyeVNlbGVjdG9yKCdhJykuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICAgIG1haW5NZW51SXRlbS5xdWVyeVNlbGVjdG9yKCcuc3ViLW1lbnUnKS5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICAgICAgbWFpbk1lbnVJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zdWItbWVudScpLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgIG1haW5NZW51SXRlbS5xdWVyeVNlbGVjdG9yKCdhID4gc3BhbicpLnN0eWxlLndpZHRoID0gJyc7XG5cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0Q29sbGFwc2VkQ2xhc3NFdmVudCgpO1xuXG4gICAgdGhpcy5zZXRNYWluTWVudUV2ZW50cygpO1xuICAgIHRoaXMuc2V0U3ViTWVudUV2ZW50cygpO1xuICB9XG5cbiAgc2V0Q29sbGFwc2VkQ2xhc3NFdmVudCgpIHtcbiAgICBpZiAodGhpcy5lbC5uYXRpdmVFbGVtZW50LmNsYXNzTmFtZSA9PT0gJ2NvbGxhcHNlZCcpIHtcbiAgICAgIHRoaXMuaXNDb2xsYXBzZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuY2hhbmdlcyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnM6IE11dGF0aW9uUmVjb3JkW10pID0+IHtcbiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uOiBNdXRhdGlvblJlY29yZCkgPT4gdGhpcy5jaGFuZ2VkKG11dGF0aW9uKSk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIHRoaXMuY2hhbmdlcy5vYnNlcnZlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwge1xuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGNoYW5nZWQoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuYXR0cmlidXRlTmFtZSA9PT0gJ2NsYXNzJykge1xuICAgICAgdGhpcy5pc0NvbGxhcHNlZCA9IGV2ZW50LnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignY29sbGFwc2VkJykgIT09IC0xO1xuICAgICAgdGhpcy5zaWRlYmFyU2VydmljZS5jb2xsYXBzZWQodGhpcy5pc0NvbGxhcHNlZCk7XG4gICAgfVxuICB9XG5cbiAgc2V0TWFpbk1lbnVFdmVudHMoKSB7XG4gICAgY29uc3QgbWFpbk1lbnUgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1haW4tbWVudScpO1xuICAgIGZvciAoY29uc3QgbWVudSBvZiBtYWluTWVudSkge1xuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBtZW51LmNoaWxkcmVuKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIubGlzdGVuKGNoaWxkLCAnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgYWN0aXZlSXRlbXMgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFjdGl2ZScpO1xuICAgICAgICAgIC8vIFdlIHJlbW92ZSBhbGwgYWN0aXZlIGNsYXNzXG4gICAgICAgICAgZm9yIChjb25zdCBjaGlsZGxpc3Qgb2YgYWN0aXZlSXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChjaGlsZGxpc3QucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50ICE9PSBjaGlsZCkge1xuICAgICAgICAgICAgICBjaGlsZGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFdlIHNldCBhY3RpdmUgdG8gY3VycmVudCBpdGVtXG4gICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgICAgICAgICBpZiAoIXRoaXMuaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIGNoaWxkLnF1ZXJ5U2VsZWN0b3IoJ2EnKS5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICAgICAgICAgIGNoaWxkLnF1ZXJ5U2VsZWN0b3IoJy5zdWItbWVudScpLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0U3ViTWVudUV2ZW50cygpIHtcbiAgICBjb25zdCBzdWJNZW51cyA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3ViLW1lbnUgbGknKTtcblxuICAgIGZvciAoY29uc3Qgc3VibWVudSBvZiBzdWJNZW51cykge1xuICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oc3VibWVudSwgJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAvLyBXZSByZW1vdmUgYWxsIGFjdGl2ZSBjbGFzc1xuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkbGlzdCBvZiBzdWJNZW51cykge1xuICAgICAgICAgIGNoaWxkbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBzZXQgYWN0aXZlIHRvIGN1cnJlbnQgaXRlbVxuICAgICAgICBzdWJtZW51LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iXX0=