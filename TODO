Create theme ROOT soit à la creation de la structure soit le creer lorss du premier enregistrement s'il n'existe pas

Il manque la colone roe sur le tableau index des acteurs

rename $type->getAssociatedUsers() en $type->getAssociatedActors()


Il faut lier le ficher de convocation à la séance car sinon c'est la emrdeour ajouter de sutilisateurs ou pire encore si pas d'acteur dans e type de seance!


Il faudrait que ce soit FILE qui contiene la reference à la table a laquelle elle appartient et non l'inverse comme aujourd'hui
Come ça si je supprime un projet ça supprime le file associé et on l'inverse.


Peut etre faire un lib qui precise dans quel menu je veux etre ?
Ou alors je garde en memoire le dernier cliquer et je repart la dessus (peut etre la meilleur solution apres tout)
Si le mec rentre un lien c'est son pb

Faire une deifrerence entre la denomination remve et delete.
le delete faisant unn remove + flush


VOIR AVEC ERIC EST CE QUE JE METS LES ROPERTIES OBLIGATOIRE DANS LE CONSTRUCTEUR OU NON
SI NON JE ME RETROUVE AVEC  DES NULLABLES A TESTER !

CHANGER LE USERINTERFACE du l'utilisateur pour avoir des methodes en plus !!

DEFINIR les templates email par defaut. ET mettre les blise HTML aux propre dans les message sinon on va passer pour des spammeurs
Idem quand on crre un nouveau type de message. on met les balises. on est pas des porcs !

configuration snappy

$pdf = $snappy->getOutputFromHtml($html, array(
    'orientation' => 'landscape',
    'enable-javascript' => true,
    'javascript-delay' => 1000,
    'no-stop-slow-scripts' => true,
    'no-background' => false,
    'lowquality' => false,
    'page-height' => 124 * 3,
    'page-width'  => 192 * 3,
    'encoding' => 'utf-8',
    'images' => true,
    'cookie' => array(),
    'dpi' => 300,
    'enable-external-links' => true,
    'enable-internal-links' => true


ANOUK
-----------------------
Supprimer
Suppression de la séance
dans le modal preciser le nom de l'object nom se la seance par exemple

selectOrButton s'il y a peu d'element (a voir)


Faire tourner la CI avec sqlite pour les test sauf pour les merges  (3 fois plus rapide !)


Regarder les data transformers pour eviter cela dans les forms. Faire plutot un type custom !
$builder->add('structure', HiddenType::class, [
            'data' => $options['structure'],
        ]);

        $builder->get("structure")->addModelTransformer(new CallbackTransformer(
            fn () =>  '',
            fn () =>  $options['structure']
        ));



Questionner eric pour la CI.
Faire fonctionner avec sqlite sauf pour les merges ?
Commit de pre merge qui foctionne avec postgresql ?


Tous les path dans la bd devrait etre a partir d'un chemin donnée. Conseil Epommateau !


liip cache
Creer le cache pour postgres (bénéfique à tous)

pg_dump --dbname=postgresql://idelibre:idelibre@127.0.0.1:5432/idelibre_docker --schema-only --file "/tmp/docker2.sql"

bin/console doctrine:database:create --env test
bin/console doctrine:migration:migrate --env test
bin/console doctrine:fixture:load --env test


SET CONSTRAINTS ALL DEFERRED

SET CONSTRAINTS ALL IMMEDIATE


FIXER les ID des roles (cela sera bien plus simple !)

FAIRE un DTO pour le typetype
Comme ça on aun object qui as les 3 propriétés : associatedActors, associatedGuests et associatedAdministratives



Peut etre mettre des tooltips o des popever partout par exemple sur profile la liste des profiles avec explication

Ajouter l'extenson de l'uilisateur au moment de la creation comme on fait actueleletn pour setter la structure !

Ecrire le <inputfield>  <b>@structre.fr</b>  pour facilité la compréhension


https://idelibre-4.recette.libriciel.net


pour les enums
https://github.com/myclabs/php-enum
sinon un bete splenum ferait peut etre l'affaire ?


FAUT Une TYPe peut avoir plusisuer email template.
Par exemple un pour la convocation et un pour l'invitation !!!!
Ou alors on decide qu el emessage d'invitaiton est générique à tous les type des séances.
Possibilité et surment plus simple à gérer (voir ce que font les collectivité sur nos instance !)


/**
     * @ORM\OneToOne(targetEntity=EmailTemplate::class, mappedBy="type")
     */
    private $emailTemplate;





Faire un type custom pour le suffixType et eviter ça
$builder->get('username')->addModelTransformer(new CallbackTransformer(
            fn ($username) => preg_replace('/@.*/', '', $username),
            fn ($username) => $username . '@.' . $this->getStructureSuffix($options['structure'])
        ));
et d'avoir a detailler le form




TODO enlever la category de convocation , on peut faire le distingo avec l'user associé


TODO MODIFIER LES INFORMATION DE LA SEANCE ET PEUT ETRE CHANGER LE button parcourir en bouton normal avec le titre du ficheri à coté


Avec le css genere par webpack il va falloir gerer le pb de ça dans template/generate
<link rel="stylesheet" href="{{ absolute_url(asset('assets/bootstrap/css/il-bootstrap-4.css')) }}">



Creation de l'utilisateur admn de collectivité à l'origine.
Pour l'instant il met l'user tel que rentré cad par default sans la @.
Il faudrait empecher de mettre un @ et forcer le suffix à l'enregistrement !


creer un fakeClientnotifier implement ClientNotifier interface . logs in test





Connecteur WD

Page de check !
check horodatage,
check send mail,
connexion websocket
//peut etre aussi la taille dispo mais deuis un docker c'est peut etre compliqué


modification ratachement du theme  -> A voir


gerer les presenece  D'abord les elus puis separateur  puis administratifs  -> Pas mauvaise idée mais pas le temps la !


bouton ouvrir nouelle onglet client elus

cas elu essai de se connecté


Demander a cyril ne verifier qu'il n'y a plus de trace de acteur et secretaire


WARNING VERIFIER Migration sequence !!!!!! semble ne fonctionner qu'ave un create sequence seul dans sa migration !
C'et la migration d'apres qui 'lenlever.'
Si on le fait avec une annotion il le prend pour la primary key ce con !
//CREATE SEQUENCE IF NOT EXISTS party_legacy_seq INCREMENT BY 1 MINVALUE 1 START 1;  à cahque start comme ça c'et reglé !


Verifier le 2 seances du meme type à la meme heure !










1) Super admin : pas de vue sur les infos de la coll quand se connecte à la coll  (Vu que tu peux les avoir via le menu de structure ya pas trop d'interet)
4) Préférences utilisateurs : le "@structure" est modifiable
5) Gpe politique : bouton "tous les élus" | Faire disparaître l'élu quand sélectionné ? (+ message d'erreur à la création) DONE
6) Création type de séance : majuscule à "Invités associés" DONE
7) Création élu : mettre actif par défaut
8) Format mail : mettre un e à la fin de text ? DONE
9) Doc zip : si mm nom annexe et projet >> l'annexe n'apparait pas dans le zip
10) Création séance : La date de la séance n'est pas modifiable
11) Génération rapport séance : 2h de décalage sur le doc généré vs date de la séance + mettre les élus dans l'ordre alphabetique
12) Fichier csv : manque les en-têtes dans le rapport csv
13) Com'Elus : Mettre la date de la séance dans le texte d'accompagnement
14) Com'Elus : Voir le nom de la structure dans le connecteur
